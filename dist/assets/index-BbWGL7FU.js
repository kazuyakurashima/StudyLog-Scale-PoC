(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Tb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var Cm={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb=Symbol.for("react.transitional.element"),Ob=Symbol.for("react.fragment");function km(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var a in e)a!=="key"&&(n[a]=e[a])}else n=e;return e=n.ref,{$$typeof:Nb,type:t,key:s,ref:e!==void 0?e:null,props:n}}Hl.Fragment=Ob;Hl.jsx=km;Hl.jsxs=km;Cm.exports=Hl;var c=Cm.exports,Dm={exports:{}},K={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.transitional.element"),Rb=Symbol.for("react.portal"),Cb=Symbol.for("react.fragment"),kb=Symbol.for("react.strict_mode"),Db=Symbol.for("react.profiler"),Mb=Symbol.for("react.consumer"),$b=Symbol.for("react.context"),Ub=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),zb=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),hf=Symbol.iterator;function Bb(t){return t===null||typeof t!="object"?null:(t=hf&&t[hf]||t["@@iterator"],typeof t=="function"?t:null)}var $m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Um=Object.assign,qm={};function xa(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zm(){}zm.prototype=xa.prototype;function Bu(t,e,n){this.props=t,this.context=e,this.refs=qm,this.updater=n||$m}var Lu=Bu.prototype=new zm;Lu.constructor=Bu;Um(Lu,xa.prototype);Lu.isPureReactComponent=!0;var mf=Array.isArray,fe={H:null,A:null,T:null,S:null,V:null},Bm=Object.prototype.hasOwnProperty;function Hu(t,e,n,s,a,i){return n=i.ref,{$$typeof:zu,type:t,key:e,ref:n!==void 0?n:null,props:i}}function Lb(t,e){return Hu(t.type,e,void 0,void 0,void 0,t.props)}function Gu(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function Hb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gf=/\/+/g;function So(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hb(""+t.key):e.toString(36)}function pf(){}function Gb(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(pf,pf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ds(t,e,n,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(i){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case zu:case Rb:r=!0;break;case Mm:return r=t._init,Ds(r(t._payload),e,n,s,a)}}if(r)return a=a(t),r=s===""?"."+So(t,0):s,mf(a)?(n="",r!=null&&(n=r.replace(gf,"$&/")+"/"),Ds(a,e,n,"",function(u){return u})):a!=null&&(Gu(a)&&(a=Lb(a,n+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(gf,"$&/")+"/")+r)),e.push(a)),1;r=0;var l=s===""?".":s+":";if(mf(t))for(var o=0;o<t.length;o++)s=t[o],i=l+So(s,o),r+=Ds(s,e,n,i,a);else if(o=Bb(t),typeof o=="function")for(t=o.call(t),o=0;!(s=t.next()).done;)s=s.value,i=l+So(s,o++),r+=Ds(s,e,n,i,a);else if(i==="object"){if(typeof t.then=="function")return Ds(Gb(t),e,n,s,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function or(t,e,n){if(t==null)return t;var s=[],a=0;return Ds(t,s,"","",function(i){return e.call(n,i,a++)}),s}function Xb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Yb(){}K.Children={map:or,forEach:function(t,e,n){or(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return or(t,function(){e++}),e},toArray:function(t){return or(t,function(e){return e})||[]},only:function(t){if(!Gu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=xa;K.Fragment=Cb;K.Profiler=Db;K.PureComponent=Bu;K.StrictMode=kb;K.Suspense=qb;K.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe;K.__COMPILER_RUNTIME={__proto__:null,c:function(t){return fe.H.useMemoCache(t)}};K.cache=function(t){return function(){return t.apply(null,arguments)}};K.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=Um({},t.props),a=t.key,i=void 0;if(e!=null)for(r in e.ref!==void 0&&(i=void 0),e.key!==void 0&&(a=""+e.key),e)!Bm.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];s.children=l}return Hu(t.type,a,void 0,void 0,i,s)};K.createContext=function(t){return t={$$typeof:$b,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Mb,_context:t},t};K.createElement=function(t,e,n){var s,a={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)Bm.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=e[s]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];a.children=l}if(t&&t.defaultProps)for(s in r=t.defaultProps,r)a[s]===void 0&&(a[s]=r[s]);return Hu(t,i,void 0,void 0,null,a)};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:Ub,render:t}};K.isValidElement=Gu;K.lazy=function(t){return{$$typeof:Mm,_payload:{_status:-1,_result:t},_init:Xb}};K.memo=function(t,e){return{$$typeof:zb,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=fe.T,n={};fe.T=n;try{var s=t(),a=fe.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Yb,yf)}catch(i){yf(i)}finally{fe.T=e}};K.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()};K.use=function(t){return fe.H.use(t)};K.useActionState=function(t,e,n){return fe.H.useActionState(t,e,n)};K.useCallback=function(t,e){return fe.H.useCallback(t,e)};K.useContext=function(t){return fe.H.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t,e){return fe.H.useDeferredValue(t,e)};K.useEffect=function(t,e,n){var s=fe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(t,e)};K.useId=function(){return fe.H.useId()};K.useImperativeHandle=function(t,e,n){return fe.H.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return fe.H.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return fe.H.useLayoutEffect(t,e)};K.useMemo=function(t,e){return fe.H.useMemo(t,e)};K.useOptimistic=function(t,e){return fe.H.useOptimistic(t,e)};K.useReducer=function(t,e,n){return fe.H.useReducer(t,e,n)};K.useRef=function(t){return fe.H.useRef(t)};K.useState=function(t){return fe.H.useState(t)};K.useSyncExternalStore=function(t,e,n){return fe.H.useSyncExternalStore(t,e,n)};K.useTransition=function(){return fe.H.useTransition()};K.version="19.1.1";Dm.exports=K;var B=Dm.exports;const Qb=Rm(B);var Lm={exports:{}},Gl={},Hm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,$){var L=T.length;T.push($);e:for(;0<L;){var q=L-1>>>1,V=T[q];if(0<a(V,$))T[q]=$,T[L]=V,L=q;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var $=T[0],L=T.pop();if(L!==$){T[0]=L;e:for(var q=0,V=T.length,Je=V>>>1;q<Je;){var me=2*(q+1)-1,Ca=T[me],Qt=me+1,ws=T[Qt];if(0>a(Ca,L))Qt<V&&0>a(ws,Ca)?(T[q]=ws,T[Qt]=L,q=Qt):(T[q]=Ca,T[me]=L,q=me);else if(Qt<V&&0>a(ws,L))T[q]=ws,T[Qt]=L,q=Qt;else break e}}return $}function a(T,$){var L=T.sortIndex-$.sortIndex;return L!==0?L:T.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var r=Date,l=r.now();t.unstable_now=function(){return r.now()-l}}var o=[],u=[],d=1,f=null,h=3,m=!1,_=!1,w=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function v(T){for(var $=n(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=T)s(u),$.sortIndex=$.expirationTime,e(o,$);else break;$=n(u)}}function A(T){if(w=!1,v(T),!_)if(n(o)!==null)_=!0,O||(O=!0,x());else{var $=n(u);$!==null&&z(A,$.startTime-T)}}var O=!1,y=-1,N=5,M=-1;function R(){return E?!0:!(t.unstable_now()-M<N)}function C(){if(E=!1,O){var T=t.unstable_now();M=T;var $=!0;try{e:{_=!1,w&&(w=!1,p(y),y=-1),m=!0;var L=h;try{t:{for(v(T),f=n(o);f!==null&&!(f.expirationTime>T&&R());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var V=q(f.expirationTime<=T);if(T=t.unstable_now(),typeof V=="function"){f.callback=V,v(T),$=!0;break t}f===n(o)&&s(o),v(T)}else s(o);f=n(o)}if(f!==null)$=!0;else{var Je=n(u);Je!==null&&z(A,Je.startTime-T),$=!1}}break e}finally{f=null,h=L,m=!1}$=void 0}}finally{$?x():O=!1}}}var x;if(typeof g=="function")x=function(){g(C)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,D=S.port2;S.port1.onmessage=C,x=function(){D.postMessage(null)}}else x=function(){b(C,0)};function z(T,$){y=b(function(){T(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var L=h;h=$;try{return T()}finally{h=L}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=h;h=T;try{return $()}finally{h=L}},t.unstable_scheduleCallback=function(T,$,L){var q=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?q+L:q):L=q,T){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,T={id:d++,callback:$,priorityLevel:T,startTime:L,expirationTime:V,sortIndex:-1},L>q?(T.sortIndex=L,e(u,T),n(o)===null&&T===n(u)&&(w?(p(y),y=-1):w=!0,z(A,L-q))):(T.sortIndex=V,e(o,T),_||m||(_=!0,O||(O=!0,x()))),T},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(T){var $=h;return function(){var L=h;h=$;try{return T.apply(this,arguments)}finally{h=L}}}})(Gm);Hm.exports=Gm;var Vb=Hm.exports,Xm={exports:{}},Pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib=B;function Ym(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gn(){}var Ke={d:{f:gn,r:function(){throw Error(Ym(522))},D:gn,C:gn,L:gn,m:gn,X:gn,S:gn,M:gn},p:0,findDOMNode:null},Kb=Symbol.for("react.portal");function Pb(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kb,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var si=Ib.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xl(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;Pe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Ym(299));return Pb(t,e,null,n)};Pe.flushSync=function(t){var e=si.T,n=Ke.p;try{if(si.T=null,Ke.p=2,t)return t()}finally{si.T=e,Ke.p=n,Ke.d.f()}};Pe.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ke.d.C(t,e))};Pe.prefetchDNS=function(t){typeof t=="string"&&Ke.d.D(t)};Pe.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Xl(n,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ke.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:i}):n==="script"&&Ke.d.X(t,{crossOrigin:s,integrity:a,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Pe.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Xl(e.as,e.crossOrigin);Ke.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ke.d.M(t)};Pe.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Xl(n,e.crossOrigin);Ke.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Pe.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Xl(e.as,e.crossOrigin);Ke.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ke.d.m(t)};Pe.requestFormReset=function(t){Ke.d.r(t)};Pe.unstable_batchedUpdates=function(t,e){return t(e)};Pe.useFormState=function(t,e,n){return si.H.useFormState(t,e,n)};Pe.useFormStatus=function(){return si.H.useHostTransitionStatus()};Pe.version="19.1.1";function Qm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qm)}catch(t){console.error(t)}}Qm(),Xm.exports=Pe;var Jb=Xm.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oe=Vb,Vm=B,Zb=Jb;function k(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Km(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bf(t){if(Bi(t)!==t)throw Error(k(188))}function Fb(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return bf(a),t;if(i===s)return bf(a),e;i=i.sibling}throw Error(k(188))}if(n.return!==s.return)n=a,s=i;else{for(var r=!1,l=a.child;l;){if(l===n){r=!0,n=a,s=i;break}if(l===s){r=!0,s=a,n=i;break}l=l.sibling}if(!r){for(l=i.child;l;){if(l===n){r=!0,n=i,s=a;break}if(l===s){r=!0,s=i,n=a;break}l=l.sibling}if(!r)throw Error(k(189))}}if(n.alternate!==s)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function Pm(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Pm(t),e!==null)return e;t=t.sibling}return null}var ue=Object.assign,Wb=Symbol.for("react.element"),cr=Symbol.for("react.transitional.element"),Xa=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Jm=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),Zm=Symbol.for("react.consumer"),tn=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),xc=Symbol.for("react.suspense"),wc=Symbol.for("react.suspense_list"),Yu=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Sc=Symbol.for("react.activity"),tv=Symbol.for("react.memo_cache_sentinel"),vf=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=vf&&t[vf]||t["@@iterator"],typeof t=="function"?t:null)}var nv=Symbol.for("react.client.reference");function jc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nv?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case _c:return"Profiler";case Jm:return"StrictMode";case xc:return"Suspense";case wc:return"SuspenseList";case Sc:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Xa:return"Portal";case tn:return(t.displayName||"Context")+".Provider";case Zm:return(t._context.displayName||"Context")+".Consumer";case Xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yu:return e=t.displayName||null,e!==null?e:jc(t.type)||"Memo";case wn:e=t._payload,t=t._init;try{return jc(t(e))}catch{}}return null}var Ya=Array.isArray,Y=Vm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=Zb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,is={pending:!1,data:null,method:null,action:null},Ec=[],Xs=-1;function Xt(t){return{current:t}}function $e(t){0>Xs||(t.current=Ec[Xs],Ec[Xs]=null,Xs--)}function he(t,e){Xs++,Ec[Xs]=t.current,t.current=e}var Lt=Xt(null),Si=Xt(null),Dn=Xt(null),tl=Xt(null);function nl(t,e){switch(he(Dn,e),he(Si,t),he(Lt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?jh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=jh(e),t=mp(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$e(Lt),he(Lt,t)}function ca(){$e(Lt),$e(Si),$e(Dn)}function Ac(t){t.memoizedState!==null&&he(tl,t);var e=Lt.current,n=mp(e,t.type);e!==n&&(he(Si,t),he(Lt,n))}function sl(t){Si.current===t&&($e(Lt),$e(Si)),tl.current===t&&($e(tl),Di._currentValue=is)}var Tc=Object.prototype.hasOwnProperty,Qu=Oe.unstable_scheduleCallback,jo=Oe.unstable_cancelCallback,sv=Oe.unstable_shouldYield,av=Oe.unstable_requestPaint,Ht=Oe.unstable_now,iv=Oe.unstable_getCurrentPriorityLevel,Fm=Oe.unstable_ImmediatePriority,Wm=Oe.unstable_UserBlockingPriority,al=Oe.unstable_NormalPriority,rv=Oe.unstable_LowPriority,eg=Oe.unstable_IdlePriority,lv=Oe.log,ov=Oe.unstable_setDisableYieldValue,Li=null,ft=null;function On(t){if(typeof lv=="function"&&ov(t),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(Li,t)}catch{}}var ht=Math.clz32?Math.clz32:dv,cv=Math.log,uv=Math.LN2;function dv(t){return t>>>=0,t===0?32:31-(cv(t)/uv|0)|0}var ur=256,dr=4194304;function Jn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yl(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var a=0,i=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?a=Jn(s):(r&=l,r!==0?a=Jn(r):n||(n=l&~t,n!==0&&(a=Jn(n))))):(l=s&~i,l!==0?a=Jn(l):r!==0?a=Jn(r):n||(n=s&~t,n!==0&&(a=Jn(n)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:a}function Hi(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function fv(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tg(){var t=ur;return ur<<=1,!(ur&4194048)&&(ur=256),t}function ng(){var t=dr;return dr<<=1,!(dr&62914560)&&(dr=4194304),t}function Eo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gi(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hv(t,e,n,s,a,i){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,o=t.expirationTimes,u=t.hiddenUpdates;for(n=r&~n;0<n;){var d=31-ht(n),f=1<<d;l[d]=0,o[d]=-1;var h=u[d];if(h!==null)for(u[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}s!==0&&sg(t,s,0),i!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=i&~(r&~e))}function sg(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-ht(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194090}function ag(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-ht(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}function Vu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Iu(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function ig(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:jp(t.type))}function mv(t,e){var n=ne.p;try{return ne.p=t,e()}finally{ne.p=n}}var Yn=Math.random().toString(36).slice(2),Ye="__reactFiber$"+Yn,st="__reactProps$"+Yn,wa="__reactContainer$"+Yn,Nc="__reactEvents$"+Yn,gv="__reactListeners$"+Yn,pv="__reactHandles$"+Yn,_f="__reactResources$"+Yn,Xi="__reactMarker$"+Yn;function Ku(t){delete t[Ye],delete t[st],delete t[Nc],delete t[gv],delete t[pv]}function Ys(t){var e=t[Ye];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wa]||n[Ye]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Th(t);t!==null;){if(n=t[Ye])return n;t=Th(t)}return e}t=n,n=t.parentNode}return null}function Sa(t){if(t=t[Ye]||t[wa]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Qa(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(k(33))}function ta(t){var e=t[_f];return e||(e=t[_f]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function De(t){t[Xi]=!0}var rg=new Set,lg={};function ys(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(lg[t]=e,t=0;t<e.length;t++)rg.add(e[t])}var yv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xf={},wf={};function bv(t){return Tc.call(wf,t)?!0:Tc.call(xf,t)?!1:yv.test(t)?wf[t]=!0:(xf[t]=!0,!1)}function Dr(t,e,n){if(bv(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function fr(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Vt(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}var Ao,Sf;function Ms(t){if(Ao===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ao=e&&e[1]||"",Sf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ao+t+Sf}var To=!1;function No(t,e){if(!t||To)return"";To=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(t,[],f)}else{try{f.call()}catch(m){h=m}t.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),r=i[0],l=i[1];if(r&&l){var o=r.split(`
`),u=l.split(`
`);for(a=s=0;s<o.length&&!o[s].includes("DetermineComponentFrameRoot");)s++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(s===o.length||a===u.length)for(s=o.length-1,a=u.length-1;1<=s&&0<=a&&o[s]!==u[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==u[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==u[a]){var d=`
`+o[s].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=s&&0<=a);break}}}finally{To=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ms(n):""}function vv(t){switch(t.tag){case 26:case 27:case 5:return Ms(t.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return No(t.type,!1);case 11:return No(t.type.render,!1);case 1:return No(t.type,!0);case 31:return Ms("Activity");default:return""}}function jf(t){try{var e="";do e+=vv(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function og(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _v(t){var e=og(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(r){s=""+r,i.call(this,r)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(r){s=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function il(t){t._valueTracker||(t._valueTracker=_v(t))}function cg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=og(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var xv=/[\n"\\]/g;function xt(t){return t.replace(xv,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Oc(t,e,n,s,a,i,r,l){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+bt(e)):t.value!==""+bt(e)&&(t.value=""+bt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?Rc(t,r,bt(e)):n!=null?Rc(t,r,bt(n)):s!=null&&t.removeAttribute("value"),a==null&&i!=null&&(t.defaultChecked=!!i),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+bt(l):t.removeAttribute("name")}function ug(t,e,n,s,a,i,r,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null))return;n=n!=null?""+bt(n):"",e=e!=null?""+bt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r)}function Rc(t,e,n){e==="number"&&rl(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function na(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+bt(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function dg(t,e,n){if(e!=null&&(e=""+bt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+bt(n):""}function fg(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(k(92));if(Ya(s)){if(1<s.length)throw Error(k(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=bt(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ef(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||wv.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function hg(t,e,n){if(e!=null&&typeof e!="object")throw Error(k(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var a in e)s=e[a],e.hasOwnProperty(a)&&n[a]!==s&&Ef(t,a,s)}else for(var i in e)e.hasOwnProperty(i)&&Ef(t,i,e[i])}function Pu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mr(t){return jv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Cc=null;function Ju(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qs=null,sa=null;function Af(t){var e=Sa(t);if(e&&(t=e.stateNode)){var n=t[st]||null;e:switch(t=e.stateNode,e.type){case"input":if(Oc(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=s[st]||null;if(!a)throw Error(k(90));Oc(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&cg(s)}break e;case"textarea":dg(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}}}var Oo=!1;function mg(t,e,n){if(Oo)return t(e,n);Oo=!0;try{var s=t(e);return s}finally{if(Oo=!1,(Qs!==null||sa!==null)&&(eo(),Qs&&(e=Qs,t=sa,sa=Qs=null,Af(e),t)))for(e=0;e<t.length;e++)Af(t[e])}}function ji(t,e){var n=t.stateNode;if(n===null)return null;var s=n[st]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kc=!1;if(cn)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){kc=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{kc=!1}var Rn=null,Zu=null,$r=null;function gg(){if($r)return $r;var t,e=Zu,n=e.length,s,a="value"in Rn?Rn.value:Rn.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var r=n-t;for(s=1;s<=r&&e[n-s]===a[i-s];s++);return $r=a.slice(t,1<s?1-s:void 0)}function Ur(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hr(){return!0}function Tf(){return!1}function at(t){function e(n,s,a,i,r){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hr:Tf,this.isPropagationStopped=Tf,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),e}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=at(bs),Yi=ue({},bs,{view:0,detail:0}),Ev=at(Yi),Ro,Co,$a,Vl=ue({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Ro=t.screenX-$a.screenX,Co=t.screenY-$a.screenY):Co=Ro=0,$a=t),Ro)},movementY:function(t){return"movementY"in t?t.movementY:Co}}),Nf=at(Vl),Av=ue({},Vl,{dataTransfer:0}),Tv=at(Av),Nv=ue({},Yi,{relatedTarget:0}),ko=at(Nv),Ov=ue({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Rv=at(Ov),Cv=ue({},bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kv=at(Cv),Dv=ue({},bs,{data:0}),Of=at(Dv),Mv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$v={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uv[t])?!!e[t]:!1}function Fu(){return qv}var zv=ue({},Yi,{key:function(t){if(t.key){var e=Mv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$v[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(t){return t.type==="keypress"?Ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bv=at(zv),Lv=ue({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=at(Lv),Hv=ue({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),Gv=at(Hv),Xv=ue({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yv=at(Xv),Qv=ue({},Vl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=at(Qv),Iv=ue({},bs,{newState:0,oldState:0}),Kv=at(Iv),Pv=[9,13,27,32],Wu=cn&&"CompositionEvent"in window,ai=null;cn&&"documentMode"in document&&(ai=document.documentMode);var Jv=cn&&"TextEvent"in window&&!ai,pg=cn&&(!Wu||ai&&8<ai&&11>=ai),Cf=" ",kf=!1;function yg(t,e){switch(t){case"keyup":return Pv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function Zv(t,e){switch(t){case"compositionend":return bg(e);case"keypress":return e.which!==32?null:(kf=!0,Cf);case"textInput":return t=e.data,t===Cf&&kf?null:t;default:return null}}function Fv(t,e){if(Vs)return t==="compositionend"||!Wu&&yg(t,e)?(t=gg(),$r=Zu=Rn=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pg&&e.locale!=="ko"?null:e.data;default:return null}}var Wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wv[t.type]:e==="textarea"}function vg(t,e,n,s){Qs?sa?sa.push(s):sa=[s]:Qs=s,e=jl(e,"onChange"),0<e.length&&(n=new Ql("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ii=null,Ei=null;function e_(t){dp(t,0)}function Il(t){var e=Qa(t);if(cg(e))return t}function Mf(t,e){if(t==="change")return e}var _g=!1;if(cn){var Do;if(cn){var Mo="oninput"in document;if(!Mo){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),Mo=typeof $f.oninput=="function"}Do=Mo}else Do=!1;_g=Do&&(!document.documentMode||9<document.documentMode)}function Uf(){ii&&(ii.detachEvent("onpropertychange",xg),Ei=ii=null)}function xg(t){if(t.propertyName==="value"&&Il(Ei)){var e=[];vg(e,Ei,t,Ju(t)),mg(e_,e)}}function t_(t,e,n){t==="focusin"?(Uf(),ii=e,Ei=n,ii.attachEvent("onpropertychange",xg)):t==="focusout"&&Uf()}function n_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Il(Ei)}function s_(t,e){if(t==="click")return Il(e)}function a_(t,e){if(t==="input"||t==="change")return Il(e)}function i_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pt=typeof Object.is=="function"?Object.is:i_;function Ai(t,e){if(pt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Tc.call(e,a)||!pt(t[a],e[a]))return!1}return!0}function qf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zf(t,e){var n=qf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qf(n)}}function wg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=rl(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rl(t.document)}return e}function ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var r_=cn&&"documentMode"in document&&11>=document.documentMode,Is=null,Dc=null,ri=null,Mc=!1;function Bf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mc||Is==null||Is!==rl(s)||(s=Is,"selectionStart"in s&&ed(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ri&&Ai(ri,s)||(ri=s,s=jl(Dc,"onSelect"),0<s.length&&(e=new Ql("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Is)))}function In(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:In("Animation","AnimationEnd"),animationiteration:In("Animation","AnimationIteration"),animationstart:In("Animation","AnimationStart"),transitionrun:In("Transition","TransitionRun"),transitionstart:In("Transition","TransitionStart"),transitioncancel:In("Transition","TransitionCancel"),transitionend:In("Transition","TransitionEnd")},$o={},jg={};cn&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function vs(t){if($o[t])return $o[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jg)return $o[t]=e[n];return t}var Eg=vs("animationend"),Ag=vs("animationiteration"),Tg=vs("animationstart"),l_=vs("transitionrun"),o_=vs("transitionstart"),c_=vs("transitioncancel"),Ng=vs("transitionend"),Og=new Map,$c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$c.push("scrollEnd");function Dt(t,e){Og.set(t,e),ys(e,[t])}var Lf=new WeakMap;function wt(t,e){if(typeof t=="object"&&t!==null){var n=Lf.get(t);return n!==void 0?n:(e={value:t,source:e,stack:jf(e)},Lf.set(t,e),e)}return{value:t,source:e,stack:jf(e)}}var yt=[],Ps=0,td=0;function Kl(){for(var t=Ps,e=td=Ps=0;e<t;){var n=yt[e];yt[e++]=null;var s=yt[e];yt[e++]=null;var a=yt[e];yt[e++]=null;var i=yt[e];if(yt[e++]=null,s!==null&&a!==null){var r=s.pending;r===null?a.next=a:(a.next=r.next,r.next=a),s.pending=a}i!==0&&Rg(n,a,i)}}function Pl(t,e,n,s){yt[Ps++]=t,yt[Ps++]=e,yt[Ps++]=n,yt[Ps++]=s,td|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function nd(t,e,n,s){return Pl(t,e,n,s),ll(t)}function ja(t,e){return Pl(t,null,null,e),ll(t)}function Rg(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var a=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(a=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,a&&e!==null&&(a=31-ht(n),t=i.hiddenUpdates,s=t[a],s===null?t[a]=[e]:s.push(e),e.lane=n|536870912),i):null}function ll(t){if(50<pi)throw pi=0,nu=null,Error(k(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Js={};function u_(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,n,s){return new u_(t,e,n,s)}function sd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ln(t,e){var n=t.alternate;return n===null?(n=dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Cg(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function qr(t,e,n,s,a,i){var r=0;if(s=t,typeof t=="function")sd(t)&&(r=1);else if(typeof t=="string")r=fx(t,n,Lt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Sc:return t=dt(31,n,e,a),t.elementType=Sc,t.lanes=i,t;case Gs:return rs(n.children,a,i,e);case Jm:r=8,a|=24;break;case _c:return t=dt(12,n,e,a|2),t.elementType=_c,t.lanes=i,t;case xc:return t=dt(13,n,e,a),t.elementType=xc,t.lanes=i,t;case wc:return t=dt(19,n,e,a),t.elementType=wc,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ev:case tn:r=10;break e;case Zm:r=9;break e;case Xu:r=11;break e;case Yu:r=14;break e;case wn:r=16,s=null;break e}r=29,n=Error(k(130,t===null?"null":typeof t,"")),s=null}return e=dt(r,n,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function rs(t,e,n,s){return t=dt(7,t,s,e),t.lanes=n,t}function Uo(t,e,n){return t=dt(6,t,null,e),t.lanes=n,t}function qo(t,e,n){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Zs=[],Fs=0,ol=null,cl=0,vt=[],_t=0,ls=null,nn=1,sn="";function Zn(t,e){Zs[Fs++]=cl,Zs[Fs++]=ol,ol=t,cl=e}function kg(t,e,n){vt[_t++]=nn,vt[_t++]=sn,vt[_t++]=ls,ls=t;var s=nn;t=sn;var a=32-ht(s)-1;s&=~(1<<a),n+=1;var i=32-ht(e)+a;if(30<i){var r=a-a%5;i=(s&(1<<r)-1).toString(32),s>>=r,a-=r,nn=1<<32-ht(e)+a|n<<a|s,sn=i+t}else nn=1<<i|n<<a|s,sn=t}function ad(t){t.return!==null&&(Zn(t,1),kg(t,1,0))}function id(t){for(;t===ol;)ol=Zs[--Fs],Zs[Fs]=null,cl=Zs[--Fs],Zs[Fs]=null;for(;t===ls;)ls=vt[--_t],vt[_t]=null,sn=vt[--_t],vt[_t]=null,nn=vt[--_t],vt[_t]=null}var Ie=null,pe=null,te=!1,os=null,qt=!1,Uc=Error(k(519));function fs(t){var e=Error(k(418,""));throw Ti(wt(e,t)),Uc}function Hf(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Ye]=t,e[st]=s,n){case"dialog":Z("cancel",e),Z("close",e);break;case"iframe":case"object":case"embed":Z("load",e);break;case"video":case"audio":for(n=0;n<Ri.length;n++)Z(Ri[n],e);break;case"source":Z("error",e);break;case"img":case"image":case"link":Z("error",e),Z("load",e);break;case"details":Z("toggle",e);break;case"input":Z("invalid",e),ug(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),il(e);break;case"select":Z("invalid",e);break;case"textarea":Z("invalid",e),fg(e,s.value,s.defaultValue,s.children),il(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||hp(e.textContent,n)?(s.popover!=null&&(Z("beforetoggle",e),Z("toggle",e)),s.onScroll!=null&&Z("scroll",e),s.onScrollEnd!=null&&Z("scrollend",e),s.onClick!=null&&(e.onclick=so),e=!0):e=!1,e||fs(t)}function Gf(t){for(Ie=t.return;Ie;)switch(Ie.tag){case 5:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:Ie=Ie.return}}function Ua(t){if(t!==Ie)return!1;if(!te)return Gf(t),te=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||ou(t.type,t.memoizedProps)),n=!n),n&&pe&&fs(t),Gf(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){pe=kt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}pe=null}}else e===27?(e=pe,Qn(t.type)?(t=du,du=null,pe=t):pe=e):pe=Ie?kt(t.stateNode.nextSibling):null;return!0}function Qi(){pe=Ie=null,te=!1}function Xf(){var t=os;return t!==null&&(et===null?et=t:et.push.apply(et,t),os=null),t}function Ti(t){os===null?os=[t]:os.push(t)}var qc=Xt(null),_s=null,an=null;function jn(t,e,n){he(qc,e._currentValue),e._currentValue=n}function on(t){t._currentValue=qc.current,$e(qc)}function zc(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Bc(t,e,n,s){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){var r=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var o=0;o<e.length;o++)if(l.context===e[o]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),zc(i.return,n,t),s||(r=null);break e}i=l.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(k(341));r.lanes|=n,i=r.alternate,i!==null&&(i.lanes|=n),zc(r,n,t),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===t){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function Vi(t,e,n,s){t=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(k(387));if(r=r.memoizedProps,r!==null){var l=a.type;pt(a.pendingProps.value,r.value)||(t!==null?t.push(l):t=[l])}}else if(a===tl.current){if(r=a.alternate,r===null)throw Error(k(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(Di):t=[Di])}a=a.return}t!==null&&Bc(e,t,n,s),e.flags|=262144}function ul(t){for(t=t.firstContext;t!==null;){if(!pt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function hs(t){_s=t,an=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qe(t){return Dg(_s,t)}function mr(t,e){return _s===null&&hs(t),Dg(t,e)}function Dg(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},an===null){if(t===null)throw Error(k(308));an=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else an=an.next=e;return n}var d_=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},f_=Oe.unstable_scheduleCallback,h_=Oe.unstable_NormalPriority,Te={$$typeof:tn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rd(){return{controller:new d_,data:new Map,refCount:0}}function Ii(t){t.refCount--,t.refCount===0&&f_(h_,function(){t.controller.abort()})}var li=null,Lc=0,fa=0,aa=null;function m_(t,e){if(li===null){var n=li=[];Lc=0,fa=Od(),aa={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Lc++,e.then(Yf,Yf),e}function Yf(){if(--Lc===0&&li!==null){aa!==null&&(aa.status="fulfilled");var t=li;li=null,fa=0,aa=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function g_(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var Qf=Y.S;Y.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&m_(t,e),Qf!==null&&Qf(t,e)};var cs=Xt(null);function ld(){var t=cs.current;return t!==null?t:ce.pooledCache}function zr(t,e){e===null?he(cs,cs.current):he(cs,e.pool)}function Mg(){var t=ld();return t===null?null:{parent:Te._currentValue,pool:t}}var Ki=Error(k(460)),$g=Error(k(474)),Jl=Error(k(542)),Hc={then:function(){}};function Vf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gr(){}function Ug(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(gr,gr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Kf(t),t;default:if(typeof e.status=="string")e.then(gr,gr);else{if(t=ce,t!==null&&100<t.shellSuspendCounter)throw Error(k(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=s}},function(s){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Kf(t),t}throw oi=e,Ki}}var oi=null;function If(){if(oi===null)throw Error(k(459));var t=oi;return oi=null,t}function Kf(t){if(t===Ki||t===Jl)throw Error(k(483))}var Sn=!1;function od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $n(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ae&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,e=ll(t),Rg(t,null,n),e}return Pl(t,s,e,n),ll(t)}function ci(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ag(t,n)}}function zo(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=r:i=i.next=r,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Xc=!1;function ui(){if(Xc){var t=aa;if(t!==null)throw t}}function di(t,e,n,s){Xc=!1;var a=t.updateQueue;Sn=!1;var i=a.firstBaseUpdate,r=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var o=l,u=o.next;o.next=null,r===null?i=u:r.next=u,r=o;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=o))}if(i!==null){var f=a.baseState;r=0,d=u=o=null,l=i;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(ee&h)===h:(s&h)===h){h!==0&&h===fa&&(Xc=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var _=t,w=l;h=e;var E=n;switch(w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(E,f,h);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,h=typeof _=="function"?_.call(E,f,h):_,h==null)break e;f=ue({},f,h);break e;case 2:Sn=!0}}h=l.callback,h!==null&&(t.flags|=64,m&&(t.flags|=8192),m=a.callbacks,m===null?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,o=f):d=d.next=m,r|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);d===null&&(o=f),a.baseState=o,a.firstBaseUpdate=u,a.lastBaseUpdate=d,i===null&&(a.shared.lanes=0),Xn|=r,t.lanes=r,t.memoizedState=f}}function qg(t,e){if(typeof t!="function")throw Error(k(191,t));t.call(e)}function zg(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)qg(n[t],e)}var ha=Xt(null),dl=Xt(0);function Pf(t,e){t=fn,he(dl,t),he(ha,e),fn=t|e.baseLanes}function Yc(){he(dl,fn),he(ha,ha.current)}function cd(){fn=dl.current,$e(ha),$e(dl)}var Hn=0,P=null,re=null,xe=null,fl=!1,ia=!1,ms=!1,hl=0,Ni=0,ra=null,p_=0;function be(){throw Error(k(321))}function ud(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pt(t[n],e[n]))return!1;return!0}function dd(t,e,n,s,a,i){return Hn=i,P=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Y.H=t===null||t.memoizedState===null?g0:p0,ms=!1,i=n(s,a),ms=!1,ia&&(i=Lg(e,n,s,a)),Bg(t),i}function Bg(t){Y.H=ml;var e=re!==null&&re.next!==null;if(Hn=0,xe=re=P=null,fl=!1,Ni=0,ra=null,e)throw Error(k(300));t===null||Me||(t=t.dependencies,t!==null&&ul(t)&&(Me=!0))}function Lg(t,e,n,s){P=t;var a=0;do{if(ia&&(ra=null),Ni=0,ia=!1,25<=a)throw Error(k(301));if(a+=1,xe=re=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}Y.H=S_,i=e(n,s)}while(ia);return i}function y_(){var t=Y.H,e=t.useState()[0];return e=typeof e.then=="function"?Pi(e):e,t=t.useState()[0],(re!==null?re.memoizedState:null)!==t&&(P.flags|=1024),e}function fd(){var t=hl!==0;return hl=0,t}function hd(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function md(t){if(fl){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}fl=!1}Hn=0,xe=re=P=null,ia=!1,Ni=hl=0,ra=null}function Fe(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?P.memoizedState=xe=t:xe=xe.next=t,xe}function we(){if(re===null){var t=P.alternate;t=t!==null?t.memoizedState:null}else t=re.next;var e=xe===null?P.memoizedState:xe.next;if(e!==null)xe=e,re=t;else{if(t===null)throw P.alternate===null?Error(k(467)):Error(k(310));re=t,t={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},xe===null?P.memoizedState=xe=t:xe=xe.next=t}return xe}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pi(t){var e=Ni;return Ni+=1,ra===null&&(ra=[]),t=Ug(ra,t,e),e=P,(xe===null?e.memoizedState:xe.next)===null&&(e=e.alternate,Y.H=e===null||e.memoizedState===null?g0:p0),t}function Zl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pi(t);if(t.$$typeof===tn)return Qe(t)}throw Error(k(438,String(t)))}function pd(t){var e=null,n=P.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=P.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=gd(),P.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=tv;return e.index++,n}function un(t,e){return typeof e=="function"?e(t):e}function Br(t){var e=we();return yd(e,re,t)}function yd(t,e,n){var s=t.queue;if(s===null)throw Error(k(311));s.lastRenderedReducer=n;var a=t.baseQueue,i=s.pending;if(i!==null){if(a!==null){var r=a.next;a.next=i.next,i.next=r}e.baseQueue=a=i,s.pending=null}if(i=t.baseState,a===null)t.memoizedState=i;else{e=a.next;var l=r=null,o=null,u=e,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(ee&f)===f:(Hn&f)===f){var h=u.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===fa&&(d=!0);else if((Hn&h)===h){u=u.next,h===fa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=f,r=i):o=o.next=f,P.lanes|=h,Xn|=h;f=u.action,ms&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else h={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=h,r=i):o=o.next=h,P.lanes|=f,Xn|=f;u=u.next}while(u!==null&&u!==e);if(o===null?r=i:o.next=l,!pt(i,t.memoizedState)&&(Me=!0,d&&(n=aa,n!==null)))throw n;t.memoizedState=i,t.baseState=r,t.baseQueue=o,s.lastRenderedState=i}return a===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Bo(t){var e=we(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var r=a=a.next;do i=t(i,r.action),r=r.next;while(r!==a);pt(i,e.memoizedState)||(Me=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Hg(t,e,n){var s=P,a=we(),i=te;if(i){if(n===void 0)throw Error(k(407));n=n()}else n=e();var r=!pt((re||a).memoizedState,n);r&&(a.memoizedState=n,Me=!0),a=a.queue;var l=Yg.bind(null,s,a,t);if(Ji(2048,8,l,[t]),a.getSnapshot!==e||r||xe!==null&&xe.memoizedState.tag&1){if(s.flags|=2048,ma(9,Fl(),Xg.bind(null,s,a,n,e),null),ce===null)throw Error(k(349));i||Hn&124||Gg(s,e,n)}return n}function Gg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=P.updateQueue,e===null?(e=gd(),P.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xg(t,e,n,s){e.value=n,e.getSnapshot=s,Qg(e)&&Vg(t)}function Yg(t,e,n){return n(function(){Qg(e)&&Vg(t)})}function Qg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pt(t,n)}catch{return!0}}function Vg(t){var e=ja(t,2);e!==null&&gt(e,t,2)}function Qc(t){var e=Fe();if(typeof t=="function"){var n=t;if(t=n(),ms){On(!0);try{n()}finally{On(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:t},e}function Ig(t,e,n,s){return t.baseState=n,yd(t,re,typeof s=="function"?s:un)}function b_(t,e,n,s,a){if(Wl(t))throw Error(k(485));if(t=e.action,t!==null){var i={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};Y.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,Kg(e,i)):(i.next=n.next,e.pending=n.next=i)}}function Kg(t,e){var n=e.action,s=e.payload,a=t.state;if(e.isTransition){var i=Y.T,r={};Y.T=r;try{var l=n(a,s),o=Y.S;o!==null&&o(r,l),Jf(t,e,l)}catch(u){Vc(t,e,u)}finally{Y.T=i}}else try{i=n(a,s),Jf(t,e,i)}catch(u){Vc(t,e,u)}}function Jf(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Zf(t,e,s)},function(s){return Vc(t,e,s)}):Zf(t,e,n)}function Zf(t,e,n){e.status="fulfilled",e.value=n,Pg(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Kg(t,n)))}function Vc(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,Pg(e),e=e.next;while(e!==s)}t.action=null}function Pg(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Jg(t,e){return e}function Ff(t,e){if(te){var n=ce.formState;if(n!==null){e:{var s=P;if(te){if(pe){t:{for(var a=pe,i=qt;a.nodeType!==8;){if(!i){a=null;break t}if(a=kt(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){pe=kt(a.nextSibling),s=a.data==="F!";break e}}fs(s)}s=!1}s&&(e=n[0])}}return n=Fe(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:e},n.queue=s,n=f0.bind(null,P,s),s.dispatch=n,s=Qc(!1),i=xd.bind(null,P,!1,s.queue),s=Fe(),a={state:e,dispatch:null,action:t,pending:null},s.queue=a,n=b_.bind(null,P,a,i,n),a.dispatch=n,s.memoizedState=t,[e,n,!1]}function Wf(t){var e=we();return Zg(e,re,t)}function Zg(t,e,n){if(e=yd(t,e,Jg)[0],t=Br(un)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Pi(e)}catch(r){throw r===Ki?Jl:r}else s=e;e=we();var a=e.queue,i=a.dispatch;return n!==e.memoizedState&&(P.flags|=2048,ma(9,Fl(),v_.bind(null,a,n),null)),[s,i,t]}function v_(t,e){t.action=e}function eh(t){var e=we(),n=re;if(n!==null)return Zg(e,n,t);we(),e=e.memoizedState,n=we();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function ma(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=P.updateQueue,e===null&&(e=gd(),P.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function Fl(){return{destroy:void 0,resource:void 0}}function Fg(){return we().memoizedState}function Lr(t,e,n,s){var a=Fe();s=s===void 0?null:s,P.flags|=t,a.memoizedState=ma(1|e,Fl(),n,s)}function Ji(t,e,n,s){var a=we();s=s===void 0?null:s;var i=a.memoizedState.inst;re!==null&&s!==null&&ud(s,re.memoizedState.deps)?a.memoizedState=ma(e,i,n,s):(P.flags|=t,a.memoizedState=ma(1|e,i,n,s))}function th(t,e){Lr(8390656,8,t,e)}function Wg(t,e){Ji(2048,8,t,e)}function e0(t,e){return Ji(4,2,t,e)}function t0(t,e){return Ji(4,4,t,e)}function n0(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s0(t,e,n){n=n!=null?n.concat([t]):null,Ji(4,4,n0.bind(null,e,t),n)}function bd(){}function a0(t,e){var n=we();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&ud(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function i0(t,e){var n=we();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&ud(e,s[1]))return s[0];if(s=t(),ms){On(!0);try{t()}finally{On(!1)}}return n.memoizedState=[s,e],s}function vd(t,e,n){return n===void 0||Hn&1073741824?t.memoizedState=e:(t.memoizedState=n,t=P0(),P.lanes|=t,Xn|=t,n)}function r0(t,e,n,s){return pt(n,e)?n:ha.current!==null?(t=vd(t,n,s),pt(t,e)||(Me=!0),t):Hn&42?(t=P0(),P.lanes|=t,Xn|=t,e):(Me=!0,t.memoizedState=n)}function l0(t,e,n,s,a){var i=ne.p;ne.p=i!==0&&8>i?i:8;var r=Y.T,l={};Y.T=l,xd(t,!1,e,n);try{var o=a(),u=Y.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=g_(o,s);fi(t,e,d,mt(t))}else fi(t,e,s,mt(t))}catch(f){fi(t,e,{then:function(){},status:"rejected",reason:f},mt())}finally{ne.p=i,Y.T=r}}function __(){}function Ic(t,e,n,s){if(t.tag!==5)throw Error(k(476));var a=o0(t).queue;l0(t,a,e,is,n===null?__:function(){return c0(t),n(s)})}function o0(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:is,baseState:is,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:is},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function c0(t){var e=o0(t).next.queue;fi(t,e,{},mt())}function _d(){return Qe(Di)}function u0(){return we().memoizedState}function d0(){return we().memoizedState}function x_(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=mt();t=Mn(n);var s=$n(e,t,n);s!==null&&(gt(s,e,n),ci(s,e,n)),e={cache:rd()},t.payload=e;return}e=e.return}}function w_(t,e,n){var s=mt();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wl(t)?h0(e,n):(n=nd(t,e,n,s),n!==null&&(gt(n,t,s),m0(n,e,s)))}function f0(t,e,n){var s=mt();fi(t,e,n,s)}function fi(t,e,n,s){var a={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wl(t))h0(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var r=e.lastRenderedState,l=i(r,n);if(a.hasEagerState=!0,a.eagerState=l,pt(l,r))return Pl(t,e,a,0),ce===null&&Kl(),!1}catch{}finally{}if(n=nd(t,e,a,s),n!==null)return gt(n,t,s),m0(n,e,s),!0}return!1}function xd(t,e,n,s){if(s={lane:2,revertLane:Od(),action:s,hasEagerState:!1,eagerState:null,next:null},Wl(t)){if(e)throw Error(k(479))}else e=nd(t,n,s,2),e!==null&&gt(e,t,2)}function Wl(t){var e=t.alternate;return t===P||e!==null&&e===P}function h0(t,e){ia=fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function m0(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ag(t,n)}}var ml={readContext:Qe,use:Zl,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},g0={readContext:Qe,use:Zl,useCallback:function(t,e){return Fe().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:th,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Lr(4194308,4,n0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lr(4194308,4,t,e)},useInsertionEffect:function(t,e){Lr(4,2,t,e)},useMemo:function(t,e){var n=Fe();e=e===void 0?null:e;var s=t();if(ms){On(!0);try{t()}finally{On(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Fe();if(n!==void 0){var a=n(e);if(ms){On(!0);try{n(e)}finally{On(!1)}}}else a=e;return s.memoizedState=s.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},s.queue=t,t=t.dispatch=w_.bind(null,P,t),[s.memoizedState,t]},useRef:function(t){var e=Fe();return t={current:t},e.memoizedState=t},useState:function(t){t=Qc(t);var e=t.queue,n=f0.bind(null,P,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:bd,useDeferredValue:function(t,e){var n=Fe();return vd(n,t,e)},useTransition:function(){var t=Qc(!1);return t=l0.bind(null,P,t.queue,!0,!1),Fe().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=P,a=Fe();if(te){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),ce===null)throw Error(k(349));ee&124||Gg(s,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,th(Yg.bind(null,s,i,t),[t]),s.flags|=2048,ma(9,Fl(),Xg.bind(null,s,i,n,e),null),n},useId:function(){var t=Fe(),e=ce.identifierPrefix;if(te){var n=sn,s=nn;n=(s&~(1<<32-ht(s)-1)).toString(32)+n,e="«"+e+"R"+n,n=hl++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=p_++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:_d,useFormState:Ff,useActionState:Ff,useOptimistic:function(t){var e=Fe();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=xd.bind(null,P,!0,n),n.dispatch=e,[t,e]},useMemoCache:pd,useCacheRefresh:function(){return Fe().memoizedState=x_.bind(null,P)}},p0={readContext:Qe,use:Zl,useCallback:a0,useContext:Qe,useEffect:Wg,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:Br,useRef:Fg,useState:function(){return Br(un)},useDebugValue:bd,useDeferredValue:function(t,e){var n=we();return r0(n,re.memoizedState,t,e)},useTransition:function(){var t=Br(un)[0],e=we().memoizedState;return[typeof t=="boolean"?t:Pi(t),e]},useSyncExternalStore:Hg,useId:u0,useHostTransitionStatus:_d,useFormState:Wf,useActionState:Wf,useOptimistic:function(t,e){var n=we();return Ig(n,re,t,e)},useMemoCache:pd,useCacheRefresh:d0},S_={readContext:Qe,use:Zl,useCallback:a0,useContext:Qe,useEffect:Wg,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:i0,useReducer:Bo,useRef:Fg,useState:function(){return Bo(un)},useDebugValue:bd,useDeferredValue:function(t,e){var n=we();return re===null?vd(n,t,e):r0(n,re.memoizedState,t,e)},useTransition:function(){var t=Bo(un)[0],e=we().memoizedState;return[typeof t=="boolean"?t:Pi(t),e]},useSyncExternalStore:Hg,useId:u0,useHostTransitionStatus:_d,useFormState:eh,useActionState:eh,useOptimistic:function(t,e){var n=we();return re!==null?Ig(n,re,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:pd,useCacheRefresh:d0},la=null,Oi=0;function pr(t){var e=Oi;return Oi+=1,la===null&&(la=[]),Ug(la,t,e)}function qa(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function yr(t,e){throw e.$$typeof===Wb?Error(k(525)):(t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function nh(t){var e=t._init;return e(t._payload)}function y0(t){function e(b,p){if(t){var g=b.deletions;g===null?(b.deletions=[p],b.flags|=16):g.push(p)}}function n(b,p){if(!t)return null;for(;p!==null;)e(b,p),p=p.sibling;return null}function s(b){for(var p=new Map;b!==null;)b.key!==null?p.set(b.key,b):p.set(b.index,b),b=b.sibling;return p}function a(b,p){return b=ln(b,p),b.index=0,b.sibling=null,b}function i(b,p,g){return b.index=g,t?(g=b.alternate,g!==null?(g=g.index,g<p?(b.flags|=67108866,p):g):(b.flags|=67108866,p)):(b.flags|=1048576,p)}function r(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,p,g,v){return p===null||p.tag!==6?(p=Uo(g,b.mode,v),p.return=b,p):(p=a(p,g),p.return=b,p)}function o(b,p,g,v){var A=g.type;return A===Gs?d(b,p,g.props.children,v,g.key):p!==null&&(p.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===wn&&nh(A)===p.type)?(p=a(p,g.props),qa(p,g),p.return=b,p):(p=qr(g.type,g.key,g.props,null,b.mode,v),qa(p,g),p.return=b,p)}function u(b,p,g,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=qo(g,b.mode,v),p.return=b,p):(p=a(p,g.children||[]),p.return=b,p)}function d(b,p,g,v,A){return p===null||p.tag!==7?(p=rs(g,b.mode,v,A),p.return=b,p):(p=a(p,g),p.return=b,p)}function f(b,p,g){if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return p=Uo(""+p,b.mode,g),p.return=b,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case cr:return g=qr(p.type,p.key,p.props,null,b.mode,g),qa(g,p),g.return=b,g;case Xa:return p=qo(p,b.mode,g),p.return=b,p;case wn:var v=p._init;return p=v(p._payload),f(b,p,g)}if(Ya(p)||Da(p))return p=rs(p,b.mode,g,null),p.return=b,p;if(typeof p.then=="function")return f(b,pr(p),g);if(p.$$typeof===tn)return f(b,mr(b,p),g);yr(b,p)}return null}function h(b,p,g,v){var A=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return A!==null?null:l(b,p,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cr:return g.key===A?o(b,p,g,v):null;case Xa:return g.key===A?u(b,p,g,v):null;case wn:return A=g._init,g=A(g._payload),h(b,p,g,v)}if(Ya(g)||Da(g))return A!==null?null:d(b,p,g,v,null);if(typeof g.then=="function")return h(b,p,pr(g),v);if(g.$$typeof===tn)return h(b,p,mr(b,g),v);yr(b,g)}return null}function m(b,p,g,v,A){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return b=b.get(g)||null,l(p,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cr:return b=b.get(v.key===null?g:v.key)||null,o(p,b,v,A);case Xa:return b=b.get(v.key===null?g:v.key)||null,u(p,b,v,A);case wn:var O=v._init;return v=O(v._payload),m(b,p,g,v,A)}if(Ya(v)||Da(v))return b=b.get(g)||null,d(p,b,v,A,null);if(typeof v.then=="function")return m(b,p,g,pr(v),A);if(v.$$typeof===tn)return m(b,p,g,mr(p,v),A);yr(p,v)}return null}function _(b,p,g,v){for(var A=null,O=null,y=p,N=p=0,M=null;y!==null&&N<g.length;N++){y.index>N?(M=y,y=null):M=y.sibling;var R=h(b,y,g[N],v);if(R===null){y===null&&(y=M);break}t&&y&&R.alternate===null&&e(b,y),p=i(R,p,N),O===null?A=R:O.sibling=R,O=R,y=M}if(N===g.length)return n(b,y),te&&Zn(b,N),A;if(y===null){for(;N<g.length;N++)y=f(b,g[N],v),y!==null&&(p=i(y,p,N),O===null?A=y:O.sibling=y,O=y);return te&&Zn(b,N),A}for(y=s(y);N<g.length;N++)M=m(y,b,N,g[N],v),M!==null&&(t&&M.alternate!==null&&y.delete(M.key===null?N:M.key),p=i(M,p,N),O===null?A=M:O.sibling=M,O=M);return t&&y.forEach(function(C){return e(b,C)}),te&&Zn(b,N),A}function w(b,p,g,v){if(g==null)throw Error(k(151));for(var A=null,O=null,y=p,N=p=0,M=null,R=g.next();y!==null&&!R.done;N++,R=g.next()){y.index>N?(M=y,y=null):M=y.sibling;var C=h(b,y,R.value,v);if(C===null){y===null&&(y=M);break}t&&y&&C.alternate===null&&e(b,y),p=i(C,p,N),O===null?A=C:O.sibling=C,O=C,y=M}if(R.done)return n(b,y),te&&Zn(b,N),A;if(y===null){for(;!R.done;N++,R=g.next())R=f(b,R.value,v),R!==null&&(p=i(R,p,N),O===null?A=R:O.sibling=R,O=R);return te&&Zn(b,N),A}for(y=s(y);!R.done;N++,R=g.next())R=m(y,b,N,R.value,v),R!==null&&(t&&R.alternate!==null&&y.delete(R.key===null?N:R.key),p=i(R,p,N),O===null?A=R:O.sibling=R,O=R);return t&&y.forEach(function(x){return e(b,x)}),te&&Zn(b,N),A}function E(b,p,g,v){if(typeof g=="object"&&g!==null&&g.type===Gs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case cr:e:{for(var A=g.key;p!==null;){if(p.key===A){if(A=g.type,A===Gs){if(p.tag===7){n(b,p.sibling),v=a(p,g.props.children),v.return=b,b=v;break e}}else if(p.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===wn&&nh(A)===p.type){n(b,p.sibling),v=a(p,g.props),qa(v,g),v.return=b,b=v;break e}n(b,p);break}else e(b,p);p=p.sibling}g.type===Gs?(v=rs(g.props.children,b.mode,v,g.key),v.return=b,b=v):(v=qr(g.type,g.key,g.props,null,b.mode,v),qa(v,g),v.return=b,b=v)}return r(b);case Xa:e:{for(A=g.key;p!==null;){if(p.key===A)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(b,p.sibling),v=a(p,g.children||[]),v.return=b,b=v;break e}else{n(b,p);break}else e(b,p);p=p.sibling}v=qo(g,b.mode,v),v.return=b,b=v}return r(b);case wn:return A=g._init,g=A(g._payload),E(b,p,g,v)}if(Ya(g))return _(b,p,g,v);if(Da(g)){if(A=Da(g),typeof A!="function")throw Error(k(150));return g=A.call(g),w(b,p,g,v)}if(typeof g.then=="function")return E(b,p,pr(g),v);if(g.$$typeof===tn)return E(b,p,mr(b,g),v);yr(b,g)}return typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint"?(g=""+g,p!==null&&p.tag===6?(n(b,p.sibling),v=a(p,g),v.return=b,b=v):(n(b,p),v=Uo(g,b.mode,v),v.return=b,b=v),r(b)):n(b,p)}return function(b,p,g,v){try{Oi=0;var A=E(b,p,g,v);return la=null,A}catch(y){if(y===Ki||y===Jl)throw y;var O=dt(29,y,null,b.mode);return O.lanes=v,O.return=b,O}finally{}}}var ga=y0(!0),b0=y0(!1),At=Xt(null),Gt=null;function En(t){var e=t.alternate;he(Ne,Ne.current&1),he(At,t),Gt===null&&(e===null||ha.current!==null||e.memoizedState!==null)&&(Gt=t)}function v0(t){if(t.tag===22){if(he(Ne,Ne.current),he(At,t),Gt===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Gt=t)}}else An()}function An(){he(Ne,Ne.current),he(At,At.current)}function rn(t){$e(At),Gt===t&&(Gt=null),$e(Ne)}var Ne=Xt(0);function gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||uu(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Lo(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kc={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=mt(),a=Mn(s);a.payload=e,n!=null&&(a.callback=n),e=$n(t,a,s),e!==null&&(gt(e,t,s),ci(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=mt(),a=Mn(s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=$n(t,a,s),e!==null&&(gt(e,t,s),ci(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),s=Mn(n);s.tag=2,e!=null&&(s.callback=e),e=$n(t,s,n),e!==null&&(gt(e,t,n),ci(e,t,n))}};function sh(t,e,n,s,a,i,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,r):e.prototype&&e.prototype.isPureReactComponent?!Ai(n,s)||!Ai(a,i):!0}function ah(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Kc.enqueueReplaceState(e,e.state,null)}function gs(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=ue({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}var pl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function _0(t){pl(t)}function x0(t){console.error(t)}function w0(t){pl(t)}function yl(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function ih(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Pc(t,e,n){return n=Mn(n),n.tag=3,n.payload={element:null},n.callback=function(){yl(t,e)},n}function S0(t){return t=Mn(t),t.tag=3,t}function j0(t,e,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=s.value;t.payload=function(){return a(i)},t.callback=function(){ih(e,n,s)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){ih(e,n,s),typeof a!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function j_(t,e,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Vi(e,n,a,!0),n=At.current,n!==null){switch(n.tag){case 13:return Gt===null?su():n.alternate===null&&ye===0&&(ye=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===Hc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Zo(t,s,a)),!1;case 22:return n.flags|=65536,s===Hc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Zo(t,s,a)),!1}throw Error(k(435,n.tag))}return Zo(t,s,a),su(),!1}if(te)return e=At.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,s!==Uc&&(t=Error(k(422),{cause:s}),Ti(wt(t,n)))):(s!==Uc&&(e=Error(k(423),{cause:s}),Ti(wt(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,s=wt(s,n),a=Pc(t.stateNode,s,a),zo(t,a),ye!==4&&(ye=2)),!1;var i=Error(k(520),{cause:s});if(i=wt(i,n),gi===null?gi=[i]:gi.push(i),ye!==4&&(ye=2),e===null)return!0;s=wt(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=Pc(n.stateNode,s,t),zo(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Un===null||!Un.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=S0(a),j0(a,t,n,s),zo(n,a),!1}n=n.return}while(n!==null);return!1}var E0=Error(k(461)),Me=!1;function qe(t,e,n,s){e.child=t===null?b0(e,null,n,s):ga(e,t.child,n,s)}function rh(t,e,n,s,a){n=n.render;var i=e.ref;if("ref"in s){var r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}else r=s;return hs(e),s=dd(t,e,n,r,i,a),l=fd(),t!==null&&!Me?(hd(t,e,a),dn(t,e,a)):(te&&l&&ad(e),e.flags|=1,qe(t,e,s,a),e.child)}function lh(t,e,n,s,a){if(t===null){var i=n.type;return typeof i=="function"&&!sd(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,A0(t,e,i,s,a)):(t=qr(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!wd(t,a)){var r=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ai,n(r,s)&&t.ref===e.ref)return dn(t,e,a)}return e.flags|=1,t=ln(i,s),t.ref=e.ref,t.return=e,e.child=t}function A0(t,e,n,s,a){if(t!==null){var i=t.memoizedProps;if(Ai(i,s)&&t.ref===e.ref)if(Me=!1,e.pendingProps=s=i,wd(t,a))t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,dn(t,e,a)}return Jc(t,e,n,s,a)}function T0(t,e,n){var s=e.pendingProps,a=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if(e.flags&128){if(s=i!==null?i.baseLanes|n:n,t!==null){for(a=e.child=t.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;e.childLanes=i&~s}else e.childLanes=0,e.child=null;return oh(t,e,s,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&zr(e,i!==null?i.cachePool:null),i!==null?Pf(e,i):Yc(),v0(e);else return e.lanes=e.childLanes=536870912,oh(t,e,i!==null?i.baseLanes|n:n,n)}else i!==null?(zr(e,i.cachePool),Pf(e,i),An(),e.memoizedState=null):(t!==null&&zr(e,null),Yc(),An());return qe(t,e,a,n),e.child}function oh(t,e,n,s){var a=ld();return a=a===null?null:{parent:Te._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&zr(e,null),Yc(),v0(e),t!==null&&Vi(t,e,s,!0),null}function Hr(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(k(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Jc(t,e,n,s,a){return hs(e),n=dd(t,e,n,s,void 0,a),s=fd(),t!==null&&!Me?(hd(t,e,a),dn(t,e,a)):(te&&s&&ad(e),e.flags|=1,qe(t,e,n,a),e.child)}function ch(t,e,n,s,a,i){return hs(e),e.updateQueue=null,n=Lg(e,s,n,a),Bg(t),s=fd(),t!==null&&!Me?(hd(t,e,i),dn(t,e,i)):(te&&s&&ad(e),e.flags|=1,qe(t,e,n,i),e.child)}function uh(t,e,n,s,a){if(hs(e),e.stateNode===null){var i=Js,r=n.contextType;typeof r=="object"&&r!==null&&(i=Qe(r)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Kc,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},od(e),r=n.contextType,i.context=typeof r=="object"&&r!==null?Qe(r):Js,i.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Lo(e,n,r,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Kc.enqueueReplaceState(i,i.state,null),di(e,s,i,a),ui(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,o=gs(n,l);i.props=o;var u=i.context,d=n.contextType;r=Js,typeof d=="object"&&d!==null&&(r=Qe(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==r)&&ah(e,i,s,r),Sn=!1;var h=e.memoizedState;i.state=h,di(e,s,i,a),ui(),u=e.memoizedState,l||h!==u||Sn?(typeof f=="function"&&(Lo(e,n,f,s),u=e.memoizedState),(o=Sn||sh(e,n,o,s,h,u,r))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),i.props=s,i.state=u,i.context=r,s=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Gc(t,e),r=e.memoizedProps,d=gs(n,r),i.props=d,f=e.pendingProps,h=i.context,u=n.contextType,o=Js,typeof u=="object"&&u!==null&&(o=Qe(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==f||h!==o)&&ah(e,i,s,o),Sn=!1,h=e.memoizedState,i.state=h,di(e,s,i,a),ui();var m=e.memoizedState;r!==f||h!==m||Sn||t!==null&&t.dependencies!==null&&ul(t.dependencies)?(typeof l=="function"&&(Lo(e,n,l,s),m=e.memoizedState),(d=Sn||sh(e,n,d,s,h,m,o)||t!==null&&t.dependencies!==null&&ul(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,m,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,m,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),i.props=s,i.state=m,i.context=o,s=d):(typeof i.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,Hr(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=ga(e,t.child,null,a),e.child=ga(e,null,n,a)):qe(t,e,n,a),e.memoizedState=i.state,t=e.child):t=dn(t,e,a),t}function dh(t,e,n,s){return Qi(),e.flags|=256,qe(t,e,n,s),e.child}var Ho={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Go(t){return{baseLanes:t,cachePool:Mg()}}function Xo(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=St),t}function N0(t,e,n){var s=e.pendingProps,a=!1,i=(e.flags&128)!==0,r;if((r=i)||(r=t!==null&&t.memoizedState===null?!1:(Ne.current&2)!==0),r&&(a=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(te){if(a?En(e):An(),te){var l=pe,o;if(o=l){e:{for(o=l,l=qt;o.nodeType!==8;){if(!l){l=null;break e}if(o=kt(o.nextSibling),o===null){l=null;break e}}l=o}l!==null?(e.memoizedState={dehydrated:l,treeContext:ls!==null?{id:nn,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},o=dt(18,null,null,0),o.stateNode=l,o.return=e,e.child=o,Ie=e,pe=null,o=!0):o=!1}o||fs(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return uu(l)?e.lanes=32:e.lanes=536870912,null;rn(e)}return l=s.children,s=s.fallback,a?(An(),a=e.mode,l=bl({mode:"hidden",children:l},a),s=rs(s,a,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,a=e.child,a.memoizedState=Go(n),a.childLanes=Xo(t,r,n),e.memoizedState=Ho,s):(En(e),Zc(e,l))}if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null)){if(i)e.flags&256?(En(e),e.flags&=-257,e=Yo(t,e,n)):e.memoizedState!==null?(An(),e.child=t.child,e.flags|=128,e=null):(An(),a=s.fallback,l=e.mode,s=bl({mode:"visible",children:s.children},l),a=rs(a,l,n,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,ga(e,t.child,null,n),s=e.child,s.memoizedState=Go(n),s.childLanes=Xo(t,r,n),e.memoizedState=Ho,e=a);else if(En(e),uu(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var u=r.dgst;r=u,s=Error(k(419)),s.stack="",s.digest=r,Ti({value:s,source:null,stack:null}),e=Yo(t,e,n)}else if(Me||Vi(t,e,n,!1),r=(n&t.childLanes)!==0,Me||r){if(r=ce,r!==null&&(s=n&-n,s=s&42?1:Vu(s),s=s&(r.suspendedLanes|n)?0:s,s!==0&&s!==o.retryLane))throw o.retryLane=s,ja(t,s),gt(r,t,s),E0;l.data==="$?"||su(),e=Yo(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=o.treeContext,pe=kt(l.nextSibling),Ie=e,te=!0,os=null,qt=!1,t!==null&&(vt[_t++]=nn,vt[_t++]=sn,vt[_t++]=ls,nn=t.id,sn=t.overflow,ls=e),e=Zc(e,s.children),e.flags|=4096);return e}return a?(An(),a=s.fallback,l=e.mode,o=t.child,u=o.sibling,s=ln(o,{mode:"hidden",children:s.children}),s.subtreeFlags=o.subtreeFlags&65011712,u!==null?a=ln(u,a):(a=rs(a,l,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l===null?l=Go(n):(o=l.cachePool,o!==null?(u=Te._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=Mg(),l={baseLanes:l.baseLanes|n,cachePool:o}),a.memoizedState=l,a.childLanes=Xo(t,r,n),e.memoizedState=Ho,s):(En(e),n=t.child,t=n.sibling,n=ln(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Zc(t,e){return e=bl({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function bl(t,e){return t=dt(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Yo(t,e,n){return ga(e,t.child,null,n),t=Zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fh(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),zc(t.return,e,n)}function Qo(t,e,n,s,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function O0(t,e,n){var s=e.pendingProps,a=s.revealOrder,i=s.tail;if(qe(t,e,s.children,n),s=Ne.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fh(t,n,e);else if(t.tag===19)fh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(he(Ne,s),a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&gl(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Qo(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&gl(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Qo(e,!0,n,null,i);break;case"together":Qo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(n&e.childLanes))if(t!==null){if(Vi(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wd(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ul(t)))}function E_(t,e,n){switch(e.tag){case 3:nl(e,e.stateNode.containerInfo),jn(e,Te,t.memoizedState.cache),Qi();break;case 27:case 5:Ac(e);break;case 4:nl(e,e.stateNode.containerInfo);break;case 10:jn(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(En(e),e.flags|=128,null):n&e.child.childLanes?N0(t,e,n):(En(e),t=dn(t,e,n),t!==null?t.sibling:null);En(e);break;case 19:var a=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Vi(t,e,n,!1),s=(n&e.childLanes)!==0),a){if(s)return O0(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),he(Ne,Ne.current),s)break;return null;case 22:case 23:return e.lanes=0,T0(t,e,n);case 24:jn(e,Te,t.memoizedState.cache)}return dn(t,e,n)}function R0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Me=!0;else{if(!wd(t,n)&&!(e.flags&128))return Me=!1,E_(t,e,n);Me=!!(t.flags&131072)}else Me=!1,te&&e.flags&1048576&&kg(e,cl,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var s=e.elementType,a=s._init;if(s=a(s._payload),e.type=s,typeof s=="function")sd(s)?(t=gs(s,t),e.tag=1,e=uh(null,e,s,t,n)):(e.tag=0,e=Jc(null,e,s,t,n));else{if(s!=null){if(a=s.$$typeof,a===Xu){e.tag=11,e=rh(null,e,s,t,n);break e}else if(a===Yu){e.tag=14,e=lh(null,e,s,t,n);break e}}throw e=jc(s)||s,Error(k(306,e,""))}}return e;case 0:return Jc(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,a=gs(s,e.pendingProps),uh(t,e,s,a,n);case 3:e:{if(nl(e,e.stateNode.containerInfo),t===null)throw Error(k(387));s=e.pendingProps;var i=e.memoizedState;a=i.element,Gc(t,e),di(e,s,null,n);var r=e.memoizedState;if(s=r.cache,jn(e,Te,s),s!==i.cache&&Bc(e,[Te],n,!0),ui(),s=r.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=dh(t,e,s,n);break e}else if(s!==a){a=wt(Error(k(424)),e),Ti(a),e=dh(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pe=kt(t.firstChild),Ie=e,te=!0,os=null,qt=!0,n=b0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Qi(),s===a){e=dn(t,e,n);break e}qe(t,e,s,n)}e=e.child}return e;case 26:return Hr(t,e),t===null?(n=Oh(e.type,null,e.pendingProps,null))?e.memoizedState=n:te||(n=e.type,t=e.pendingProps,s=El(Dn.current).createElement(n),s[Ye]=e,s[st]=t,He(s,n,t),De(s),e.stateNode=s):e.memoizedState=Oh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ac(e),t===null&&te&&(s=e.stateNode=pp(e.type,e.pendingProps,Dn.current),Ie=e,qt=!0,a=pe,Qn(e.type)?(du=a,pe=kt(s.firstChild)):pe=a),qe(t,e,e.pendingProps.children,n),Hr(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&te&&((a=s=pe)&&(s=W_(s,e.type,e.pendingProps,qt),s!==null?(e.stateNode=s,Ie=e,pe=kt(s.firstChild),qt=!1,a=!0):a=!1),a||fs(e)),Ac(e),a=e.type,i=e.pendingProps,r=t!==null?t.memoizedProps:null,s=i.children,ou(a,i)?s=null:r!==null&&ou(a,r)&&(e.flags|=32),e.memoizedState!==null&&(a=dd(t,e,y_,null,null,n),Di._currentValue=a),Hr(t,e),qe(t,e,s,n),e.child;case 6:return t===null&&te&&((t=n=pe)&&(n=ex(n,e.pendingProps,qt),n!==null?(e.stateNode=n,Ie=e,pe=null,t=!0):t=!1),t||fs(e)),null;case 13:return N0(t,e,n);case 4:return nl(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ga(e,null,s,n):qe(t,e,s,n),e.child;case 11:return rh(t,e,e.type,e.pendingProps,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,jn(e,e.type,s.value),qe(t,e,s.children,n),e.child;case 9:return a=e.type._context,s=e.pendingProps.children,hs(e),a=Qe(a),s=s(a),e.flags|=1,qe(t,e,s,n),e.child;case 14:return lh(t,e,e.type,e.pendingProps,n);case 15:return A0(t,e,e.type,e.pendingProps,n);case 19:return O0(t,e,n);case 31:return s=e.pendingProps,n=e.mode,s={mode:s.mode,children:s.children},t===null?(n=bl(s,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ln(t.child,s),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return T0(t,e,n);case 24:return hs(e),s=Qe(Te),t===null?(a=ld(),a===null&&(a=ce,i=rd(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),e.memoizedState={parent:s,cache:a},od(e),jn(e,Te,a)):(t.lanes&n&&(Gc(t,e),di(e,null,null,n),ui()),a=t.memoizedState,i=e.memoizedState,a.parent!==s?(a={parent:s,cache:s},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),jn(e,Te,s)):(s=i.cache,jn(e,Te,s),s!==a.cache&&Bc(e,[Te],n,!0))),qe(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(k(156,e.tag))}function It(t){t.flags|=4}function hh(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!vp(e)){if(e=At.current,e!==null&&((ee&4194048)===ee?Gt!==null:(ee&62914560)!==ee&&!(ee&536870912)||e!==Gt))throw oi=Hc,$g;t.flags|=8192}}function br(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?ng():536870912,t.lanes|=e,pa|=e)}function za(t,e){if(!te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&65011712,s|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function A_(t,e,n){var s=e.pendingProps;switch(id(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(e),null;case 1:return ge(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),on(Te),ca(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?It(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xf())),ge(e),null;case 26:return n=e.memoizedState,t===null?(It(e),n!==null?(ge(e),hh(e,n)):(ge(e),e.flags&=-16777217)):n?n!==t.memoizedState?(It(e),ge(e),hh(e,n)):(ge(e),e.flags&=-16777217):(t.memoizedProps!==s&&It(e),ge(e),e.flags&=-16777217),null;case 27:sl(e),n=Dn.current;var a=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return ge(e),null}t=Lt.current,Ua(e)?Hf(e):(t=pp(a,s,n),e.stateNode=t,It(e))}return ge(e),null;case 5:if(sl(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return ge(e),null}if(t=Lt.current,Ua(e))Hf(e);else{switch(a=El(Dn.current),t){case 1:t=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?a.createElement(n,{is:s.is}):a.createElement(n)}}t[Ye]=e,t[st]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=t;e:switch(He(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&It(e)}}return ge(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&It(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(k(166));if(t=Dn.current,Ua(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,a=Ie,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}t[Ye]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||hp(t.nodeValue,n)),t||fs(e)}else t=El(t).createTextNode(s),t[Ye]=e,e.stateNode=t}return ge(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Ua(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(k(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(k(317));a[Ye]=e}else Qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ge(e),a=!1}else a=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(rn(e),e):(rn(e),null)}if(rn(e),e.flags&128)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool);var i=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),br(e,e.updateQueue),ge(e),null;case 4:return ca(),t===null&&Rd(e.stateNode.containerInfo),ge(e),null;case 10:return on(e.type),ge(e),null;case 19:if($e(Ne),a=e.memoizedState,a===null)return ge(e),null;if(s=(e.flags&128)!==0,i=a.rendering,i===null)if(s)za(a,!1);else{if(ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=gl(t),i!==null){for(e.flags|=128,za(a,!1),t=i.updateQueue,e.updateQueue=t,br(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Cg(n,t),n=n.sibling;return he(Ne,Ne.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ht()>_l&&(e.flags|=128,s=!0,za(a,!1),e.lanes=4194304)}else{if(!s)if(t=gl(i),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,br(e,t),za(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!te)return ge(e),null}else 2*Ht()-a.renderingStartTime>_l&&n!==536870912&&(e.flags|=128,s=!0,za(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(t=a.last,t!==null?t.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ht(),e.sibling=null,t=Ne.current,he(Ne,s?t&1|2:t&1),e):(ge(e),null);case 22:case 23:return rn(e),cd(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(ge(e),e.subtreeFlags&6&&(e.flags|=8192)):ge(e),n=e.updateQueue,n!==null&&br(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&$e(cs),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),on(Te),ge(e),null;case 25:return null;case 30:return null}throw Error(k(156,e.tag))}function T_(t,e){switch(id(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return on(Te),ca(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return sl(e),null;case 13:if(rn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ne),null;case 4:return ca(),null;case 10:return on(e.type),null;case 22:case 23:return rn(e),cd(),t!==null&&$e(cs),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return on(Te),null;case 25:return null;default:return null}}function C0(t,e){switch(id(e),e.tag){case 3:on(Te),ca();break;case 26:case 27:case 5:sl(e);break;case 4:ca();break;case 13:rn(e);break;case 19:$e(Ne);break;case 10:on(e.type);break;case 22:case 23:rn(e),cd(),t!==null&&$e(cs);break;case 24:on(Te)}}function Zi(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&t)===t){s=void 0;var i=n.create,r=n.inst;s=i(),r.destroy=s}n=n.next}while(n!==a)}}catch(l){le(e,e.return,l)}}function Gn(t,e,n){try{var s=e.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var i=a.next;s=i;do{if((s.tag&t)===t){var r=s.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,a=e;var o=n,u=l;try{u()}catch(d){le(a,o,d)}}}s=s.next}while(s!==i)}}catch(d){le(e,e.return,d)}}function k0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{zg(e,n)}catch(s){le(t,t.return,s)}}}function D0(t,e,n){n.props=gs(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){le(t,e,s)}}function hi(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(a){le(t,e,a)}}function zt(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){le(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){le(t,e,a)}else n.current=null}function M0(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){le(t,t.return,a)}}function Vo(t,e,n){try{var s=t.stateNode;K_(s,t.type,n,e),s[st]=e}catch(a){le(t,t.return,a)}}function $0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qn(t.type)||t.tag===4}function Io(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=so));else if(s!==4&&(s===27&&Qn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Fc(t,e,n),t=t.sibling;t!==null;)Fc(t,e,n),t=t.sibling}function vl(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Qn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(vl(t,e,n),t=t.sibling;t!==null;)vl(t,e,n),t=t.sibling}function U0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);He(e,s,n),e[Ye]=t,e[st]=n}catch(i){le(t,t.return,i)}}var en=!1,ve=!1,Ko=!1,mh=typeof WeakSet=="function"?WeakSet:Set,ke=null;function N_(t,e){if(t=t.containerInfo,ru=Ol,t=Sg(t),ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var r=0,l=-1,o=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(l=r+a),f!==i||s!==0&&f.nodeType!==3||(o=r+s),f.nodeType===3&&(r+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===a&&(l=r),h===i&&++d===s&&(o=r),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(lu={focusedElem:t,selectionRange:n},Ol=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){switch(e=ke,i=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var _=gs(n.type,a,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(_,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(w){le(n,n.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)cu(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(k(163))}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}}function q0(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:pn(t,n),s&4&&Zi(5,n);break;case 1:if(pn(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){le(n,n.return,r)}else{var a=gs(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){le(n,n.return,r)}}s&64&&k0(n),s&512&&hi(n,n.return);break;case 3:if(pn(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{zg(t,e)}catch(r){le(n,n.return,r)}}break;case 27:e===null&&s&4&&U0(n);case 26:case 5:pn(t,n),e===null&&s&4&&M0(n),s&512&&hi(n,n.return);break;case 12:pn(t,n);break;case 13:pn(t,n),s&4&&L0(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=q_.bind(null,n),tx(t,n))));break;case 22:if(s=n.memoizedState!==null||en,!s){e=e!==null&&e.memoizedState!==null||ve,a=en;var i=ve;en=s,(ve=e)&&!i?_n(t,n,(n.subtreeFlags&8772)!==0):pn(t,n),en=a,ve=i}break;case 30:break;default:pn(t,n)}}function z0(t){var e=t.alternate;e!==null&&(t.alternate=null,z0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Ku(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var de=null,We=!1;function Kt(t,e,n){for(n=n.child;n!==null;)B0(t,e,n),n=n.sibling}function B0(t,e,n){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Li,n)}catch{}switch(n.tag){case 26:ve||zt(n,e),Kt(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ve||zt(n,e);var s=de,a=We;Qn(n.type)&&(de=n.stateNode,We=!1),Kt(t,e,n),yi(n.stateNode),de=s,We=a;break;case 5:ve||zt(n,e);case 6:if(s=de,a=We,de=null,Kt(t,e,n),de=s,We=a,de!==null)if(We)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(n.stateNode)}catch(i){le(n,e,i)}else try{de.removeChild(n.stateNode)}catch(i){le(n,e,i)}break;case 18:de!==null&&(We?(t=de,Ah(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ui(t)):Ah(de,n.stateNode));break;case 4:s=de,a=We,de=n.stateNode.containerInfo,We=!0,Kt(t,e,n),de=s,We=a;break;case 0:case 11:case 14:case 15:ve||Gn(2,n,e),ve||Gn(4,n,e),Kt(t,e,n);break;case 1:ve||(zt(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&D0(n,e,s)),Kt(t,e,n);break;case 21:Kt(t,e,n);break;case 22:ve=(s=ve)||n.memoizedState!==null,Kt(t,e,n),ve=s;break;default:Kt(t,e,n)}}function L0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ui(t)}catch(n){le(e,e.return,n)}}function O_(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new mh),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new mh),e;default:throw Error(k(435,t.tag))}}function Po(t,e){var n=O_(t);e.forEach(function(s){var a=z_.bind(null,t,s);n.has(s)||(n.add(s),s.then(a,a))})}function it(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],i=t,r=e,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(Qn(l.type)){de=l.stateNode,We=!1;break e}break;case 5:de=l.stateNode,We=!1;break e;case 3:case 4:de=l.stateNode.containerInfo,We=!0;break e}l=l.return}if(de===null)throw Error(k(160));B0(i,r,a),de=null,We=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)H0(e,t),e=e.sibling}var Rt=null;function H0(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:it(e,t),rt(t),s&4&&(Gn(3,t,t.return),Zi(3,t),Gn(5,t,t.return));break;case 1:it(e,t),rt(t),s&512&&(ve||n===null||zt(n,n.return)),s&64&&en&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=Rt;if(it(e,t),rt(t),s&512&&(ve||n===null||zt(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Xi]||i[Ye]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),He(i,s,n),i[Ye]=t,De(i),s=i;break e;case"link":var r=Ch("link","href",a).get(s+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(i=r[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}i=a.createElement(s),He(i,s,n),a.head.appendChild(i);break;case"meta":if(r=Ch("meta","content",a).get(s+(n.content||""))){for(l=0;l<r.length;l++)if(i=r[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}i=a.createElement(s),He(i,s,n),a.head.appendChild(i);break;default:throw Error(k(468,s))}i[Ye]=t,De(i),s=i}t.stateNode=s}else kh(a,t.type,t.stateNode);else t.stateNode=Rh(a,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?kh(a,t.type,t.stateNode):Rh(a,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Vo(t,t.memoizedProps,n.memoizedProps)}break;case 27:it(e,t),rt(t),s&512&&(ve||n===null||zt(n,n.return)),n!==null&&s&4&&Vo(t,t.memoizedProps,n.memoizedProps);break;case 5:if(it(e,t),rt(t),s&512&&(ve||n===null||zt(n,n.return)),t.flags&32){a=t.stateNode;try{da(a,"")}catch(m){le(t,t.return,m)}}s&4&&t.stateNode!=null&&(a=t.memoizedProps,Vo(t,a,n!==null?n.memoizedProps:a)),s&1024&&(Ko=!0);break;case 6:if(it(e,t),rt(t),s&4){if(t.stateNode===null)throw Error(k(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(m){le(t,t.return,m)}}break;case 3:if(Yr=null,a=Rt,Rt=Al(e.containerInfo),it(e,t),Rt=a,rt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(m){le(t,t.return,m)}Ko&&(Ko=!1,G0(t));break;case 4:s=Rt,Rt=Al(t.stateNode.containerInfo),it(e,t),rt(t),Rt=s;break;case 12:it(e,t),rt(t);break;case 13:it(e,t),rt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Td=Ht()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Po(t,s)));break;case 22:a=t.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=en,d=ve;if(en=u||a,ve=d||o,it(e,t),ve=d,en=u,rt(t),s&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||o||en||ve||Fn(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){o=n=e;try{if(i=o.stateNode,a)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){le(o,o.return,m)}}}else if(e.tag===6){if(n===null){o=e;try{o.stateNode.nodeValue=a?"":o.memoizedProps}catch(m){le(o,o.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Po(t,n))));break;case 19:it(e,t),rt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Po(t,s)));break;case 30:break;case 21:break;default:it(e,t),rt(t)}}function rt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if($0(s)){n=s;break}s=s.return}if(n==null)throw Error(k(160));switch(n.tag){case 27:var a=n.stateNode,i=Io(t);vl(t,i,a);break;case 5:var r=n.stateNode;n.flags&32&&(da(r,""),n.flags&=-33);var l=Io(t);vl(t,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,u=Io(t);Fc(t,u,o);break;default:throw Error(k(161))}}catch(d){le(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;G0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function pn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)q0(t,e.alternate,e),e=e.sibling}function Fn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Gn(4,e,e.return),Fn(e);break;case 1:zt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&D0(e,e.return,n),Fn(e);break;case 27:yi(e.stateNode);case 26:case 5:zt(e,e.return),Fn(e);break;case 22:e.memoizedState===null&&Fn(e);break;case 30:Fn(e);break;default:Fn(e)}t=t.sibling}}function _n(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,a=t,i=e,r=i.flags;switch(i.tag){case 0:case 11:case 15:_n(a,i,n),Zi(4,i);break;case 1:if(_n(a,i,n),s=i,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){le(s,s.return,u)}if(s=i,a=s.updateQueue,a!==null){var l=s.stateNode;try{var o=a.shared.hiddenCallbacks;if(o!==null)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)qg(o[a],l)}catch(u){le(s,s.return,u)}}n&&r&64&&k0(i),hi(i,i.return);break;case 27:U0(i);case 26:case 5:_n(a,i,n),n&&s===null&&r&4&&M0(i),hi(i,i.return);break;case 12:_n(a,i,n);break;case 13:_n(a,i,n),n&&r&4&&L0(a,i);break;case 22:i.memoizedState===null&&_n(a,i,n),hi(i,i.return);break;case 30:break;default:_n(a,i,n)}e=e.sibling}}function Sd(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ii(n))}function jd(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ii(t))}function Mt(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)X0(t,e,n,s),e=e.sibling}function X0(t,e,n,s){var a=e.flags;switch(e.tag){case 0:case 11:case 15:Mt(t,e,n,s),a&2048&&Zi(9,e);break;case 1:Mt(t,e,n,s);break;case 3:Mt(t,e,n,s),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ii(t)));break;case 12:if(a&2048){Mt(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,r=i.id,l=i.onPostCommit;typeof l=="function"&&l(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(o){le(e,e.return,o)}}else Mt(t,e,n,s);break;case 13:Mt(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,r=e.alternate,e.memoizedState!==null?i._visibility&2?Mt(t,e,n,s):mi(t,e):i._visibility&2?Mt(t,e,n,s):(i._visibility|=2,$s(t,e,n,s,(e.subtreeFlags&10256)!==0)),a&2048&&Sd(r,e);break;case 24:Mt(t,e,n,s),a&2048&&jd(e.alternate,e);break;default:Mt(t,e,n,s)}}function $s(t,e,n,s,a){for(a=a&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var i=t,r=e,l=n,o=s,u=r.flags;switch(r.tag){case 0:case 11:case 15:$s(i,r,l,o,a),Zi(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?$s(i,r,l,o,a):mi(i,r):(d._visibility|=2,$s(i,r,l,o,a)),a&&u&2048&&Sd(r.alternate,r);break;case 24:$s(i,r,l,o,a),a&&u&2048&&jd(r.alternate,r);break;default:$s(i,r,l,o,a)}e=e.sibling}}function mi(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,a=s.flags;switch(s.tag){case 22:mi(n,s),a&2048&&Sd(s.alternate,s);break;case 24:mi(n,s),a&2048&&jd(s.alternate,s);break;default:mi(n,s)}e=e.sibling}}var Va=8192;function Ss(t){if(t.subtreeFlags&Va)for(t=t.child;t!==null;)Y0(t),t=t.sibling}function Y0(t){switch(t.tag){case 26:Ss(t),t.flags&Va&&t.memoizedState!==null&&mx(Rt,t.memoizedState,t.memoizedProps);break;case 5:Ss(t);break;case 3:case 4:var e=Rt;Rt=Al(t.stateNode.containerInfo),Ss(t),Rt=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Va,Va=16777216,Ss(t),Va=e):Ss(t));break;default:Ss(t)}}function Q0(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ba(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ke=s,I0(s,t)}Q0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)V0(t),t=t.sibling}function V0(t){switch(t.tag){case 0:case 11:case 15:Ba(t),t.flags&2048&&Gn(9,t,t.return);break;case 3:Ba(t);break;case 12:Ba(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Gr(t)):Ba(t);break;default:Ba(t)}}function Gr(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ke=s,I0(s,t)}Q0(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Gn(8,e,e.return),Gr(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Gr(e));break;default:Gr(e)}t=t.sibling}}function I0(t,e){for(;ke!==null;){var n=ke;switch(n.tag){case 0:case 11:case 15:Gn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ii(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,ke=s;else e:for(n=t;ke!==null;){s=ke;var a=s.sibling,i=s.return;if(z0(s),s===n){ke=null;break e}if(a!==null){a.return=i,ke=a;break e}ke=i}}}var R_={getCacheForType:function(t){var e=Qe(Te),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},C_=typeof WeakMap=="function"?WeakMap:Map,ae=0,ce=null,F=null,ee=0,se=0,ut=null,Cn=!1,Ea=!1,Ed=!1,fn=0,ye=0,Xn=0,us=0,Ad=0,St=0,pa=0,gi=null,et=null,Wc=!1,Td=0,_l=1/0,xl=null,Un=null,Be=0,qn=null,ya=null,oa=0,eu=0,tu=null,K0=null,pi=0,nu=null;function mt(){if(ae&2&&ee!==0)return ee&-ee;if(Y.T!==null){var t=fa;return t!==0?t:Od()}return ig()}function P0(){St===0&&(St=!(ee&536870912)||te?tg():536870912);var t=At.current;return t!==null&&(t.flags|=32),St}function gt(t,e,n){(t===ce&&(se===2||se===9)||t.cancelPendingCommit!==null)&&(ba(t,0),kn(t,ee,St,!1)),Gi(t,n),(!(ae&2)||t!==ce)&&(t===ce&&(!(ae&2)&&(us|=n),ye===4&&kn(t,ee,St,!1)),Yt(t))}function J0(t,e,n){if(ae&6)throw Error(k(327));var s=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Hi(t,e),a=s?M_(t,e):Jo(t,e,!0),i=s;do{if(a===0){Ea&&!s&&kn(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!k_(n)){a=Jo(t,e,!1),i=!1;continue}if(a===2){if(i=e,t.errorRecoveryDisabledLanes&i)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var l=t;a=gi;var o=l.current.memoizedState.isDehydrated;if(o&&(ba(l,r).flags|=256),r=Jo(l,r,!1),r!==2){if(Ed&&!o){l.errorRecoveryDisabledLanes|=i,us|=i,a=4;break e}i=et,et=a,i!==null&&(et===null?et=i:et.push.apply(et,i))}a=r}if(i=!1,a!==2)continue}}if(a===1){ba(t,0),kn(t,e,0,!0);break}e:{switch(s=t,i=a,i){case 0:case 1:throw Error(k(345));case 4:if((e&4194048)!==e)break;case 6:kn(s,e,St,!Cn);break e;case 2:et=null;break;case 3:case 5:break;default:throw Error(k(329))}if((e&62914560)===e&&(a=Td+300-Ht(),10<a)){if(kn(s,e,St,!Cn),Yl(s,0,!0)!==0)break e;s.timeoutHandle=gp(gh.bind(null,s,n,et,xl,Wc,e,St,us,pa,Cn,i,2,-0,0),a);break e}gh(s,n,et,xl,Wc,e,St,us,pa,Cn,i,0,-0,0)}}break}while(!0);Yt(t)}function gh(t,e,n,s,a,i,r,l,o,u,d,f,h,m){if(t.timeoutHandle=-1,f=e.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(ki={stylesheets:null,count:0,unsuspend:hx},Y0(e),f=gx(),f!==null)){t.cancelPendingCommit=f(yh.bind(null,t,e,i,n,s,a,r,l,o,d,1,h,m)),kn(t,i,r,!u);return}yh(t,e,i,n,s,a,r,l,o)}function k_(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!pt(i(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e,n,s){e&=~Ad,e&=~us,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var a=e;0<a;){var i=31-ht(a),r=1<<i;s[i]=-1,a&=~r}n!==0&&sg(t,n,e)}function eo(){return ae&6?!0:(Fi(0),!1)}function Nd(){if(F!==null){if(se===0)var t=F.return;else t=F,an=_s=null,md(t),la=null,Oi=0,t=F;for(;t!==null;)C0(t.alternate,t),t=t.return;F=null}}function ba(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,J_(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Nd(),ce=t,F=n=ln(t.current,null),ee=e,se=0,ut=null,Cn=!1,Ea=Hi(t,e),Ed=!1,pa=St=Ad=us=Xn=ye=0,et=gi=null,Wc=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var a=31-ht(s),i=1<<a;e|=t[a],s&=~i}return fn=e,Kl(),n}function Z0(t,e){P=null,Y.H=ml,e===Ki||e===Jl?(e=If(),se=3):e===$g?(e=If(),se=4):se=e===E0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ut=e,F===null&&(ye=1,yl(t,wt(e,t.current)))}function F0(){var t=Y.H;return Y.H=ml,t===null?ml:t}function W0(){var t=Y.A;return Y.A=R_,t}function su(){ye=4,Cn||(ee&4194048)!==ee&&At.current!==null||(Ea=!0),!(Xn&134217727)&&!(us&134217727)||ce===null||kn(ce,ee,St,!1)}function Jo(t,e,n){var s=ae;ae|=2;var a=F0(),i=W0();(ce!==t||ee!==e)&&(xl=null,ba(t,e)),e=!1;var r=ye;e:do try{if(se!==0&&F!==null){var l=F,o=ut;switch(se){case 8:Nd(),r=6;break e;case 3:case 2:case 9:case 6:At.current===null&&(e=!0);var u=se;if(se=0,ut=null,Ws(t,l,o,u),n&&Ea){r=0;break e}break;default:u=se,se=0,ut=null,Ws(t,l,o,u)}}D_(),r=ye;break}catch(d){Z0(t,d)}while(!0);return e&&t.shellSuspendCounter++,an=_s=null,ae=s,Y.H=a,Y.A=i,F===null&&(ce=null,ee=0,Kl()),r}function D_(){for(;F!==null;)ep(F)}function M_(t,e){var n=ae;ae|=2;var s=F0(),a=W0();ce!==t||ee!==e?(xl=null,_l=Ht()+500,ba(t,e)):Ea=Hi(t,e);e:do try{if(se!==0&&F!==null){e=F;var i=ut;t:switch(se){case 1:se=0,ut=null,Ws(t,e,i,1);break;case 2:case 9:if(Vf(i)){se=0,ut=null,ph(e);break}e=function(){se!==2&&se!==9||ce!==t||(se=7),Yt(t)},i.then(e,e);break e;case 3:se=7;break e;case 4:se=5;break e;case 7:Vf(i)?(se=0,ut=null,ph(e)):(se=0,ut=null,Ws(t,e,i,7));break;case 5:var r=null;switch(F.tag){case 26:r=F.memoizedState;case 5:case 27:var l=F;if(!r||vp(r)){se=0,ut=null;var o=l.sibling;if(o!==null)F=o;else{var u=l.return;u!==null?(F=u,to(u)):F=null}break t}}se=0,ut=null,Ws(t,e,i,5);break;case 6:se=0,ut=null,Ws(t,e,i,6);break;case 8:Nd(),ye=6;break e;default:throw Error(k(462))}}$_();break}catch(d){Z0(t,d)}while(!0);return an=_s=null,Y.H=s,Y.A=a,ae=n,F!==null?0:(ce=null,ee=0,Kl(),ye)}function $_(){for(;F!==null&&!sv();)ep(F)}function ep(t){var e=R0(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?to(t):F=e}function ph(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=ch(n,e,e.pendingProps,e.type,void 0,ee);break;case 11:e=ch(n,e,e.pendingProps,e.type.render,e.ref,ee);break;case 5:md(e);default:C0(n,e),e=F=Cg(e,fn),e=R0(n,e,fn)}t.memoizedProps=t.pendingProps,e===null?to(t):F=e}function Ws(t,e,n,s){an=_s=null,md(e),la=null,Oi=0;var a=e.return;try{if(j_(t,a,e,n,ee)){ye=1,yl(t,wt(n,t.current)),F=null;return}}catch(i){if(a!==null)throw F=a,i;ye=1,yl(t,wt(n,t.current)),F=null;return}e.flags&32768?(te||s===1?t=!0:Ea||ee&536870912?t=!1:(Cn=t=!0,(s===2||s===9||s===3||s===6)&&(s=At.current,s!==null&&s.tag===13&&(s.flags|=16384))),tp(e,t)):to(e)}function to(t){var e=t;do{if(e.flags&32768){tp(e,Cn);return}t=e.return;var n=A_(e.alternate,e,fn);if(n!==null){F=n;return}if(e=e.sibling,e!==null){F=e;return}F=e=t}while(e!==null);ye===0&&(ye=5)}function tp(t,e){do{var n=T_(t.alternate,t);if(n!==null){n.flags&=32767,F=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){F=t;return}F=t=n}while(t!==null);ye=6,F=null}function yh(t,e,n,s,a,i,r,l,o){t.cancelPendingCommit=null;do no();while(Be!==0);if(ae&6)throw Error(k(327));if(e!==null){if(e===t.current)throw Error(k(177));if(i=e.lanes|e.childLanes,i|=td,hv(t,n,i,r,l,o),t===ce&&(F=ce=null,ee=0),ya=e,qn=t,oa=n,eu=i,tu=a,K0=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,B_(al,function(){return rp(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=Y.T,Y.T=null,a=ne.p,ne.p=2,r=ae,ae|=4;try{N_(t,e,n)}finally{ae=r,ne.p=a,Y.T=s}}Be=1,np(),sp(),ap()}}function np(){if(Be===1){Be=0;var t=qn,e=ya,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Y.T,Y.T=null;var s=ne.p;ne.p=2;var a=ae;ae|=4;try{H0(e,t);var i=lu,r=Sg(t.containerInfo),l=i.focusedElem,o=i.selectionRange;if(r!==l&&l&&l.ownerDocument&&wg(l.ownerDocument.documentElement,l)){if(o!==null&&ed(l)){var u=o.start,d=o.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),_=l.textContent.length,w=Math.min(o.start,_),E=o.end===void 0?w:Math.min(o.end,_);!m.extend&&w>E&&(r=E,E=w,w=r);var b=zf(l,w),p=zf(l,E);if(b&&p&&(m.rangeCount!==1||m.anchorNode!==b.node||m.anchorOffset!==b.offset||m.focusNode!==p.node||m.focusOffset!==p.offset)){var g=f.createRange();g.setStart(b.node,b.offset),m.removeAllRanges(),w>E?(m.addRange(g),m.extend(p.node,p.offset)):(g.setEnd(p.node,p.offset),m.addRange(g))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var v=f[l];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}Ol=!!ru,lu=ru=null}finally{ae=a,ne.p=s,Y.T=n}}t.current=e,Be=2}}function sp(){if(Be===2){Be=0;var t=qn,e=ya,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Y.T,Y.T=null;var s=ne.p;ne.p=2;var a=ae;ae|=4;try{q0(t,e.alternate,e)}finally{ae=a,ne.p=s,Y.T=n}}Be=3}}function ap(){if(Be===4||Be===3){Be=0,av();var t=qn,e=ya,n=oa,s=K0;e.subtreeFlags&10256||e.flags&10256?Be=5:(Be=0,ya=qn=null,ip(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(Un=null),Iu(n),e=e.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Li,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=Y.T,a=ne.p,ne.p=2,Y.T=null;try{for(var i=t.onRecoverableError,r=0;r<s.length;r++){var l=s[r];i(l.value,{componentStack:l.stack})}}finally{Y.T=e,ne.p=a}}oa&3&&no(),Yt(t),a=t.pendingLanes,n&4194090&&a&42?t===nu?pi++:(pi=0,nu=t):pi=0,Fi(0)}}function ip(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ii(e)))}function no(t){return np(),sp(),ap(),rp()}function rp(){if(Be!==5)return!1;var t=qn,e=eu;eu=0;var n=Iu(oa),s=Y.T,a=ne.p;try{ne.p=32>n?32:n,Y.T=null,n=tu,tu=null;var i=qn,r=oa;if(Be=0,ya=qn=null,oa=0,ae&6)throw Error(k(331));var l=ae;if(ae|=4,V0(i.current),X0(i,i.current,r,n),ae=l,Fi(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Li,i)}catch{}return!0}finally{ne.p=a,Y.T=s,ip(t,e)}}function bh(t,e,n){e=wt(n,e),e=Pc(t.stateNode,e,2),t=$n(t,e,2),t!==null&&(Gi(t,2),Yt(t))}function le(t,e,n){if(t.tag===3)bh(t,t,n);else for(;e!==null;){if(e.tag===3){bh(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Un===null||!Un.has(s))){t=wt(n,t),n=S0(2),s=$n(e,n,2),s!==null&&(j0(n,s,e,t),Gi(s,2),Yt(s));break}}e=e.return}}function Zo(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new C_;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(Ed=!0,a.add(n),t=U_.bind(null,t,e,n),e.then(t,t))}function U_(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ce===t&&(ee&n)===n&&(ye===4||ye===3&&(ee&62914560)===ee&&300>Ht()-Td?!(ae&2)&&ba(t,0):Ad|=n,pa===ee&&(pa=0)),Yt(t)}function lp(t,e){e===0&&(e=ng()),t=ja(t,e),t!==null&&(Gi(t,e),Yt(t))}function q_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lp(t,n)}function z_(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(k(314))}s!==null&&s.delete(e),lp(t,n)}function B_(t,e){return Qu(t,e)}var wl=null,Us=null,au=!1,Sl=!1,Fo=!1,ds=0;function Yt(t){t!==Us&&t.next===null&&(Us===null?wl=Us=t:Us=Us.next=t),Sl=!0,au||(au=!0,H_())}function Fi(t,e){if(!Fo&&Sl){Fo=!0;do for(var n=!1,s=wl;s!==null;){if(t!==0){var a=s.pendingLanes;if(a===0)var i=0;else{var r=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-ht(42|t)+1)-1,i&=a&~(r&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,vh(s,i))}else i=ee,i=Yl(s,s===ce?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Hi(s,i)||(n=!0,vh(s,i));s=s.next}while(n);Fo=!1}}function L_(){op()}function op(){Sl=au=!1;var t=0;ds!==0&&(P_()&&(t=ds),ds=0);for(var e=Ht(),n=null,s=wl;s!==null;){var a=s.next,i=cp(s,e);i===0?(s.next=null,n===null?wl=a:n.next=a,a===null&&(Us=n)):(n=s,(t!==0||i&3)&&(Sl=!0)),s=a}Fi(t)}function cp(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var r=31-ht(i),l=1<<r,o=a[r];o===-1?(!(l&n)||l&s)&&(a[r]=fv(l,e)):o<=e&&(t.expiredLanes|=l),i&=~l}if(e=ce,n=ee,n=Yl(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(se===2||se===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&jo(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Hi(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&jo(s),Iu(n)){case 2:case 8:n=Wm;break;case 32:n=al;break;case 268435456:n=eg;break;default:n=al}return s=up.bind(null,t),n=Qu(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&jo(s),t.callbackPriority=2,t.callbackNode=null,2}function up(t,e){if(Be!==0&&Be!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(no()&&t.callbackNode!==n)return null;var s=ee;return s=Yl(t,t===ce?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(J0(t,s,e),cp(t,Ht()),t.callbackNode!=null&&t.callbackNode===n?up.bind(null,t):null)}function vh(t,e){if(no())return null;J0(t,e,!0)}function H_(){Z_(function(){ae&6?Qu(Fm,L_):op()})}function Od(){return ds===0&&(ds=tg()),ds}function _h(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Mr(""+t)}function xh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function G_(t,e,n,s,a){if(e==="submit"&&n&&n.stateNode===a){var i=_h((a[st]||null).action),r=s.submitter;r&&(e=(e=r[st]||null)?_h(e.formAction):r.getAttribute("formAction"),e!==null&&(i=e,r=null));var l=new Ql("action","action",null,s,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ds!==0){var o=r?xh(a,r):new FormData(a);Ic(n,{pending:!0,data:o,method:a.method,action:i},null,o)}}else typeof i=="function"&&(l.preventDefault(),o=r?xh(a,r):new FormData(a),Ic(n,{pending:!0,data:o,method:a.method,action:i},i,o))},currentTarget:a}]})}}for(var Wo=0;Wo<$c.length;Wo++){var ec=$c[Wo],X_=ec.toLowerCase(),Y_=ec[0].toUpperCase()+ec.slice(1);Dt(X_,"on"+Y_)}Dt(Eg,"onAnimationEnd");Dt(Ag,"onAnimationIteration");Dt(Tg,"onAnimationStart");Dt("dblclick","onDoubleClick");Dt("focusin","onFocus");Dt("focusout","onBlur");Dt(l_,"onTransitionRun");Dt(o_,"onTransitionStart");Dt(c_,"onTransitionCancel");Dt(Ng,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ri));function dp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var r=s.length-1;0<=r;r--){var l=s[r],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(d){pl(d)}a.currentTarget=null,i=o}else for(r=0;r<s.length;r++){if(l=s[r],o=l.instance,u=l.currentTarget,l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(d){pl(d)}a.currentTarget=null,i=o}}}}function Z(t,e){var n=e[Nc];n===void 0&&(n=e[Nc]=new Set);var s=t+"__bubble";n.has(s)||(fp(e,t,2,!1),n.add(s))}function tc(t,e,n){var s=0;e&&(s|=4),fp(n,t,s,e)}var vr="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[vr]){t[vr]=!0,rg.forEach(function(n){n!=="selectionchange"&&(Q_.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vr]||(e[vr]=!0,tc("selectionchange",!1,e))}}function fp(t,e,n,s){switch(jp(e)){case 2:var a=bx;break;case 8:a=vx;break;default:a=Md}n=a.bind(null,e,n,t),a=void 0,!kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function nc(t,e,n,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var l=s.stateNode.containerInfo;if(l===a)break;if(r===4)for(r=s.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;l!==null;){if(r=Ys(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){s=i=r;continue e}l=l.parentNode}}s=s.return}mg(function(){var u=i,d=Ju(n),f=[];e:{var h=Og.get(t);if(h!==void 0){var m=Ql,_=t;switch(t){case"keypress":if(Ur(n)===0)break e;case"keydown":case"keyup":m=Bv;break;case"focusin":_="focus",m=ko;break;case"focusout":_="blur",m=ko;break;case"beforeblur":case"afterblur":m=ko;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Tv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gv;break;case Eg:case Ag:case Tg:m=Rv;break;case Ng:m=Yv;break;case"scroll":case"scrollend":m=Ev;break;case"wheel":m=Vv;break;case"copy":case"cut":case"paste":m=kv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Rf;break;case"toggle":case"beforetoggle":m=Kv}var w=(e&4)!==0,E=!w&&(t==="scroll"||t==="scrollend"),b=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,g;p!==null;){var v=p;if(g=v.stateNode,v=v.tag,v!==5&&v!==26&&v!==27||g===null||b===null||(v=ji(p,b),v!=null&&w.push(Ci(p,v,g))),E)break;p=p.return}0<w.length&&(h=new m(h,_,null,n,d),f.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Cc&&(_=n.relatedTarget||n.fromElement)&&(Ys(_)||_[wa]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Ys(_):null,_!==null&&(E=Bi(_),w=_.tag,_!==E||w!==5&&w!==27&&w!==6)&&(_=null)):(m=null,_=u),m!==_)){if(w=Nf,v="onMouseLeave",b="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=Rf,v="onPointerLeave",b="onPointerEnter",p="pointer"),E=m==null?h:Qa(m),g=_==null?h:Qa(_),h=new w(v,p+"leave",m,n,d),h.target=E,h.relatedTarget=g,v=null,Ys(d)===u&&(w=new w(b,p+"enter",_,n,d),w.target=g,w.relatedTarget=E,v=w),E=v,m&&_)t:{for(w=m,b=_,p=0,g=w;g;g=js(g))p++;for(g=0,v=b;v;v=js(v))g++;for(;0<p-g;)w=js(w),p--;for(;0<g-p;)b=js(b),g--;for(;p--;){if(w===b||b!==null&&w===b.alternate)break t;w=js(w),b=js(b)}w=null}else w=null;m!==null&&wh(f,h,m,w,!1),_!==null&&E!==null&&wh(f,E,_,w,!0)}}e:{if(h=u?Qa(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var A=Mf;else if(Df(h))if(_g)A=a_;else{A=n_;var O=t_}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&Pu(u.elementType)&&(A=Mf):A=s_;if(A&&(A=A(t,u))){vg(f,A,n,d);break e}O&&O(t,h,u),t==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&Rc(h,"number",h.value)}switch(O=u?Qa(u):window,t){case"focusin":(Df(O)||O.contentEditable==="true")&&(Is=O,Dc=u,ri=null);break;case"focusout":ri=Dc=Is=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Bf(f,n,d);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":Bf(f,n,d)}var y;if(Wu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Vs?yg(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(pg&&n.locale!=="ko"&&(Vs||N!=="onCompositionStart"?N==="onCompositionEnd"&&Vs&&(y=gg()):(Rn=d,Zu="value"in Rn?Rn.value:Rn.textContent,Vs=!0)),O=jl(u,N),0<O.length&&(N=new Of(N,t,null,n,d),f.push({event:N,listeners:O}),y?N.data=y:(y=bg(n),y!==null&&(N.data=y)))),(y=Jv?Zv(t,n):Fv(t,n))&&(N=jl(u,"onBeforeInput"),0<N.length&&(O=new Of("onBeforeInput","beforeinput",null,n,d),f.push({event:O,listeners:N}),O.data=y)),G_(f,t,u,n,d)}dp(f,e)})}function Ci(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jl(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=ji(t,n),a!=null&&s.unshift(Ci(t,a,i)),a=ji(t,e),a!=null&&s.push(Ci(t,a,i))),t.tag===3)return s;t=t.return}return[]}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wh(t,e,n,s,a){for(var i=e._reactName,r=[];n!==null&&n!==s;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===s)break;l!==5&&l!==26&&l!==27||u===null||(o=u,a?(u=ji(n,i),u!=null&&r.unshift(Ci(n,u,o))):a||(u=ji(n,i),u!=null&&r.push(Ci(n,u,o)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var V_=/\r\n?/g,I_=/\u0000|\uFFFD/g;function Sh(t){return(typeof t=="string"?t:""+t).replace(V_,`
`).replace(I_,"")}function hp(t,e){return e=Sh(e),Sh(t)===e}function so(){}function ie(t,e,n,s,a,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||da(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&da(t,""+s);break;case"className":fr(t,"class",s);break;case"tabIndex":fr(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(t,n,s);break;case"style":hg(t,s,i);break;case"data":if(e!=="object"){fr(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Mr(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&ie(t,e,"name",a.name,a,null),ie(t,e,"formEncType",a.formEncType,a,null),ie(t,e,"formMethod",a.formMethod,a,null),ie(t,e,"formTarget",a.formTarget,a,null)):(ie(t,e,"encType",a.encType,a,null),ie(t,e,"method",a.method,a,null),ie(t,e,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Mr(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=so);break;case"onScroll":s!=null&&Z("scroll",t);break;case"onScrollEnd":s!=null&&Z("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Mr(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Z("beforetoggle",t),Z("toggle",t),Dr(t,"popover",s);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Dr(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Sv.get(n)||n,Dr(t,n,s))}}function iu(t,e,n,s,a,i){switch(n){case"style":hg(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"children":typeof s=="string"?da(t,s):(typeof s=="number"||typeof s=="bigint")&&da(t,""+s);break;case"onScroll":s!=null&&Z("scroll",t);break;case"onScrollEnd":s!=null&&Z("scrollend",t);break;case"onClick":s!=null&&(t.onclick=so);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lg.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),i=t[st]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,a),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,a);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Dr(t,n,s)}}}function He(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Z("error",t),Z("load",t);var s=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var r=n[i];if(r!=null)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:ie(t,e,i,r,n,null)}}a&&ie(t,e,"srcSet",n.srcSet,n,null),s&&ie(t,e,"src",n.src,n,null);return;case"input":Z("invalid",t);var l=i=r=a=null,o=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":a=d;break;case"type":r=d;break;case"checked":o=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(k(137,e));break;default:ie(t,e,s,d,n,null)}}ug(t,i,l,o,u,r,a,!1),il(t);return;case"select":Z("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"multiple":s=l;default:ie(t,e,a,l,n,null)}e=i,n=r,t.multiple=!!s,e!=null?na(t,!!s,e,!1):n!=null&&na(t,!!s,n,!0);return;case"textarea":Z("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(k(91));break;default:ie(t,e,r,l,n,null)}fg(t,s,a,i),il(t);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(s=n[o],s!=null))switch(o){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ie(t,e,o,s,n,null)}return;case"dialog":Z("beforetoggle",t),Z("toggle",t),Z("cancel",t),Z("close",t);break;case"iframe":case"object":Z("load",t);break;case"video":case"audio":for(s=0;s<Ri.length;s++)Z(Ri[s],t);break;case"image":Z("error",t),Z("load",t);break;case"details":Z("toggle",t);break;case"embed":case"source":case"link":Z("error",t),Z("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:ie(t,e,u,s,n,null)}return;default:if(Pu(e)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&iu(t,e,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&ie(t,e,l,s,n,null))}function K_(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,r=null,l=null,o=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:s.hasOwnProperty(m)||ie(t,e,m,null,s,f)}}for(var h in s){var m=s[h];if(f=n[h],s.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":i=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(k(137,e));break;default:m!==f&&ie(t,e,h,m,s,f)}}Oc(t,r,l,o,u,d,i,a);return;case"select":m=r=l=h=null;for(i in n)if(o=n[i],n.hasOwnProperty(i)&&o!=null)switch(i){case"value":break;case"multiple":m=o;default:s.hasOwnProperty(i)||ie(t,e,i,null,s,o)}for(a in s)if(i=s[a],o=n[a],s.hasOwnProperty(a)&&(i!=null||o!=null))switch(a){case"value":h=i;break;case"defaultValue":l=i;break;case"multiple":r=i;default:i!==o&&ie(t,e,a,i,s,o)}e=l,n=r,s=m,h!=null?na(t,!!n,h,!1):!!s!=!!n&&(e!=null?na(t,!!n,e,!0):na(t,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ie(t,e,l,null,s,a)}for(r in s)if(a=s[r],i=n[r],s.hasOwnProperty(r)&&(a!=null||i!=null))switch(r){case"value":h=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(k(91));break;default:a!==i&&ie(t,e,r,a,s,i)}dg(t,h,m);return;case"option":for(var _ in n)if(h=n[_],n.hasOwnProperty(_)&&h!=null&&!s.hasOwnProperty(_))switch(_){case"selected":t.selected=!1;break;default:ie(t,e,_,null,s,h)}for(o in s)if(h=s[o],m=n[o],s.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ie(t,e,o,h,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!=null&&!s.hasOwnProperty(w)&&ie(t,e,w,null,s,h);for(u in s)if(h=s[u],m=n[u],s.hasOwnProperty(u)&&h!==m&&(h!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(k(137,e));break;default:ie(t,e,u,h,s,m)}return;default:if(Pu(e)){for(var E in n)h=n[E],n.hasOwnProperty(E)&&h!==void 0&&!s.hasOwnProperty(E)&&iu(t,e,E,void 0,s,h);for(d in s)h=s[d],m=n[d],!s.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||iu(t,e,d,h,s,m);return}}for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!s.hasOwnProperty(b)&&ie(t,e,b,null,s,h);for(f in s)h=s[f],m=n[f],!s.hasOwnProperty(f)||h===m||h==null&&m==null||ie(t,e,f,h,s,m)}var ru=null,lu=null;function El(t){return t.nodeType===9?t:t.ownerDocument}function jh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mp(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function ou(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sc=null;function P_(){var t=window.event;return t&&t.type==="popstate"?t===sc?!1:(sc=t,!0):(sc=null,!1)}var gp=typeof setTimeout=="function"?setTimeout:void 0,J_=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,Z_=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(t){return Eh.resolve(null).then(t).catch(F_)}:gp;function F_(t){setTimeout(function(){throw t})}function Qn(t){return t==="head"}function Ah(t,e){var n=e,s=0,a=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<s&&8>s){n=s;var r=t.ownerDocument;if(n&1&&yi(r.documentElement),n&2&&yi(r.body),n&4)for(n=r.head,yi(n),r=n.firstChild;r;){var l=r.nextSibling,o=r.nodeName;r[Xi]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=l}}if(a===0){t.removeChild(i),Ui(e);return}a--}else n==="$"||n==="$?"||n==="$!"?a++:s=n.charCodeAt(0)-48;else s=0;n=i}while(n);Ui(e)}function cu(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":cu(n),Ku(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function W_(t,e,n,s){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Xi])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=kt(t.nextSibling),t===null)break}return null}function ex(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=kt(t.nextSibling),t===null))return null;return t}function uu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function tx(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function kt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var du=null;function Th(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function pp(t,e,n){switch(e=El(n),t){case"html":if(t=e.documentElement,!t)throw Error(k(452));return t;case"head":if(t=e.head,!t)throw Error(k(453));return t;case"body":if(t=e.body,!t)throw Error(k(454));return t;default:throw Error(k(451))}}function yi(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ku(t)}var Tt=new Map,Nh=new Set;function Al(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hn=ne.d;ne.d={f:nx,r:sx,D:ax,C:ix,L:rx,m:lx,X:cx,S:ox,M:ux};function nx(){var t=hn.f(),e=eo();return t||e}function sx(t){var e=Sa(t);e!==null&&e.tag===5&&e.type==="form"?c0(e):hn.r(t)}var Aa=typeof document>"u"?null:document;function yp(t,e,n){var s=Aa;if(s&&typeof e=="string"&&e){var a=xt(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Nh.has(a)||(Nh.add(a),t={rel:t,crossOrigin:n,href:e},s.querySelector(a)===null&&(e=s.createElement("link"),He(e,"link",t),De(e),s.head.appendChild(e)))}}function ax(t){hn.D(t),yp("dns-prefetch",t,null)}function ix(t,e){hn.C(t,e),yp("preconnect",t,e)}function rx(t,e,n){hn.L(t,e,n);var s=Aa;if(s&&t&&e){var a='link[rel="preload"][as="'+xt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+xt(n.imageSizes)+'"]')):a+='[href="'+xt(t)+'"]';var i=a;switch(e){case"style":i=va(t);break;case"script":i=Ta(t)}Tt.has(i)||(t=ue({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Tt.set(i,t),s.querySelector(a)!==null||e==="style"&&s.querySelector(Wi(i))||e==="script"&&s.querySelector(er(i))||(e=s.createElement("link"),He(e,"link",t),De(e),s.head.appendChild(e)))}}function lx(t,e){hn.m(t,e);var n=Aa;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+xt(s)+'"][href="'+xt(t)+'"]',i=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ta(t)}if(!Tt.has(i)&&(t=ue({rel:"modulepreload",href:t},e),Tt.set(i,t),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(er(i)))return}s=n.createElement("link"),He(s,"link",t),De(s),n.head.appendChild(s)}}}function ox(t,e,n){hn.S(t,e,n);var s=Aa;if(s&&t){var a=ta(s).hoistableStyles,i=va(t);e=e||"default";var r=a.get(i);if(!r){var l={loading:0,preload:null};if(r=s.querySelector(Wi(i)))l.loading=5;else{t=ue({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Tt.get(i))&&Cd(t,n);var o=r=s.createElement("link");De(o),He(o,"link",t),o._p=new Promise(function(u,d){o.onload=u,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Xr(r,e,s)}r={type:"stylesheet",instance:r,count:1,state:l},a.set(i,r)}}}function cx(t,e){hn.X(t,e);var n=Aa;if(n&&t){var s=ta(n).hoistableScripts,a=Ta(t),i=s.get(a);i||(i=n.querySelector(er(a)),i||(t=ue({src:t,async:!0},e),(e=Tt.get(a))&&kd(t,e),i=n.createElement("script"),De(i),He(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function ux(t,e){hn.M(t,e);var n=Aa;if(n&&t){var s=ta(n).hoistableScripts,a=Ta(t),i=s.get(a);i||(i=n.querySelector(er(a)),i||(t=ue({src:t,async:!0,type:"module"},e),(e=Tt.get(a))&&kd(t,e),i=n.createElement("script"),De(i),He(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function Oh(t,e,n,s){var a=(a=Dn.current)?Al(a):null;if(!a)throw Error(k(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=va(n.href),n=ta(a).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=va(n.href);var i=ta(a).hoistableStyles,r=i.get(t);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,r),(i=a.querySelector(Wi(t)))&&!i._p&&(r.instance=i,r.state.loading=5),Tt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Tt.set(t,n),i||dx(a,t,n,r.state))),e&&s===null)throw Error(k(528,""));return r}if(e&&s!==null)throw Error(k(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ta(n),n=ta(a).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,t))}}function va(t){return'href="'+xt(t)+'"'}function Wi(t){return'link[rel="stylesheet"]['+t+"]"}function bp(t){return ue({},t,{"data-precedence":t.precedence,precedence:null})}function dx(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),He(e,"link",n),De(e),t.head.appendChild(e))}function Ta(t){return'[src="'+xt(t)+'"]'}function er(t){return"script[async]"+t}function Rh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+xt(n.href)+'"]');if(s)return e.instance=s,De(s),s;var a=ue({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),De(s),He(s,"style",a),Xr(s,n.precedence,t),e.instance=s;case"stylesheet":a=va(n.href);var i=t.querySelector(Wi(a));if(i)return e.state.loading|=4,e.instance=i,De(i),i;s=bp(n),(a=Tt.get(a))&&Cd(s,a),i=(t.ownerDocument||t).createElement("link"),De(i);var r=i;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),He(i,"link",s),e.state.loading|=4,Xr(i,n.precedence,t),e.instance=i;case"script":return i=Ta(n.src),(a=t.querySelector(er(i)))?(e.instance=a,De(a),a):(s=n,(a=Tt.get(i))&&(s=ue({},n),kd(s,a)),t=t.ownerDocument||t,a=t.createElement("script"),De(a),He(a,"link",s),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(k(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Xr(s,n.precedence,t));return e.instance}function Xr(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,i=a,r=0;r<s.length;r++){var l=s[r];if(l.dataset.precedence===e)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Cd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function kd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Yr=null;function Ch(t,e,n){if(Yr===null){var s=new Map,a=Yr=new Map;a.set(n,s)}else a=Yr,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var i=n[a];if(!(i[Xi]||i[Ye]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(e)||"";r=t+r;var l=s.get(r);l?l.push(i):s.set(r,[i])}}return s}function kh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function fx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function vp(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var ki=null;function hx(){}function mx(t,e,n){if(ki===null)throw Error(k(475));var s=ki;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var a=va(n.href),i=t.querySelector(Wi(a));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Tl.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=i,De(i);return}i=t.ownerDocument||t,n=bp(n),(a=Tt.get(a))&&Cd(n,a),i=i.createElement("link"),De(i);var r=i;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),He(i,"link",n),e.instance=i}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(s.count++,e=Tl.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function gx(){if(ki===null)throw Error(k(475));var t=ki;return t.stylesheets&&t.count===0&&fu(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&fu(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Tl(){if(this.count--,this.count===0){if(this.stylesheets)fu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nl=null;function fu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nl=new Map,e.forEach(px,t),Nl=null,Tl.call(t))}function px(t,e){if(!(e.state.loading&4)){var n=Nl.get(t);if(n)var s=n.get(null);else{n=new Map,Nl.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var r=a[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),s=r)}s&&n.set(null,s)}a=e.instance,r=a.getAttribute("data-precedence"),i=n.get(r)||s,i===s&&n.set(null,a),n.set(r,a),this.count++,s=Tl.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),i?i.parentNode.insertBefore(a,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var Di={$$typeof:tn,Provider:null,Consumer:null,_currentValue:is,_currentValue2:is,_threadCount:0};function yx(t,e,n,s,a,i,r,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.hiddenUpdates=Eo(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function _p(t,e,n,s,a,i,r,l,o,u,d,f){return t=new yx(t,e,n,r,l,o,u,f),e=1,i===!0&&(e|=24),i=dt(3,null,null,e),t.current=i,i.stateNode=t,e=rd(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},od(i),t}function xp(t){return t?(t=Js,t):Js}function wp(t,e,n,s,a,i){a=xp(a),s.context===null?s.context=a:s.pendingContext=a,s=Mn(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=$n(t,s,e),n!==null&&(gt(n,t,e),ci(n,t,e))}function Dh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dd(t,e){Dh(t,e),(t=t.alternate)&&Dh(t,e)}function Sp(t){if(t.tag===13){var e=ja(t,67108864);e!==null&&gt(e,t,67108864),Dd(t,67108864)}}var Ol=!0;function bx(t,e,n,s){var a=Y.T;Y.T=null;var i=ne.p;try{ne.p=2,Md(t,e,n,s)}finally{ne.p=i,Y.T=a}}function vx(t,e,n,s){var a=Y.T;Y.T=null;var i=ne.p;try{ne.p=8,Md(t,e,n,s)}finally{ne.p=i,Y.T=a}}function Md(t,e,n,s){if(Ol){var a=hu(s);if(a===null)nc(t,e,s,Rl,n),Mh(t,s);else if(xx(a,t,e,n,s))s.stopPropagation();else if(Mh(t,s),e&4&&-1<_x.indexOf(t)){for(;a!==null;){var i=Sa(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=Jn(i.pendingLanes);if(r!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-ht(r);l.entanglements[1]|=o,r&=~o}Yt(i),!(ae&6)&&(_l=Ht()+500,Fi(0))}}break;case 13:l=ja(i,2),l!==null&&gt(l,i,2),eo(),Dd(i,2)}if(i=hu(s),i===null&&nc(t,e,s,Rl,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else nc(t,e,s,null,n)}}function hu(t){return t=Ju(t),$d(t)}var Rl=null;function $d(t){if(Rl=null,t=Ys(t),t!==null){var e=Bi(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Km(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Rl=t,null}function jp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(iv()){case Fm:return 2;case Wm:return 8;case al:case rv:return 32;case eg:return 268435456;default:return 32}default:return 32}}var mu=!1,zn=null,Bn=null,Ln=null,Mi=new Map,$i=new Map,Tn=[],_x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(t,e){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$i.delete(e.pointerId)}}function La(t,e,n,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Sa(e),e!==null&&Sp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function xx(t,e,n,s,a){switch(e){case"focusin":return zn=La(zn,t,e,n,s,a),!0;case"dragenter":return Bn=La(Bn,t,e,n,s,a),!0;case"mouseover":return Ln=La(Ln,t,e,n,s,a),!0;case"pointerover":var i=a.pointerId;return Mi.set(i,La(Mi.get(i)||null,t,e,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,$i.set(i,La($i.get(i)||null,t,e,n,s,a)),!0}return!1}function Ep(t){var e=Ys(t.target);if(e!==null){var n=Bi(e);if(n!==null){if(e=n.tag,e===13){if(e=Km(n),e!==null){t.blockedOn=e,mv(t.priority,function(){if(n.tag===13){var s=mt();s=Vu(s);var a=ja(n,s);a!==null&&gt(a,n,s),Dd(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hu(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Cc=s,n.target.dispatchEvent(s),Cc=null}else return e=Sa(n),e!==null&&Sp(e),t.blockedOn=n,!1;e.shift()}return!0}function $h(t,e,n){Qr(t)&&n.delete(e)}function wx(){mu=!1,zn!==null&&Qr(zn)&&(zn=null),Bn!==null&&Qr(Bn)&&(Bn=null),Ln!==null&&Qr(Ln)&&(Ln=null),Mi.forEach($h),$i.forEach($h)}function _r(t,e){t.blockedOn===e&&(t.blockedOn=null,mu||(mu=!0,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,wx)))}var xr=null;function Uh(t){xr!==t&&(xr=t,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,function(){xr===t&&(xr=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],a=t[e+2];if(typeof s!="function"){if($d(s||n)===null)continue;break}var i=Sa(n);i!==null&&(t.splice(e,3),e-=3,Ic(i,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function Ui(t){function e(o){return _r(o,t)}zn!==null&&_r(zn,t),Bn!==null&&_r(Bn,t),Ln!==null&&_r(Ln,t),Mi.forEach(e),$i.forEach(e);for(var n=0;n<Tn.length;n++){var s=Tn[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Ep(n),n.blockedOn===null&&Tn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],i=n[s+1],r=a[st]||null;if(typeof i=="function")r||Uh(n);else if(r){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,r=i[st]||null)l=r.formAction;else if($d(a)!==null)continue}else l=r.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),Uh(n)}}}function Ud(t){this._internalRoot=t}ao.prototype.render=Ud.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));var n=e.current,s=mt();wp(n,s,t,e,null,null)};ao.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wp(t.current,2,null,t,null,null),eo(),e[wa]=null}};function ao(t){this._internalRoot=t}ao.prototype.unstable_scheduleHydration=function(t){if(t){var e=ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tn.length&&e!==0&&e<Tn[n].priority;n++);Tn.splice(n,0,t),n===0&&Ep(t)}};var qh=Vm.version;if(qh!=="19.1.1")throw Error(k(527,qh,"19.1.1"));ne.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=Fb(e),t=t!==null?Pm(t):null,t=t===null?null:t.stateNode,t};var Sx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wr.isDisabled&&wr.supportsFiber)try{Li=wr.inject(Sx),ft=wr}catch{}}Gl.createRoot=function(t,e){if(!Im(t))throw Error(k(299));var n=!1,s="",a=_0,i=x0,r=w0,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=_p(t,1,!1,null,null,n,s,a,i,r,l,null),t[wa]=e.current,Rd(t),new Ud(e)};Gl.hydrateRoot=function(t,e,n){if(!Im(t))throw Error(k(299));var s=!1,a="",i=_0,r=x0,l=w0,o=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(o=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),e=_p(t,1,!0,e,n??null,s,a,i,r,l,o,u),e.context=xp(null),n=e.current,s=mt(),s=Vu(s),a=Mn(s),a.callback=null,$n(n,a,s),n=s,e.current.lanes=n,Gi(e,n),Yt(e),t[wa]=e.current,Rd(t),new ao(e)};Gl.version="19.1.1";function Ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ap)}catch(t){console.error(t)}}Ap(),Lm.exports=Gl;var jx=Lm.exports;const Ex=Rm(jx),Ax="modulepreload",Tx=function(t){return"/"+t},zh={},tr=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));a=Promise.allSettled(n.map(o=>{if(o=Tx(o),o in zh)return;zh[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Ax,u||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Nx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tr(async()=>{const{default:s}=await Promise.resolve().then(()=>Na);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class qd extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class Ox extends qd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bh extends qd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Lh extends qd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gu||(gu={}));var Rx=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};class Cx{constructor(e,{headers:n={},customFetch:s,region:a=gu.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=Nx(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return Rx(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:r}=n;let l={},{region:o}=n;o||(o=this.region);const u=new URL(`${this.url}/${e}`);o&&o!=="any"&&(l["x-region"]=o,u.searchParams.set("forceFunctionRegion",o));let d;r&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&r instanceof Blob||r instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=r):typeof r=="string"?(l["Content-Type"]="text/plain",d=r):typeof FormData<"u"&&r instanceof FormData?d=r:(l["Content-Type"]="application/json",d=JSON.stringify(r)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(w=>{throw new Ox(w)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Bh(f);if(!f.ok)throw new Lh(f);let m=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield f.json():m==="application/octet-stream"?_=yield f.blob():m==="text/event-stream"?_=f:m==="multipart/form-data"?_=yield f.formData():_=yield f.text(),{data:_,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Lh||a instanceof Bh?a.context:void 0}}})}}var nt={},zd={},io={},nr={},ro={},lo={},kx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_a=kx();const Dx=_a.fetch,Tp=_a.fetch.bind(_a),Np=_a.Headers,Mx=_a.Request,$x=_a.Response,Na=Object.freeze(Object.defineProperty({__proto__:null,Headers:Np,Request:Mx,Response:$x,default:Tp,fetch:Dx},Symbol.toStringTag,{value:"Module"})),Ux=Tb(Na);var oo={};Object.defineProperty(oo,"__esModule",{value:!0});let qx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};oo.default=qx;var Op=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});const zx=Op(Ux),Bx=Op(oo);let Lx=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=zx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var r,l,o;let u=null,d=null,f=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const w=(r=this.headers.Prefer)===null||r===void 0?void 0:r.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&E&&E.length>1&&(f=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,m="OK")}catch{i.status===404&&w===""?(h=204,m="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((o=u==null?void 0:u.details)===null||o===void 0)&&o.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new Bx.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var r,l,o;return{error:{message:`${(r=i==null?void 0:i.name)!==null&&r!==void 0?r:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}};lo.default=Lx;var Hx=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ro,"__esModule",{value:!0});const Gx=Hx(lo);let Xx=class extends Gx.default{select(e){let n=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const r=i?`${i}.order`:"order",l=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,r=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(r,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:r="text"}={}){var l;const o=[e?"analyze":null,n?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${u}"; options=${o};`,r==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ro.default=Xx;var Yx=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});const Qx=Yx(ro);let Vx=class extends Qx.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const r=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${r}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};nr.default=Vx;var Ix=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});const Ha=Ix(nr);let Kx=class{constructor(e,{headers:n={},schema:s,fetch:a}){this.url=e,this.headers=n,this.schema=s,this.fetch=a}select(e,{head:n=!1,count:s}={}){const a=n?"HEAD":"GET";let i=!1;const r=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",r),s&&(this.headers.Prefer=`count=${s}`),new Ha.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const r=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(r.length>0){const l=[...new Set(r)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ha.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const r="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const o=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ha.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Ha.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ha.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};io.default=Kx;var co={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.version=void 0;uo.version="0.0.0-automated";Object.defineProperty(co,"__esModule",{value:!0});co.DEFAULT_HEADERS=void 0;const Px=uo;co.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Px.version}`};var Rp=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zd,"__esModule",{value:!0});const Jx=Rp(io),Zx=Rp(nr),Fx=co;let Wx=class Cp{constructor(e,{headers:n={},schema:s,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Fx.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Jx.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:a=!1,count:i}={}){let r;const l=new URL(`${this.url}/rpc/${e}`);let o;s||a?(r=s?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(r="POST",o=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Zx.default({method:r,url:l,headers:u,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};zd.default=Wx;var Oa=Et&&Et.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nt,"__esModule",{value:!0});nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const kp=Oa(zd);nt.PostgrestClient=kp.default;const Dp=Oa(io);nt.PostgrestQueryBuilder=Dp.default;const Mp=Oa(nr);nt.PostgrestFilterBuilder=Mp.default;const $p=Oa(ro);nt.PostgrestTransformBuilder=$p.default;const Up=Oa(lo);nt.PostgrestBuilder=Up.default;const qp=Oa(oo);nt.PostgrestError=qp.default;var ew=nt.default={PostgrestClient:kp.default,PostgrestQueryBuilder:Dp.default,PostgrestFilterBuilder:Mp.default,PostgrestTransformBuilder:$p.default,PostgrestBuilder:Up.default,PostgrestError:qp.default};const{PostgrestClient:tw,PostgrestQueryBuilder:cj,PostgrestFilterBuilder:uj,PostgrestTransformBuilder:dj,PostgrestBuilder:fj,PostgrestError:hj}=ew;function nw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sw=nw(),aw="2.11.15",iw=`realtime-js/${aw}`,rw="1.0.0",zp=1e4,lw=1e3;var bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bi||(bi={}));var Xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xe||(Xe={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var pu;(function(t){t.websocket="websocket"})(pu||(pu={}));var ts;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ts||(ts={}));class ow{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),i=n.getUint8(2);let r=this.HEADER_LENGTH+2;const l=s.decode(e.slice(r,r+a));r=r+a;const o=s.decode(e.slice(r,r+i));r=r+i;const u=JSON.parse(s.decode(e.slice(r,e.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class Bp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const Hh=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,r)=>(i[r]=cw(r,t,e,a),i),{})},cw=(t,e,n,s)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,r=n[t];return i&&!s.includes(i)?Lp(i,r):yu(r)},Lp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return hw(e,n)}switch(t){case oe.bool:return uw(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return dw(e);case oe.json:case oe.jsonb:return fw(e);case oe.timestamp:return mw(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return yu(e);default:return yu(e)}},yu=t=>t,uw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},dw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},fw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let i;const r=t.slice(1,n);try{i=JSON.parse("["+r+"]")}catch{i=r?r.split(","):[]}return i.map(l=>Lp(e,l))}return t},mw=t=>typeof t=="string"?t.replace(" ","T"):t,Hp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ac{constructor(e,n,s={},a=zp){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gh||(Gh={}));class vi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:r,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vi.syncState(this.state,a,i,r),this.pendingDiffs.forEach(o=>{this.state=vi.syncDiff(this.state,o,i,r)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:r,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=vi.syncDiff(this.state,a,i,r),l())}),this.onJoin((a,i,r)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:r})}),this.onLeave((a,i,r)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const i=this.cloneDeep(e),r=this.transformState(n),l={},o={};return this.map(i,(u,d)=>{r[u]||(o[u]=d)}),this.map(r,(u,d)=>{const f=i[u];if(f){const h=d.map(E=>E.presence_ref),m=f.map(E=>E.presence_ref),_=d.filter(E=>m.indexOf(E.presence_ref)<0),w=f.filter(E=>h.indexOf(E.presence_ref)<0);_.length>0&&(l[u]=_),w.length>0&&(o[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:o},s,a)}static syncDiff(e,n,s,a){const{joins:i,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,o)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(o),d.length>0){const f=e[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);e[l].unshift(...h)}s(l,d,o)}),this.map(r,(l,o)=>{let u=e[l];if(!u)return;const d=o.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,a(l,u,o),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xh||(Xh={}));var Yh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yh||(Yh={}));var Ft;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ft||(Ft={}));class Bd{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ac(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new Bp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new vi(this),this.broadcastEndpointURL=Hp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:i,presence:r,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Ft.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ft.CLOSED));const o={},u={broadcast:i,presence:r,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},o)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(Ft.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,_=[];for(let w=0;w<m;w++){const E=h[w],{filter:{event:b,schema:p,table:g,filter:v}}=E,A=d&&d[w];if(A&&A.event===b&&A.schema===p&&A.table===g&&A.filter===v)_.push(Object.assign(Object.assign({},E),{id:A.id}));else{this.unsubscribe(),this.state=Xe.errored,e==null||e(Ft.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(Ft.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xe.errored,e==null||e(Ft.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ft.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:r}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:r,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var r,l,o;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(r=this.params)===null||r===void 0?void 0:r.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new ac(this,Ct.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),r}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ac(this,e,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,i;const r=e.toLocaleLowerCase(),{close:l,error:o,leave:u,join:d}=Ct;if(s&&[l,o,u,d].indexOf(r)>=0&&s!==this._joinRef())return;let h=this._onMessage(r,n,s);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var _,w,E;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(w=m.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===r}).map(m=>m.callback(h,s)):(i=this.bindings[r])===null||i===void 0||i.filter(m=>{var _,w,E,b,p,g;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const v=m.id,A=(_=m.filter)===null||_===void 0?void 0:_.event;return v&&((w=n.ids)===null||w===void 0?void 0:w.includes(v))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const v=(p=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return v==="*"||v===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const _=h.data,{schema:w,table:E,commit_timestamp:b,type:p,errors:g}=_;h=Object.assign(Object.assign({},{schema:w,table:E,commit_timestamp:b,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(_))}m.callback(h,s)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),i={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Bd.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Hh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Hh(e.columns,e.old_record)),n}}const Qh=()=>{},gw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pw{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zp,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qh,this.ref=0,this.logger=Qh,this.conn=null,this.sendBuffer=[],this.serializer=new ow,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...l)=>tr(async()=>{const{default:o}=await Promise.resolve().then(()=>Na);return{default:o}},void 0).then(({default:o})=>o(...l)):r=fetch,(...l)=>r(...l)},this.endPoint=`${e}/${pu.websocket}`,this.httpEndpoint=Hp(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,r)=>r(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Bp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=sw),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rw}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case bi.connecting:return ts.Connecting;case bi.open:return ts.Open;case bi.closing:return ts.Closing;default:return ts.Closed}}isConnected(){return this.connectionState()===ts.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Bd(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:s,payload:a,ref:i}=e,r=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${s} (${i})`,a),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:iw};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Ct.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(lw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:a,payload:i,ref:r}=n;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${r&&"("+r+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,r)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([gw],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class Ld extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ce(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class yw extends Ld{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bu extends Ld{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var bw=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};const Gp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tr(async()=>{const{default:s}=await Promise.resolve().then(()=>Na);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},vw=()=>bw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield tr(()=>Promise.resolve().then(()=>Na),void 0)).Response:Response}),vu=t=>{if(Array.isArray(t))return t.map(n=>vu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=vu(s)}),e},_w=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var xs=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};const ic=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xw=(t,e,n)=>xs(void 0,void 0,void 0,function*(){const s=yield vw();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{const i=t.status||500,r=(a==null?void 0:a.statusCode)||i+"";e(new yw(ic(a),i,r))}).catch(a=>{e(new bu(ic(a),a))}):e(new bu(ic(t),t))}),ww=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(_w(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),n))};function sr(t,e,n,s,a,i){return xs(this,void 0,void 0,function*(){return new Promise((r,l)=>{t(n,ww(e,s,a,i)).then(o=>{if(!o.ok)throw o;return s!=null&&s.noResolveJson?o:o.json()}).then(o=>r(o)).catch(o=>xw(o,l,s))})})}function Cl(t,e,n,s){return xs(this,void 0,void 0,function*(){return sr(t,"GET",e,n,s)})}function Wt(t,e,n,s,a){return xs(this,void 0,void 0,function*(){return sr(t,"POST",e,s,a,n)})}function _u(t,e,n,s,a){return xs(this,void 0,void 0,function*(){return sr(t,"PUT",e,s,a,n)})}function Sw(t,e,n,s){return xs(this,void 0,void 0,function*(){return sr(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Xp(t,e,n,s,a){return xs(this,void 0,void 0,function*(){return sr(t,"DELETE",e,s,a,n)})}var Ze=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};const jw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ew{constructor(e,n={},s,a){this.url=e,this.headers=n,this.bucketId=s,this.fetch=Gp(a)}uploadOrUpdate(e,n,s,a){return Ze(this,void 0,void 0,function*(){try{let i;const r=Object.assign(Object.assign({},Vh),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(r.upsert)});const o=r.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",r.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",r.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=s,l["cache-control"]=`max-age=${r.cacheControl}`,l["content-type"]=r.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(e=="PUT"?_u:Wt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},r!=null&&r.duplex?{duplex:r.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Ce(i))return{data:null,error:i};throw i}})}upload(e,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),r=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${r}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:Vh.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl)):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield _u(this.fetch,l.toString(),o,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(o){if(Ce(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,n){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield Wt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),r=new URL(this.url+i.url),l=r.searchParams.get("token");if(!l)throw new Ld("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:l},error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}update(e,n,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}})}copy(e,n,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return Ze(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Wt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${r}`)},{data:i,error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return Ze(this,void 0,void 0,function*(){try{const a=yield Wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${i}`):null})),error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}})}download(e,n){return Ze(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Cl(this.fetch,`${this.url}/${a}/${l}${r}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ce(l))return{data:null,error:l};throw l}})}info(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Cl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vu(s),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}exists(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Sw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Ce(s)&&s instanceof bu){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&a.push(o);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Xp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}list(e,n,s){return Ze(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},jw),n),{prefix:e||""});return{data:yield Wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Aw="2.10.4",Tw={"X-Client-Info":`storage-js/${Aw}`};var Es=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};class Nw{constructor(e,n={},s,a){const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Tw),n),this.fetch=Gp(s)}listBuckets(){return Es(this,void 0,void 0,function*(){try{return{data:yield Cl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ce(e))return{data:null,error:e};throw e}})}getBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield Cl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Es(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Es(this,void 0,void 0,function*(){try{return{data:yield _u(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield Xp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}}class Ow extends Nw{constructor(e,n={},s,a){super(e,n,s,a)}from(e){return new Ew(this.url,this.headers,e,this.fetch)}}const Rw="2.53.0";let Ia="";typeof Deno<"u"?Ia="deno":typeof document<"u"?Ia="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ia="react-native":Ia="node";const Cw={"X-Client-Info":`supabase-js-${Ia}/${Rw}`},kw={headers:Cw},Dw={schema:"public"},Mw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$w={};var Uw=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};const qw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Tp:e=fetch,(...n)=>e(...n)},zw=()=>typeof Headers>"u"?Np:Headers,Bw=(t,e,n)=>{const s=qw(n),a=zw();return(i,r)=>Uw(void 0,void 0,void 0,function*(){var l;const o=(l=yield e())!==null&&l!==void 0?l:t;let u=new a(r==null?void 0:r.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),s(i,Object.assign(Object.assign({},r),{headers:u}))})};var Lw=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};function Hw(t){return t.endsWith("/")?t:t+"/"}function Gw(t,e){var n,s;const{db:a,auth:i,realtime:r,global:l}=t,{db:o,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),r),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Lw(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const Yp="2.71.1",qs=30*1e3,xu=3,rc=xu*qs,Xw="http://localhost:9999",Yw="supabase.auth.token",Qw={"X-Client-Info":`gotrue-js/${Yp}`},wu="X-Supabase-Api-Version",Qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Iw=10*60*1e3;class Hd extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function I(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Kw extends Hd{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function Pw(t){return I(t)&&t.name==="AuthApiError"}class Vp extends Hd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Vn extends Hd{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class xn extends Vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jw(t){return I(t)&&t.name==="AuthSessionMissingError"}class Sr extends Vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jr extends Vn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Er extends Vn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zw(t){return I(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ih extends Vn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Su extends Vn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function lc(t){return I(t)&&t.name==="AuthRetryableFetchError"}class Kh extends Vn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ju extends Vn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ph=` 	
\r=`.split(""),Fw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ph.length;e+=1)t[Ph[e].charCodeAt(0)]=-2;for(let e=0;e<kl.length;e+=1)t[kl[e].charCodeAt(0)]=e;return t})();function Jh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(kl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(kl[s]),e.queuedBits-=6}}function Ip(t,e,n){const s=Fw[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zh(t){const e=[],n=r=>{e.push(String.fromCodePoint(r))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=r=>{tS(r,s,n)};for(let r=0;r<t.length;r+=1)Ip(t.charCodeAt(r),a,i);return e.join("")}function Ww(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function eS(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}Ww(s,e)}}function tS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function nS(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Ip(t.charCodeAt(a),n,s);return new Uint8Array(e)}function sS(t){const e=[];return eS(t,n=>e.push(n)),new Uint8Array(e)}function aS(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Jh(a,n,s)),Jh(null,n,s),e.join("")}function iS(t){return Math.round(Date.now()/1e3)+t}function rS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Nt=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},Kp=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function lS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const Pp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>tr(async()=>{const{default:s}=await Promise.resolve().then(()=>Na);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},oS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Pn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yn=async(t,e)=>{await t.removeItem(e)};class fo{constructor(){this.promise=new fo.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fo.promiseConstructor=Promise;function oc(t){const e=t.split(".");if(e.length!==3)throw new ju("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Vw.test(e[s]))throw new ju("JWT not in base64url format");return{header:JSON.parse(Zh(e[0])),payload:JSON.parse(Zh(e[1])),signature:nS(e[2]),raw:{header:e[0],payload:e[1]}}}async function cS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uS(t,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const r=await t(i);if(!e(i,null,r)){s(r);return}}catch(r){if(!e(i,r)){a(r);return}}})()})}function dS(t){return("0"+t.toString(16)).substr(-2)}function fS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,dS).join("")}async function hS(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function mS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await hS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function As(t,e,n=!1){const s=fS();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await zs(t,`${e}-code-verifier`,a);const i=await mS(s);return[i,s===i?"plain":"s256"]}const gS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pS(t){const e=t.headers.get(wu);if(!e||!e.match(gS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function bS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ts(t){if(!vS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fh(t){return JSON.parse(JSON.stringify(t))}var _S=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};const Wn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xS=[502,503,504];async function Wh(t){var e;if(!oS(t))throw new Su(Wn(t),0);if(xS.includes(t.status))throw new Su(Wn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Vp(Wn(i),i)}let s;const a=pS(t);if(a&&a.getTime()>=Qp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Kh(Wn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new xn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0))throw new Kh(Wn(n),t.status,n.weak_password.reasons);throw new Kw(Wn(n),t.status||500,s)}const wS=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function J(t,e,n,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[wu]||(i[wu]=Qp["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const r=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(r.redirect_to=s.redirectTo);const l=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",o=await SS(t,e,n+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(o):{data:Object.assign({},o),error:null}}async function SS(t,e,n,s,a,i){const r=wS(e,s,a,i);let l;try{l=await t(n,Object.assign({},r))}catch(o){throw console.error(o),new Su(Wn(o),0)}if(l.ok||await Wh(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(o){await Wh(o)}}function Jt(t){var e;let n=null;TS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=iS(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function em(t){const e=Jt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Nn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function jS(t){return{data:t,error:null}}function ES(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i}=t,r=_S(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i},o=Object.assign({},r);return{data:{properties:l,user:o},error:null}}function AS(t){return t}function TS(t){return t.access_token&&t.refresh_token&&t.expires_in}const uc=["global","local","others"];var NS=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};class OS{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Pp(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=uc[0]){if(uc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uc.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Nn})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=NS(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ES,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(I(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Nn})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,i,r,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:AS});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);u[`${E}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(I(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ts(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Nn})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ts(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Nn})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Ts(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Nn})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ts(e.userId);try{const{data:n,error:s}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ts(e.userId),Ts(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}}function tm(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function RS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ns={debug:!!(globalThis&&Kp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class CS extends Jp{}async function kS(t,e,n){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new CS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ns.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}RS();const DS={url:Xw,storageKey:Yw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nm(t,e,n){return await n()}const Os={};class qi{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qi.nextInstanceID,qi.nextInstanceID+=1,this.instanceID>0&&Nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DS),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new OS({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Pp(a.fetch),this.lock=a.lock||nm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Nt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kS:this.lock=nm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Kp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=tm(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Os[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Os[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=lS(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Nt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Zw(i)){const o=(e=i.details)===null||e===void 0?void 0:e.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:r,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",r,"redirect type",l),await this._saveSession(r),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return I(n)?{error:n}:{error:new Vp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Jt}),{data:r,error:l}=i;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,u=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(I(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,s,a;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await As(this.storage,this.storageKey)),i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:_},xform:Jt})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Jt})}else throw new jr("You must provide either an email or phone number and a password");const{data:r,error:l}=i;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,u=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(I(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:r,options:l}=e;n=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:em})}else if("phone"in e){const{phone:i,password:r,options:l}=e;n=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:em})}else throw new jr("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Sr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,a,i,r,l,o,u,d,f,h,m;let _,w;if("message"in e)_=e.message,w=e.signature;else{const{chain:E,wallet:b,statement:p,options:g}=e;let v;if(Nt())if(typeof b=="object")v=b;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))v=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=b}const A=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in v&&v.signIn){const O=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),p?{statement:p}:null));let y;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")y=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)y=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in y&&"signature"in y&&(typeof y.signedMessage=="string"||y.signedMessage instanceof Uint8Array)&&y.signature instanceof Uint8Array)_=typeof y.signedMessage=="string"?y.signedMessage:new TextDecoder().decode(y.signedMessage),w=y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${A.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(a=(s=g==null?void 0:g.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((r=g==null?void 0:g.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(y=>`- ${y}`)]:[]].join(`
`);const O=await v.signMessage(new TextEncoder().encode(_),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=O}}try{const{data:E,error:b}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:aS(w)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Jt});if(b)throw b;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Sr}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:b})}catch(E){if(I(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const n=await Pn(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:i,error:r}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Jt});if(await yn(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Sr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:r})}catch(i){if(I(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:i,nonce:r}=e,l=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Jt}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Sr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,a,i,r;try{if("email"in e){const{email:l,options:o}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await As(this.storage,this.storageKey));const{error:f}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:o}=e,{data:u,error:d}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(r=o==null?void 0:o.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new jr("You must provide either an email or phone number.")}catch(l){if(I(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,s;try{let a,i;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:r,error:l}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Jt});if(l)throw l;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,u=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(I(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,s,a;try{let i=null,r=null;return this.flowType==="pkce"&&([i,r]=await As(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:r}),headers:this.headers,xform:jS})}catch(i){if(I(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new xn;const{error:a}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(I(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:r}=await J(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:r,error:l}=await J(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:l}}throw new jr("You must provide either an email or phone number and a type")}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<rc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const r=await Pn(this.userStorage,this.storageKey+"-user");r!=null&&r.user?e.user=r.user:e.user=cc()}if(this.storage.isServer&&e.user){let r=this.suppressGetSessionWarning;e=new Proxy(e,{get:(o,u,d)=>(!r&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,u,d))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Nn}):await this._useSession(async n=>{var s,a,i;const{data:r,error:l}=n;if(l)throw l;return!(!((s=r.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Nn})})}catch(n){if(I(n))return Jw(n)&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new xn;const r=a.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await As(this.storage,this.storageKey));const{data:u,error:d}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:r.access_token,xform:Nn});if(d)throw d;return r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xn;const n=Date.now()/1e3;let s=n,a=!0,i=null;const{payload:r}=oc(e.access_token);if(r.exp&&(s=r.exp,a=s<=n),a){const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(I(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:r,error:l}=n;if(l)throw l;e=(s=r.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new xn;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Nt())throw new Er("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Er(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ih("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Er("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ih("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:r,expires_in:l,expires_at:o,token_type:u}=e;if(!i||!l||!r||!u)throw new Er("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const _=h-f;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,h,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,h,d);const{data:w,error:E}=await this._getUser(i);if(E)throw E;const b={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:r,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(s){if(I(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Pn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{error:i};const r=(s=a.session)===null||s===void 0?void 0:s.access_token;if(r){const{error:l}=await this.admin.signOut(r,e);if(l&&!(Pw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=rS(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:i},error:r}=n;if(r)throw r;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await As(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(I(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:a}=await this._useSession(async i=>{var r,l,o,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Nt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(I(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:i,error:r}=n;if(r)throw r;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await uS(async a=>(a>0&&await cS(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jt})),(a,i)=>{const r=200*Math.pow(2,a);return i&&lc(i)&&Date.now()+r-s<qs})}catch(s){if(this._debug(n,"error",s),I(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Nt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Pn(this.storage,this.storageKey);if(a&&this.userStorage){let r=await Pn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:a.user},await zs(this.userStorage,this.storageKey+"-user",r)),a.user=(e=r==null?void 0:r.user)!==null&&e!==void 0?e:cc()}else if(a&&!a.user&&!a.user){const r=await Pn(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(a.user=r.user,await yn(this.storage,this.storageKey+"-user"),await zs(this.storage,this.storageKey,a)):a.user=cc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rc;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${rc}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:r}=await this._callRefreshToken(a.refresh_token);r&&(console.error(r),lc(r)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:l}=await this._getUser(a.access_token);!l&&(r!=null&&r.user)?(a.user=r.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new fo;const{data:i,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!i.session)throw new xn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),I(i)){const r={session:null,error:i};return lc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],r=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(o){i.push(o)}});if(await Promise.all(r),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await zs(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Fh(a);await zs(this.storage,this.storageKey,i)}else{const a=Fh(n);await zs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await yn(this.storage,this.storageKey),await yn(this.storage,this.storageKey+"-code-verifier"),await yn(this.storage,this.storageKey+"-user"),this.userStorage&&await yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qs}ms, refresh threshold is ${xu} ticks`),a<=xu&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,r]=await As(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(r)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:i,error:r}=n;if(r)return{data:null,error:r};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:u}=await J(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:r,error:l}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:l})})}catch(n){if(I(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(I(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],a=s.filter(r=>r.factor_type==="totp"&&r.status==="verified"),i=s.filter(r=>r.factor_type==="phone"&&r.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=oc(a.access_token);let l=null;r.aal&&(l=r.aal);let o=l;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(o="aal2");const d=r.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Iw>a)return s;const{data:i,error:r}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};s=m.session.access_token}const{header:a,payload:i,signature:r,raw:{header:l,payload:o}}=oc(s);n!=null&&n.allowExpired||yS(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:a,signature:r},error:null}}const d=bS(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,r,sS(`${l}.${o}`)))throw new ju("Invalid JWT signature");return{data:{claims:i,header:a,signature:r},error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}}}qi.nextInstanceID=0;const MS=qi;class $S extends MS{constructor(e){super(e)}}var US=function(t,e,n,s){function a(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function l(d){try{u(s.next(d))}catch(f){r(f)}}function o(d){try{u(s.throw(d))}catch(f){r(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,o)}u((s=s.apply(t,e||[])).next())})};class qS{constructor(e,n,s){var a,i,r;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Hw(e),o=new URL(l);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Dw,realtime:$w,auth:Object.assign(Object.assign({},Mw),{storageKey:u}),global:kw},f=Gw(s??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=f.auth)!==null&&r!==void 0?r:{},this.headers,f.global.fetch),this.fetch=Bw(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new tw(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Ow(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Cx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return US(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:i,flowType:r,lock:l,debug:o},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $S({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,flowType:r,lock:l,debug:o,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new pw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zp=(t,e,n)=>new qS(t,e,n);function zS(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}zS()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fp="https://dfdyqdkadnzeaarepdjj.supabase.co",Wp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRmZHlxZGthZG56ZWFhcmVwZGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2NTQ3ODMsImV4cCI6MjA3MTIzMDc4M30.8ZvJpiR7uSLrk-E6jZ26Avb4GpPKE_BaJxLZfLs8WvE",Le=Zp(Fp,Wp);Zp(Fp,Wp);function BS(){const[t,e]=B.useState(""),[n,s]=B.useState(""),[a,i]=B.useState("class"),[r,l]=B.useState(""),[o,u]=B.useState(""),[d,f]=B.useState(""),[h,m]=B.useState(""),[_,w]=B.useState(!1),[E,b]=B.useState(""),[p,g]=B.useState("success"),[v,A]=B.useState([]),[O,y]=B.useState(1);B.useEffect(()=>{const x=new Date().toISOString().split("T")[0];e(x)},[]),B.useEffect(()=>{t&&n&&a&&N()},[t,n,a]);const N=async()=>{try{const{data:x,error:S}=await Le.from("study_records").select("*").eq("study_date",t).eq("subject",n).eq("content_type",a).order("attempt_number",{ascending:!0});if(S)throw S;A(x||[]),y(((x==null?void 0:x.length)||0)+1)}catch(x){console.error("履歴取得エラー:",x)}},M=async x=>{if(x.preventDefault(),!t||!n||!a||!r||!o||!d){b("すべての項目を入力してください"),g("error");return}const S=parseInt(r),D=parseInt(o);if(isNaN(S)||isNaN(D)||S<=0||D<0||D>S){b("問題数と正解数を正しく入力してください"),g("error");return}try{w(!0),b("");const z=new Date().toISOString().split("T")[0],{error:T}=await Le.from("study_records").insert([{date:z,study_date:t,subject:n,content_type:a,attempt_number:O,questions_total:S,questions_correct:D,emotion:d,comment:h.trim()||null}]);if(T)throw T;b("✅ 学習記録を保存しました！"),g("success"),l(""),u(""),f(""),m(""),await N()}catch(z){console.error("❌ 保存エラー:",z),b("保存に失敗しました。もう一度お試しください。"),g("error")}finally{w(!1)}},R=x=>({aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"})[x]||x,C=x=>x.length===0?"":x.map(S=>`${S.questions_correct}/${S.questions_total}`).join(" → ");return c.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"📝 学習記録"}),c.jsx("p",{className:"text-slate-600 text-lg",children:"今日のがんばりを記録しよう！"})]}),v.length>0&&c.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"📚 この学習内容の履歴"}),c.jsxs("div",{className:"text-blue-700",children:[c.jsxs("div",{className:"font-medium",children:[R(n),"（",a==="class"?"授業":"宿題","） - ",new Date(t).toLocaleDateString("ja-JP"),"実施分"]}),c.jsxs("div",{className:"text-lg mt-1",children:["これまでの成績: ",C(v)]}),c.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:["今回は",O,"回目の挑戦です"]})]})]}),c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"📅 いつの学習内容ですか？"}),c.jsx("input",{type:"date",value:t,onChange:x=>e(x.target.value),max:new Date().toISOString().split("T")[0],className:"w-full text-lg p-4 border-2 border-slate-200 rounded-xl focus:border-blue-400 focus:ring-4 focus:ring-blue-100",required:!0}),c.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"今日復習した学習内容が、いつ実施されたものかを選択してください"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"📚 科目を選択"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{key:"aptitude",label:"適性",icon:"🧠",color:"purple"},{key:"japanese",label:"国語",icon:"📚",color:"rose"},{key:"math",label:"算数",icon:"🔢",color:"blue"},{key:"science",label:"理科",icon:"🔬",color:"green"},{key:"social",label:"社会",icon:"🌍",color:"amber"}].map(x=>c.jsxs("button",{type:"button",onClick:()=>s(x.key),className:`p-4 rounded-xl border-2 transition-all font-medium ${n===x.key?x.color==="purple"?"border-purple-400 bg-purple-50 text-purple-700":x.color==="rose"?"border-rose-400 bg-rose-50 text-rose-700":x.color==="blue"?"border-blue-400 bg-blue-50 text-blue-700":x.color==="green"?"border-green-400 bg-green-50 text-green-700":x.color==="amber"?"border-amber-400 bg-amber-50 text-amber-700":"border-blue-400 bg-blue-50 text-blue-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[c.jsx("div",{className:"text-2xl mb-1",children:x.icon}),c.jsx("div",{className:"text-sm",children:x.label})]},x.key))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"🎯 授業？宿題？"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>i("class"),className:`p-4 rounded-xl border-2 transition-all font-medium ${a==="class"?"border-blue-400 bg-blue-50 text-blue-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[c.jsx("div",{className:"text-3xl mb-2",children:"🏫"}),c.jsx("div",{className:"font-bold",children:"授業"}),c.jsx("div",{className:"text-sm",children:"授業で習った内容"})]}),c.jsxs("button",{type:"button",onClick:()=>i("homework"),className:`p-4 rounded-xl border-2 transition-all font-medium ${a==="homework"?"border-orange-400 bg-orange-50 text-orange-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[c.jsx("div",{className:"text-3xl mb-2",children:"📝"}),c.jsx("div",{className:"font-bold",children:"宿題"}),c.jsx("div",{className:"text-sm",children:"宿題として出された内容"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"🎯 今回の成績"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"問題数（全体）"}),c.jsx("input",{type:"number",min:"1",max:"200",value:r,onChange:x=>l(x.target.value),className:"w-full text-lg p-3 border-2 border-slate-200 rounded-xl focus:border-blue-400 focus:ring-4 focus:ring-blue-100",placeholder:"例: 10",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"正解数"}),c.jsx("input",{type:"number",min:"0",max:r||"200",value:o,onChange:x=>u(x.target.value),className:"w-full text-lg p-3 border-2 border-slate-200 rounded-xl focus:border-blue-400 focus:ring-4 focus:ring-blue-100",placeholder:"例: 7",required:!0})]})]}),r&&o&&c.jsx("div",{className:"mt-3 text-center",children:c.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["正答率: ",Math.round(parseInt(o)/parseInt(r)*100),"%"]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"😊 今日の気持ち"}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"good",label:"よくできた",icon:"😊",color:"green"},{key:"normal",label:"普通",icon:"😐",color:"blue"},{key:"hard",label:"難しかった",icon:"😞",color:"orange"}].map(x=>c.jsxs("button",{type:"button",onClick:()=>f(x.key),className:`p-4 rounded-xl border-2 transition-all font-medium ${d===x.key?x.color==="green"?"border-green-400 bg-green-50 text-green-700":x.color==="blue"?"border-blue-400 bg-blue-50 text-blue-700":x.color==="orange"?"border-orange-400 bg-orange-50 text-orange-700":"border-blue-400 bg-blue-50 text-blue-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[c.jsx("div",{className:"text-3xl mb-2",children:x.icon}),c.jsx("div",{className:"text-sm",children:x.label})]},x.key))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border",children:[c.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-3",children:"💭 今日の振り返り（自由記入）"}),c.jsx("textarea",{value:h,onChange:x=>m(x.target.value),maxLength:300,className:"w-full min-h-24 p-4 border-2 border-slate-200 rounded-xl focus:border-blue-400 focus:ring-4 focus:ring-blue-100 text-lg resize-none",placeholder:"今日の学習でどんなことを感じましたか？（任意）"}),c.jsxs("div",{className:"text-right text-sm text-slate-500 mt-2",children:[h.length,"/300文字"]})]}),E&&c.jsx("div",{className:`p-4 rounded-xl font-medium ${p==="success"?"bg-green-100 border border-green-300 text-green-800":"bg-red-100 border border-red-300 text-red-800"}`,children:E}),c.jsx("button",{type:"submit",disabled:_,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold py-4 px-6 rounded-2xl hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:_?"保存中...":"📝 学習記録を保存"})]})]})}function LS(){const[t,e]=B.useState(null),[n,s]=B.useState([]),[a,i]=B.useState(!0),[r,l]=B.useState(null);B.useEffect(()=>{o();const y=setInterval(o,3e4);return()=>clearInterval(y)},[]);const o=async()=>{try{i(!0),l(null);const{data:y,error:N}=await Le.from("study_records").select("*").order("date",{ascending:!1});if(N)throw N;const{data:M,error:R}=await Le.from("feedbacks").select(`
          *,
          study_records (
            id,
            date,
            study_date,
            subject,
            content_type,
            attempt_number,
            questions_total,
            questions_correct,
            emotion,
            comment
          )
        `).order("created_at",{ascending:!1});if(R)throw R;const C=new Date().toISOString().split("T")[0],x=(y==null?void 0:y.filter(q=>q.date===C))||[],S=await u(x,y||[]),D=d(y||[]),z=f(y||[]),T=h(y||[]),$=m(y||[]),L=_(y||[]);e({continueDays:D,cumulativeDays:z,todayRecords:S,subjectStats:T,recentEmotions:$,totalSessions:(y==null?void 0:y.length)||0,growthMetrics:L}),s(M||[])}catch(y){const N=y instanceof Error?y.message:"データの取得に失敗しました";l(N),console.error("❌ ダッシュボードデータ取得エラー:",N)}finally{i(!1)}},u=async(y,N)=>{const M=new Map;for(const R of y){const C=`${R.study_date}-${R.subject}-${R.content_type}`,x=N.filter(D=>D.study_date===R.study_date&&D.subject===R.subject&&D.content_type===R.content_type&&D.date<=R.date).sort((D,z)=>D.attempt_number-z.attempt_number).map(D=>({attempt:D.attempt_number,correct:D.questions_correct,total:D.questions_total,accuracy:Math.round(D.questions_correct/D.questions_total*100),record_date:D.date,emotion:D.emotion})),S=N.filter(D=>D.study_date===R.study_date&&D.subject===R.subject&&D.content_type===R.content_type&&D.date===R.date).sort((D,z)=>z.attempt_number-D.attempt_number)[0]||R;M.set(C,{id:S.id,study_date:S.study_date,subject:S.subject,content_type:S.content_type,attempt_number:S.attempt_number,questions_total:S.questions_total,questions_correct:S.questions_correct,emotion:S.emotion,comment:S.comment,history:x})}return Array.from(M.values())},d=y=>{if(!y.length)return 0;const N=new Date().toISOString().split("T")[0],M=Array.from(new Set(y.map(x=>x.date))).sort().reverse();if(M.length===0)return 0;let R=0,C=new Date(N);for(;;){const x=C.toISOString().split("T")[0];if(M.includes(x))R++,C.setDate(C.getDate()-1);else break}return R},f=y=>y.length?Array.from(new Set(y.map(M=>M.date))).sort().length:0,h=y=>[{key:"aptitude",label:"適性",icon:"🧠",color:"from-purple-400 to-purple-600"},{key:"japanese",label:"国語",icon:"📚",color:"from-rose-400 to-rose-600"},{key:"math",label:"算数",icon:"🔢",color:"from-blue-400 to-blue-600"},{key:"science",label:"理科",icon:"🔬",color:"from-green-400 to-green-600"},{key:"social",label:"社会",icon:"🌍",color:"from-amber-400 to-amber-600"}].map(M=>{const R=y.filter(D=>D.subject===M.key),C=R.reduce((D,z)=>D+z.questions_total,0),x=R.reduce((D,z)=>D+z.questions_correct,0),S=C>0?Math.round(x/C*100):0;return{subject:M.key,label:M.label,totalQuestions:C,totalCorrect:x,accuracy:S,icon:M.icon,color:M.color}}).filter(M=>M.totalQuestions>0),m=y=>{const N=new Map;return y.forEach(R=>{const C=R.date;N.has(C)||N.set(C,[]),N.get(C).push(R)}),Array.from(N.keys()).sort().reverse().slice(0,5).map(R=>{const C=N.get(R)||[],x={good:0,normal:0,hard:0};C.forEach(D=>{x[D.emotion]++});const S=Object.entries(x).sort(([,D],[,z])=>z-D)[0][0];return{date:R,emotion:S}})},_=y=>{const N=new Date().toISOString().split("T")[0],M=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],R=y.filter(_e=>_e.date===N),C=y.filter(_e=>_e.date===M),x=R.length>0?R.reduce((_e,je)=>_e+je.questions_correct/je.questions_total,0)/R.length*100:0,S=C.length>0?C.reduce((_e,je)=>_e+je.questions_correct/je.questions_total,0)/C.length*100:0,D={percentage:Math.abs(x-S),isImprovement:x>S},z=new Date,T=new Date(z.getTime()-z.getDay()*24*60*60*1e3),$=new Date(T.getTime()-7*24*60*60*1e3),L=new Date(T.getTime()-1),q=y.filter(_e=>new Date(_e.date)>=T),V=y.filter(_e=>{const je=new Date(_e.date);return je>=$&&je<=L}),Je=q.length>0?q.reduce((_e,je)=>_e+je.questions_correct/je.questions_total,0)/q.length*100:0,me=V.length>0?V.reduce((_e,je)=>_e+je.questions_correct/je.questions_total,0)/V.length*100:0,Ca={current:Math.round(Je),previous:Math.round(me),improvement:Math.round(Je-me)},Qt=d(y),ws=new Date(z.getTime()-14*24*60*60*1e3),uf=new Date(z.getTime()-7*24*60*60*1e3),jb=["aptitude","japanese","math","science","social"],Eb={aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"};let df=null,ff=0;return jb.forEach(_e=>{const je=y.filter(mn=>mn.subject===_e&&new Date(mn.date)>=uf),_o=y.filter(mn=>mn.subject===_e&&new Date(mn.date)>=ws&&new Date(mn.date)<uf);if(je.length>0&&_o.length>0){const mn=je.reduce((wo,ka)=>wo+ka.questions_correct/ka.questions_total,0)/je.length*100,Ab=_o.reduce((wo,ka)=>wo+ka.questions_correct/ka.questions_total,0)/_o.length*100,xo=mn-Ab;xo>ff&&(ff=xo,df={subject:_e,label:Eb[_e],improvement:Math.round(xo)})}}),{todayImprovement:D,weeklyAverage:Ca,consecutiveStreak:Qt,mostImprovedSubject:df}},w=y=>({good:"😊",normal:"😐",hard:"😞"})[y]||"😐",E=y=>({aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"})[y]||y,b=y=>({aptitude:"🎯",japanese:"✍️",math:"🔢",science:"🧪",social:"🌍"})[y]||"📚",p=y=>y==="class"?"授業":"宿題",g=y=>({good:"😊 よくできた",normal:"😐 普通",hard:"😞 難しかった"})[y]||y,v=y=>y.length<=1?"":y.map(N=>`(${N.correct}/${N.total})`).join(" → "),A=y=>!y||y==="1970-01-01"?"未設定":new Date(y).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric"}),O=()=>{const y=new Date;return y.setDate(y.getDate()-7),n.filter(R=>new Date(R.created_at)>=y).sort((R,C)=>new Date(C.created_at).getTime()-new Date(R.created_at).getTime()).slice(0,10).map(R=>({feedback:R,record:R.study_records||null}))};return a?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-lg",children:"ダッシュボードを読み込み中..."})]}):r?c.jsx("div",{className:"p-8 text-center",children:c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:[c.jsx("h3",{className:"font-bold",children:"エラーが発生しました"}),c.jsx("p",{children:r}),c.jsx("button",{onClick:o,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"再読み込み"})]})}):t?c.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"📊 学習ダッシュボード"}),c.jsx("p",{className:"text-slate-600 text-lg",children:"がんばりの記録を確認しよう！"})]}),c.jsxs("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-2xl p-8 text-center shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[c.jsx("span",{className:"text-6xl",children:"🔥"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-4xl font-black",children:"継続日数"}),c.jsx("p",{className:"text-xl opacity-90",children:"がんばり日数"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-5xl font-black mb-1",children:[t.continueDays,c.jsx("span",{className:"text-2xl",children:"/17"})]}),c.jsx("div",{className:"text-lg opacity-80",children:"連続日数"})]}),c.jsx("div",{className:"text-white/50 text-4xl",children:"|"}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-5xl font-black mb-1",children:[t.cumulativeDays,c.jsx("span",{className:"text-2xl",children:"/17"})]}),c.jsx("div",{className:"text-lg opacity-80",children:"累積日数"})]})]}),c.jsx("div",{className:"text-xl opacity-90",children:t.continueDays>=17?"🎉 完走達成！":t.continueDays>=10?"💪 もう少し！":t.continueDays>=5?"🌟 順調です！":"📈 がんばろう！"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("span",{className:"text-2xl",children:"📈"}),c.jsx("h3",{className:"font-bold text-lg",children:"今日の成果"})]}),t.growthMetrics.todayImprovement.percentage>0?c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-2xl font-bold ${t.growthMetrics.todayImprovement.isImprovement?"text-green-600":"text-red-600"}`,children:[t.growthMetrics.todayImprovement.isImprovement?"+":"-",t.growthMetrics.todayImprovement.percentage.toFixed(1),"%"]}),c.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["昨日より ",t.growthMetrics.todayImprovement.isImprovement?"UP!":"DOWN",t.growthMetrics.todayImprovement.isImprovement&&t.growthMetrics.todayImprovement.percentage>=10?" 🔥":""]})]}):c.jsx("div",{className:"text-center text-slate-500 text-sm",children:"昨日のデータなし"})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("span",{className:"text-2xl",children:"📊"}),c.jsx("h3",{className:"font-bold text-lg",children:"週間平均"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.growthMetrics.weeklyAverage.current,"%"]}),t.growthMetrics.weeklyAverage.previous>0&&c.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["先週: ",t.growthMetrics.weeklyAverage.previous,"%",t.growthMetrics.weeklyAverage.improvement!==0&&c.jsxs("span",{className:`ml-1 ${t.growthMetrics.weeklyAverage.improvement>0?"text-green-600":"text-red-600"}`,children:["(",t.growthMetrics.weeklyAverage.improvement>0?"+":"",t.growthMetrics.weeklyAverage.improvement,"%)"]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("span",{className:"text-2xl",children:"⭐"}),c.jsx("h3",{className:"font-bold text-lg",children:"連続記録"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.growthMetrics.consecutiveStreak,"日連続"]}),c.jsx("div",{className:"text-sm text-slate-600 mt-1",children:t.growthMetrics.consecutiveStreak>=5?"素晴らしい！":"がんばろう！"})]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("span",{className:"text-2xl",children:"🚀"}),c.jsx("h3",{className:"font-bold text-lg",children:"成長科目"})]}),t.growthMetrics.mostImprovedSubject?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-bold text-green-600",children:t.growthMetrics.mostImprovedSubject.label}),c.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["+",t.growthMetrics.mostImprovedSubject.improvement,"% UP!"]})]}):c.jsx("div",{className:"text-center text-slate-500 text-sm",children:"データ蓄積中"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"📅"}),"今日の記録"]}),t.todayRecords.length>0?c.jsx("div",{className:"space-y-4",children:t.todayRecords.map(y=>c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-lg",children:[E(y.subject),"（",p(y.content_type),"）"]}),c.jsxs("div",{className:"text-sm text-slate-500",children:[A(y.study_date),"実施分",y.attempt_number>1&&c.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:[y.attempt_number,"回目"]})]})]}),c.jsx("span",{className:"text-sm text-slate-500",children:g(y.emotion)})]}),c.jsxs("div",{className:"text-blue-600 font-medium mb-2",children:["現在: ",y.questions_correct,"/",y.questions_total,"問正解",c.jsxs("span",{className:"ml-2 text-sm text-slate-600",children:["(",Math.round(y.questions_correct/y.questions_total*100),"%)"]})]}),y.history.length>1&&c.jsxs("div",{className:"text-sm text-slate-600 mb-2",children:[c.jsx("span",{className:"font-medium",children:"成績の変化:"}),c.jsx("div",{className:"mt-1 font-mono text-blue-700",children:v(y.history)}),c.jsx("div",{className:"text-xs text-slate-500 mt-1",children:y.history.length>1&&c.jsxs("span",{children:["改善: +",y.history[y.history.length-1].accuracy-y.history[0].accuracy,"%"]})})]}),y.comment&&c.jsx("p",{className:"text-slate-600 text-sm mt-2 bg-white p-2 rounded",children:y.comment})]},y.id))}):c.jsxs("div",{className:"text-center py-8 text-slate-500",children:[c.jsx("span",{className:"text-4xl mb-4 block",children:"📝"}),c.jsx("p",{className:"text-lg",children:"今日はまだ学習記録がありません"}),c.jsx("p",{className:"text-sm",children:"がんばって記録をつけよう！"})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"💭"}),"最近の調子"]}),t.recentEmotions.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex justify-center items-center gap-2 text-4xl",children:t.recentEmotions.map((y,N)=>c.jsx("span",{className:"transition-transform hover:scale-125",children:w(y.emotion)},N))}),c.jsx("div",{className:"text-center text-sm text-slate-500",children:t.recentEmotions.map((y,N)=>c.jsx("span",{className:"inline-block mx-1",children:new Date(y.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},N))})]}):c.jsxs("div",{className:"text-center py-8 text-slate-500",children:[c.jsx("span",{className:"text-4xl mb-4 block",children:"🤔"}),c.jsx("p",{children:"まだデータが少ないです"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"📈"}),"科目別成績"]}),t.subjectStats.length>0?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"space-y-4 mb-8",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4",children:"累積正答率"}),t.subjectStats.map(y=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3 w-24",children:[c.jsx("span",{className:"text-2xl",children:y.icon}),c.jsx("span",{className:"font-medium",children:y.label})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-6 overflow-hidden",children:c.jsx("div",{className:`h-full bg-gradient-to-r ${y.color} transition-all duration-500`,style:{width:`${y.accuracy}%`}})}),c.jsxs("div",{className:"text-lg font-bold text-slate-700 w-12 text-right",children:[y.accuracy,"%"]})]}),c.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[y.totalCorrect,"/",y.totalQuestions,"問正解"]})]})]},y.subject))]})}):c.jsxs("div",{className:"text-center py-8 text-slate-500",children:[c.jsx("span",{className:"text-4xl mb-4 block",children:"📊"}),c.jsx("p",{children:"学習記録を追加すると成績が表示されます"})]})]}),O().length>0&&c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"💌"}),"最近の応援メッセージ・スタンプ"]}),c.jsx("button",{onClick:o,disabled:a,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 transition-colors",children:"🔄 更新"})]}),c.jsx("div",{className:"space-y-4",children:O().map(y=>c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[y.record&&c.jsxs("div",{className:"mb-3 p-3 bg-white rounded-lg border border-slate-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-lg",children:b(y.record.subject)}),c.jsx("span",{className:"font-semibold",children:E(y.record.subject)}),c.jsx("span",{className:"text-sm px-2 py-1 bg-slate-100 text-slate-600 rounded",children:p(y.record.content_type)}),y.record.attempt_number>1&&c.jsxs("span",{className:"text-sm px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[y.record.attempt_number,"回目"]})]}),c.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-4",children:[c.jsxs("span",{children:["📅 ",A(y.record.study_date),"実施分"]}),c.jsxs("span",{className:"font-medium text-blue-600",children:["🎯 ",y.record.questions_correct,"/",y.record.questions_total,"問正解 (",Math.round(y.record.questions_correct/y.record.questions_total*100),"%)"]}),c.jsx("span",{children:g(y.record.emotion)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${y.feedback.sender_type==="parent"?"bg-pink-100 text-pink-800":"bg-blue-100 text-blue-800"}`,children:y.feedback.sender_type==="parent"?"👨‍👩‍👧‍👦 保護者":"👨‍🏫 指導者"}),y.feedback.reaction_type&&c.jsxs("span",{className:"text-2xl",children:[y.feedback.reaction_type==="clap"&&"👏",y.feedback.reaction_type==="thumbs"&&"👍",y.feedback.reaction_type==="muscle"&&"💪"]}),c.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:new Date(y.feedback.created_at).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),y.feedback.message&&typeof y.feedback.message=="string"&&y.feedback.message.trim()!==""?c.jsx("p",{className:"text-slate-700",children:y.feedback.message}):y.feedback.reaction_type&&c.jsxs("p",{className:"text-slate-600 italic text-sm",children:[y.feedback.reaction_type==="clap"&&"すごい！",y.feedback.reaction_type==="thumbs"&&"いいね！",y.feedback.reaction_type==="muscle"&&"頑張って！"]})]},y.feedback.id))})]})]}):null}function X(t,e,n,s,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function j(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let ey=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ey=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function Eu(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Au=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class G extends Error{}class Ge extends G{constructor(e,n,s,a){super(`${Ge.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new ho({message:s,cause:Au(n)});const i=n==null?void 0:n.error;return e===400?new ty(e,i,s,a):e===401?new ny(e,i,s,a):e===403?new sy(e,i,s,a):e===404?new ay(e,i,s,a):e===409?new iy(e,i,s,a):e===422?new ry(e,i,s,a):e===429?new ly(e,i,s,a):e>=500?new oy(e,i,s,a):new Ge(e,i,s,a)}}class jt extends Ge{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ho extends Ge{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Gd extends ho{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ty extends Ge{}class ny extends Ge{}class sy extends Ge{}class ay extends Ge{}class iy extends Ge{}class ry extends Ge{}class ly extends Ge{}class oy extends Ge{}class cy extends G{constructor(){super("Could not parse response content as the length limit was reached")}}class uy extends G{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ka extends Error{constructor(e){super(e)}}const HS=/^[a-z][a-z0-9+.-]*:/i,GS=t=>HS.test(t);let tt=t=>(tt=Array.isArray,tt(t)),sm=tt;function XS(t){return typeof t!="object"?{}:t??{}}function YS(t){if(!t)return!0;for(const e in t)return!1;return!0}function QS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dc(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const VS=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new G(`${t} must be an integer`);if(e<0)throw new G(`${t} must be a positive integer`);return e},IS=t=>{try{return JSON.parse(t)}catch{return}},ar=t=>new Promise(e=>setTimeout(e,t)),Bs="5.13.1",KS=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function PS(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JS=()=>{var n;const t=PS();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":im(Deno.build.os),"X-Stainless-Arch":am(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":im(globalThis.process.platform??"unknown"),"X-Stainless-Arch":am(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=ZS();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZS(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,i=s[2]||0,r=s[3]||0;return{browser:e,version:`${a}.${i}.${r}`}}}return null}const am=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",im=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let rm;const FS=()=>rm??(rm=JS());function WS(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function dy(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function fy(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return dy({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function hy(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function e1(t){var s,a;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((a=(s=t[Symbol.asyncIterator]()).return)==null?void 0:a.call(s));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const t1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),my="RFC3986",gy=t=>String(t),lm={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:gy},n1="RFC1738";let Tu=(t,e)=>(Tu=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Tu(t,e));const $t=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),fc=1024,s1=(t,e,n,s,a)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let r="";for(let l=0;l<i.length;l+=fc){const o=i.length>=fc?i.slice(l,l+fc):i,u=[];for(let d=0;d<o.length;++d){let f=o.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===n1&&(f===40||f===41)){u[u.length]=o.charAt(d);continue}if(f<128){u[u.length]=$t[f];continue}if(f<2048){u[u.length]=$t[192|f>>6]+$t[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=$t[224|f>>12]+$t[128|f>>6&63]+$t[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|o.charCodeAt(d)&1023),u[u.length]=$t[240|f>>18]+$t[128|f>>12&63]+$t[128|f>>6&63]+$t[128|f&63]}r+=u.join("")}return r};function a1(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function om(t,e){if(tt(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const py={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},yy=function(t,e){Array.prototype.push.apply(t,tt(e)?e:[e])};let cm;const Ae={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:s1,encodeValuesOnly:!1,format:my,formatter:gy,indices:!1,serializeDate(t){return(cm??(cm=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function i1(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const hc={};function by(t,e,n,s,a,i,r,l,o,u,d,f,h,m,_,w,E,b){let p=t,g=b,v=0,A=!1;for(;(g=g.get(hc))!==void 0&&!A;){const R=g.get(t);if(v+=1,typeof R<"u"){if(R===v)throw new RangeError("Cyclic object value");A=!0}typeof g.get(hc)>"u"&&(v=0)}if(typeof u=="function"?p=u(e,p):p instanceof Date?p=h==null?void 0:h(p):n==="comma"&&tt(p)&&(p=om(p,function(R){return R instanceof Date?h==null?void 0:h(R):R})),p===null){if(i)return o&&!w?o(e,Ae.encoder,E,"key",m):e;p=""}if(i1(p)||a1(p)){if(o){const R=w?e:o(e,Ae.encoder,E,"key",m);return[(_==null?void 0:_(R))+"="+(_==null?void 0:_(o(p,Ae.encoder,E,"value",m)))]}return[(_==null?void 0:_(e))+"="+(_==null?void 0:_(String(p)))]}const O=[];if(typeof p>"u")return O;let y;if(n==="comma"&&tt(p))w&&o&&(p=om(p,o)),y=[{value:p.length>0?p.join(",")||null:void 0}];else if(tt(u))y=u;else{const R=Object.keys(p);y=d?R.sort(d):R}const N=l?String(e).replace(/\./g,"%2E"):String(e),M=s&&tt(p)&&p.length===1?N+"[]":N;if(a&&tt(p)&&p.length===0)return M+"[]";for(let R=0;R<y.length;++R){const C=y[R],x=typeof C=="object"&&typeof C.value<"u"?C.value:p[C];if(r&&x===null)continue;const S=f&&l?C.replace(/\./g,"%2E"):C,D=tt(p)?typeof n=="function"?n(M,S):M:M+(f?"."+S:"["+S+"]");b.set(t,v);const z=new WeakMap;z.set(hc,b),yy(O,by(x,D,n,s,a,i,r,l,n==="comma"&&w&&tt(p)?null:o,u,d,f,h,m,_,w,E,z))}return O}function r1(t=Ae){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ae.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=my;if(typeof t.format<"u"){if(!Tu(lm,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=lm[n];let a=Ae.filter;(typeof t.filter=="function"||tt(t.filter))&&(a=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in py?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ae.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const r=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ae.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ae.addQueryPrefix,allowDots:r,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ae.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ae.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ae.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ae.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ae.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ae.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ae.encodeValuesOnly,filter:a,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ae.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ae.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ae.strictNullHandling}}function l1(t,e={}){let n=t;const s=r1(e);let a,i;typeof s.filter=="function"?(i=s.filter,n=i("",n)):tt(s.filter)&&(i=s.filter,a=i);const r=[];if(typeof n!="object"||n===null)return"";const l=py[s.arrayFormat],o=l==="comma"&&s.commaRoundTrip;a||(a=Object.keys(n)),s.sort&&a.sort(s.sort);const u=new WeakMap;for(let h=0;h<a.length;++h){const m=a[h];s.skipNulls&&n[m]===null||yy(r,by(n[m],m,l,o,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,u))}const d=r.join(s.delimiter);let f=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}function o1(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let um;function Xd(t){let e;return(um??(e=new globalThis.TextEncoder,um=e.encode.bind(e)))(t)}let dm;function fm(t){let e;return(dm??(e=new globalThis.TextDecoder,dm=e.decode.bind(e)))(t)}var lt,ot;class mo{constructor(){lt.set(this,void 0),ot.set(this,void 0),X(this,lt,new Uint8Array),X(this,ot,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Xd(e):e;X(this,lt,o1([j(this,lt,"f"),n]));const s=[];let a;for(;(a=c1(j(this,lt,"f"),j(this,ot,"f")))!=null;){if(a.carriage&&j(this,ot,"f")==null){X(this,ot,a.index);continue}if(j(this,ot,"f")!=null&&(a.index!==j(this,ot,"f")+1||a.carriage)){s.push(fm(j(this,lt,"f").subarray(0,j(this,ot,"f")-1))),X(this,lt,j(this,lt,"f").subarray(j(this,ot,"f"))),X(this,ot,null);continue}const i=j(this,ot,"f")!==null?a.preceding-1:a.preceding,r=fm(j(this,lt,"f").subarray(0,i));s.push(r),X(this,lt,j(this,lt,"f").subarray(a.index)),X(this,ot,null)}return s}flush(){return j(this,lt,"f").length?this.decode(`
`):[]}}lt=new WeakMap,ot=new WeakMap;mo.NEWLINE_CHARS=new Set([`
`,"\r"]);mo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function c1(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function u1(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Dl={off:0,error:200,warn:300,info:400,debug:500},hm=(t,e,n)=>{if(t){if(QS(Dl,t))return t;Ue(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Dl))}`)}};function Pa(){}function Ar(t,e,n){return!e||Dl[t]>Dl[n]?Pa:e[t].bind(e)}const d1={error:Pa,warn:Pa,info:Pa,debug:Pa};let mm=new WeakMap;function Ue(t){const e=t.logger,n=t.logLevel??"off";if(!e)return d1;const s=mm.get(e);if(s&&s[0]===n)return s[1];const a={error:Ar("error",e,n),warn:Ar("warn",e,n),info:Ar("info",e,n),debug:Ar("debug",e,n)};return mm.set(e,[n,a]),a}const es=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ga;class Bt{constructor(e,n,s){this.iterator=e,Ga.set(this,void 0),this.controller=n,X(this,Ga,s)}static fromSSEResponse(e,n,s){let a=!1;const i=s?Ue(s):console;async function*r(){if(a)throw new G("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let l=!1;try{for await(const o of f1(e,n))if(!l){if(o.data.startsWith("[DONE]")){l=!0;continue}if(o.event===null||!o.event.startsWith("thread.")){let u;try{u=JSON.parse(o.data)}catch(d){throw i.error("Could not parse message into JSON:",o.data),i.error("From chunk:",o.raw),d}if(u&&u.error)throw new Ge(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(o.data)}catch(d){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),d}if(o.event=="error")throw new Ge(void 0,u.error,u.message,void 0);yield{event:o.event,data:u}}}l=!0}catch(o){if(Eu(o))return;throw o}finally{l||n.abort()}}return new Bt(r,n,s)}static fromReadableStream(e,n,s){let a=!1;async function*i(){const l=new mo,o=hy(e);for await(const u of o)for(const d of l.decode(u))yield d;for(const u of l.flush())yield u}async function*r(){if(a)throw new G("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let l=!1;try{for await(const o of i())l||o&&(yield JSON.parse(o));l=!0}catch(o){if(Eu(o))return;throw o}finally{l||n.abort()}}return new Bt(r,n,s)}[(Ga=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=i=>({next:()=>{if(i.length===0){const r=s.next();e.push(r),n.push(r)}return i.shift()}});return[new Bt(()=>a(e),this.controller,j(this,Ga,"f")),new Bt(()=>a(n),this.controller,j(this,Ga,"f"))]}toReadableStream(){const e=this;let n;return dy({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:i}=await n.next();if(i)return s.close();const r=Xd(JSON.stringify(a)+`
`);s.enqueue(r)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*f1(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new G("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new G("Attempted to iterate over a response with no body");const n=new m1,s=new mo,a=hy(t.body);for await(const i of h1(a))for(const r of s.decode(i)){const l=n.decode(r);l&&(yield l)}for(const i of s.flush()){const r=n.decode(i);r&&(yield r)}}async function*h1(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Xd(n):n;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let i;for(;(i=u1(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class m1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=g1(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function g1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function vy(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:i}=e,r=await(async()=>{var f;if(e.options.stream)return Ue(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Bt.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),o=(f=l==null?void 0:l.split(";")[0])==null?void 0:f.trim();if((o==null?void 0:o.includes("application/json"))||(o==null?void 0:o.endsWith("+json"))){const h=await n.json();return _y(h,n)}return await n.text()})();return Ue(t).debug(`[${s}] response parsed`,es({retryOfRequestLogID:a,url:n.url,status:n.status,body:r,durationMs:Date.now()-i})),r}function _y(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ja;class go extends Promise{constructor(e,n,s=vy){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,Ja.set(this,void 0),X(this,Ja,e)}_thenUnwrap(e){return new go(j(this,Ja,"f"),this.responsePromise,async(n,s)=>_y(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(j(this,Ja,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ja=new WeakMap;var Tr;class xy{constructor(e,n,s,a){Tr.set(this,void 0),X(this,Tr,e),this.options=a,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new G("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await j(this,Tr,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Tr=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class p1 extends go{constructor(e,n,s){super(e,n,async(a,i)=>new s(a,i.response,await vy(a,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class po extends xy{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Se extends xy{constructor(e,n,s,a){super(e,n,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),n=(s=e[e.length-1])==null?void 0:s.id;return n?{...this.options,query:{...XS(this.options.query),after:n}}:null}}const wy=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _i(t,e,n){return wy(),new File(t,e??"unknown_file",n)}function Vr(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Sy=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",ps=async(t,e)=>({...t,body:await b1(t.body,e)}),gm=new WeakMap;function y1(t){const e=typeof t=="function"?t:t.fetch,n=gm.get(e);if(n)return n;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new a(i).text()}catch{return!0}})();return gm.set(e,s),s}const b1=async(t,e)=>{if(!await y1(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,a])=>Nu(n,s,a))),n},v1=t=>t instanceof Blob&&"name"in t,Nu=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,_i([await n.blob()],Vr(n)));else if(Sy(n))t.append(e,_i([await new Response(fy(n)).blob()],Vr(n)));else if(v1(n))t.append(e,n,Vr(n));else if(Array.isArray(n))await Promise.all(n.map(s=>Nu(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,a])=>Nu(t,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},jy=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",_1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&jy(t),x1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function w1(t,e,n){if(wy(),t=await t,_1(t))return t instanceof File?t:_i([await t.arrayBuffer()],t.name);if(x1(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),_i(await Ou(a),e,n)}const s=await Ou(t);if(e||(e=Vr(t)),!(n!=null&&n.type)){const a=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof a=="string"&&(n={...n,type:a})}return _i(s,e,n)}async function Ou(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(jy(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Sy(t))for await(const s of t)e.push(...await Ou(s));else{const s=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${s?`; constructor: ${s}`:""}${S1(t)}`)}return e}function S1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Q{constructor(e){this._client=e}}function Ey(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const pm=Object.freeze(Object.create(null)),j1=(t=Ey)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const i=[],r=n.reduce((d,f,h)=>{var w;/[?#]/.test(f)&&(a=!0);const m=s[h];let _=(a?encodeURIComponent:t)(""+m);return h!==s.length&&(m==null||typeof m=="object"&&m.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??pm)??pm))==null?void 0:w.toString))&&(_=m+"",i.push({start:d.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),d+f+(h===s.length?"":_)},""),l=r.split(/[?#]/,1)[0],o=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=o.exec(l))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((d,f)=>d.start-f.start),i.length>0){let d=0;const f=i.reduce((h,m)=>{const _=" ".repeat(m.start-d),w="^".repeat(m.length);return d=m.start+m.length,h+_+w},"");throw new G(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${r}
${f}`)}return r},U=j1(Ey);let Ay=class extends Q{list(e,n={},s){return this._client.getAPIList(U`/chat/completions/${e}/messages`,Se,{query:n,...s})}};function Ml(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Yd(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function ir(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function E1(t,e){return!e||!Ty(e)?{...t,choices:t.choices.map(n=>(Ny(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Qd(t,e)}function Qd(t,e){const n=t.choices.map(s=>{var a;if(s.finish_reason==="length")throw new cy;if(s.finish_reason==="content_filter")throw new uy;return Ny(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((a=s.message.tool_calls)==null?void 0:a.map(i=>T1(e,i)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?A1(e,s.message.content):null}}});return{...t,choices:n}}function A1(t,e){var n,s;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((s=t.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function T1(t,e){var s;const n=(s=t.tools)==null?void 0:s.find(a=>{var i;return Ml(a)&&((i=a.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ir(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function N1(t,e){var s;if(!t||!("tools"in t)||!t.tools)return!1;const n=(s=t.tools)==null?void 0:s.find(a=>{var i;return Ml(a)&&((i=a.function)==null?void 0:i.name)===e.function.name});return Ml(n)&&(ir(n)||(n==null?void 0:n.function.strict)||!1)}function Ty(t){var e;return Yd(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>ir(n)||n.type==="function"&&n.function.strict===!0))??!1}function Ny(t){for(const e of t||[])if(e.type!=="function")throw new G(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function O1(t){for(const e of t??[]){if(e.type!=="function")throw new G(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new G(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const $l=t=>(t==null?void 0:t.role)==="assistant",Oy=t=>(t==null?void 0:t.role)==="tool";var Ru,Ir,Kr,Za,Fa,Pr,Wa,Zt,ei,Ul,ql,Ls,Ry;class Vd{constructor(){Ru.add(this),this.controller=new AbortController,Ir.set(this,void 0),Kr.set(this,()=>{}),Za.set(this,()=>{}),Fa.set(this,void 0),Pr.set(this,()=>{}),Wa.set(this,()=>{}),Zt.set(this,{}),ei.set(this,!1),Ul.set(this,!1),ql.set(this,!1),Ls.set(this,!1),X(this,Ir,new Promise((e,n)=>{X(this,Kr,e,"f"),X(this,Za,n,"f")})),X(this,Fa,new Promise((e,n)=>{X(this,Pr,e,"f"),X(this,Wa,n,"f")})),j(this,Ir,"f").catch(()=>{}),j(this,Fa,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},j(this,Ru,"m",Ry).bind(this))},0)}_connected(){this.ended||(j(this,Kr,"f").call(this),this._emit("connect"))}get ended(){return j(this,ei,"f")}get errored(){return j(this,Ul,"f")}get aborted(){return j(this,ql,"f")}abort(){this.controller.abort()}on(e,n){return(j(this,Zt,"f")[e]||(j(this,Zt,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=j(this,Zt,"f")[e];if(!s)return this;const a=s.findIndex(i=>i.listener===n);return a>=0&&s.splice(a,1),this}once(e,n){return(j(this,Zt,"f")[e]||(j(this,Zt,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{X(this,Ls,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){X(this,Ls,!0),await j(this,Fa,"f")}_emit(e,...n){if(j(this,ei,"f"))return;e==="end"&&(X(this,ei,!0),j(this,Pr,"f").call(this));const s=j(this,Zt,"f")[e];if(s&&(j(this,Zt,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!j(this,Ls,"f")&&!(s!=null&&s.length)&&Promise.reject(a),j(this,Za,"f").call(this,a),j(this,Wa,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!j(this,Ls,"f")&&!(s!=null&&s.length)&&Promise.reject(a),j(this,Za,"f").call(this,a),j(this,Wa,"f").call(this,a),this._emit("end")}}_emitFinal(){}}Ir=new WeakMap,Kr=new WeakMap,Za=new WeakMap,Fa=new WeakMap,Pr=new WeakMap,Wa=new WeakMap,Zt=new WeakMap,ei=new WeakMap,Ul=new WeakMap,ql=new WeakMap,Ls=new WeakMap,Ru=new WeakSet,Ry=function(e){if(X(this,Ul,!0),e instanceof Error&&e.name==="AbortError"&&(e=new jt),e instanceof jt)return X(this,ql,!0),this._emit("abort",e);if(e instanceof G)return this._emit("error",e);if(e instanceof Error){const n=new G(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new G(String(e)))};function R1(t){return typeof t.parse=="function"}var Ve,Cu,zl,ku,Du,Mu,Cy,ky;const C1=10;class Dy extends Vd{constructor(){super(...arguments),Ve.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(s=e.choices[0])==null?void 0:s.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),Oy(e)&&e.content)this._emit("functionToolCallResult",e.content);else if($l(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new G("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),j(this,Ve,"m",Cu).call(this)}async finalMessage(){return await this.done(),j(this,Ve,"m",zl).call(this)}async finalFunctionToolCall(){return await this.done(),j(this,Ve,"m",ku).call(this)}async finalFunctionToolCallResult(){return await this.done(),j(this,Ve,"m",Du).call(this)}async totalUsage(){return await this.done(),j(this,Ve,"m",Mu).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=j(this,Ve,"m",zl).call(this);n&&this._emit("finalMessage",n);const s=j(this,Ve,"m",Cu).call(this);s&&this._emit("finalContent",s);const a=j(this,Ve,"m",ku).call(this);a&&this._emit("finalFunctionToolCall",a);const i=j(this,Ve,"m",Du).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(r=>r.usage)&&this._emit("totalUsage",j(this,Ve,"m",Mu).call(this))}async _createChatCompletion(e,n,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),j(this,Ve,"m",Cy).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Qd(i,n))}async _runChatCompletion(e,n,s){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){var m,_,w;const a="tool",{tool_choice:i="auto",stream:r,...l}=n,o=typeof i!="string"&&i.type==="function"&&((m=i==null?void 0:i.function)==null?void 0:m.name),{maxChatCompletions:u=C1}=s||{},d=n.tools.map(E=>{if(ir(E)){if(!E.$callback)throw new G("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:E.$callback,name:E.function.name,description:E.function.description||"",parameters:E.function.parameters,parse:E.$parseRaw,strict:!0}}}return E}),f={};for(const E of d)E.type==="function"&&(f[E.function.name||E.function.function.name]=E.function);const h="tools"in n?d.map(E=>E.type==="function"?{type:"function",function:{name:E.function.name||E.function.function.name,parameters:E.function.parameters,description:E.function.description,strict:E.function.strict}}:E):void 0;for(const E of n.messages)this._addMessage(E,!1);for(let E=0;E<u;++E){const p=(_=(await this._createChatCompletion(e,{...l,tool_choice:i,tools:h,messages:[...this.messages]},s)).choices[0])==null?void 0:_.message;if(!p)throw new G("missing message in ChatCompletion response");if(!((w=p.tool_calls)!=null&&w.length))return;for(const g of p.tool_calls){if(g.type!=="function")continue;const v=g.id,{name:A,arguments:O}=g.function,y=f[A];if(y){if(o&&o!==A){const C=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:a,tool_call_id:v,content:C});continue}}else{const C=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(f).map(x=>JSON.stringify(x)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:v,content:C});continue}let N;try{N=R1(y)?await y.parse(O):O}catch(C){const x=C instanceof Error?C.message:String(C);this._addMessage({role:a,tool_call_id:v,content:x});continue}const M=await y.function(N,this),R=j(this,Ve,"m",ky).call(this,M);if(this._addMessage({role:a,tool_call_id:v,content:R}),o)return}}}}Ve=new WeakSet,Cu=function(){return j(this,Ve,"m",zl).call(this).content??null},zl=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if($l(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new G("stream ended without producing a ChatCompletionMessage with role=assistant")},ku=function(){var e,n;for(let s=this.messages.length-1;s>=0;s--){const a=this.messages[s];if($l(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(n=a.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},Du=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Oy(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>{var a;return s.role==="assistant"&&((a=s.tool_calls)==null?void 0:a.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Mu=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Cy=function(e){if(e.n!=null&&e.n>1)throw new G("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ky=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Id extends Dy{static runTools(e,n,s){const a=new Id,i={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,i)),a}_addMessage(e,n=!0){super._addMessage(e,n),$l(e)&&e.content&&this._emit("content",e.content)}}const My=1,$y=2,Uy=4,qy=8,zy=16,By=32,Ly=64,Hy=128,Gy=256,Xy=Hy|Gy,Yy=zy|By|Xy|Ly,Qy=My|$y|Yy,Vy=Uy|qy,k1=Qy|Vy,Re={STR:My,NUM:$y,ARR:Uy,OBJ:qy,NULL:zy,BOOL:By,NAN:Ly,INFINITY:Hy,MINUS_INFINITY:Gy,INF:Xy,SPECIAL:Yy,ATOM:Qy,COLLECTION:Vy,ALL:k1};class D1 extends Error{}class M1 extends Error{}function $1(t,e=Re.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return U1(t.trim(),e)}const U1=(t,e)=>{const n=t.length;let s=0;const a=h=>{throw new D1(`${h} at position ${s}`)},i=h=>{throw new M1(`${h} at position ${s}`)},r=()=>(f(),s>=n&&a("Unexpected end of input"),t[s]==='"'?l():t[s]==="{"?o():t[s]==="["?u():t.substring(s,s+4)==="null"||Re.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||Re.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||Re.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||Re.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||Re.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||Re.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):d()),l=()=>{const h=s;let m=!1;for(s++;s<n&&(t[s]!=='"'||m&&t[s-1]==="\\");)m=t[s]==="\\"?!m:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(h,++s-Number(m)))}catch(_){i(String(_))}else if(Re.STR&e)try{return JSON.parse(t.substring(h,s-Number(m))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},o=()=>{s++,f();const h={};try{for(;t[s]!=="}";){if(f(),s>=n&&Re.OBJ&e)return h;const m=l();f(),s++;try{const _=r();Object.defineProperty(h,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Re.OBJ&e)return h;throw _}f(),t[s]===","&&s++}}catch{if(Re.OBJ&e)return h;a("Expected '}' at end of object")}return s++,h},u=()=>{s++;const h=[];try{for(;t[s]!=="]";)h.push(r()),f(),t[s]===","&&s++}catch{if(Re.ARR&e)return h;a("Expected ']' at end of array")}return s++,h},d=()=>{if(s===0){t==="-"&&Re.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Re.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(m))}}const h=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(Re.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(h,s))}catch{t.substring(h,s)==="-"&&Re.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(_){i(String(_))}}},f=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return r()},ym=t=>$1(t,Re.ALL^Re.NUM);var Ee,Pt,Rs,bn,mc,Nr,gc,pc,yc,Or,bc,bm;class zi extends Dy{constructor(e){super(),Ee.add(this),Pt.set(this,void 0),Rs.set(this,void 0),bn.set(this,void 0),X(this,Pt,e),X(this,Rs,[])}get currentChatCompletionSnapshot(){return j(this,bn,"f")}static fromReadableStream(e){const n=new zi(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const a=new zi(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,s){var r;super._createChatCompletion;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),j(this,Ee,"m",mc).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const l of i)j(this,Ee,"m",gc).call(this,l);if((r=i.controller.signal)!=null&&r.aborted)throw new jt;return this._addChatCompletion(j(this,Ee,"m",Or).call(this))}async _fromReadableStream(e,n){var r;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),j(this,Ee,"m",mc).call(this),this._connected();const a=Bt.fromReadableStream(e,this.controller);let i;for await(const l of a)i&&i!==l.id&&this._addChatCompletion(j(this,Ee,"m",Or).call(this)),j(this,Ee,"m",gc).call(this,l),i=l.id;if((r=a.controller.signal)!=null&&r.aborted)throw new jt;return this._addChatCompletion(j(this,Ee,"m",Or).call(this))}[(Pt=new WeakMap,Rs=new WeakMap,bn=new WeakMap,Ee=new WeakSet,mc=function(){this.ended||X(this,bn,void 0)},Nr=function(n){let s=j(this,Rs,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},j(this,Rs,"f")[n.index]=s,s)},gc=function(n){var a,i,r,l,o,u,d,f,h,m,_,w,E,b,p;if(this.ended)return;const s=j(this,Ee,"m",bm).call(this,n);this._emit("chunk",n,s);for(const g of n.choices){const v=s.choices[g.index];g.delta.content!=null&&((a=v.message)==null?void 0:a.role)==="assistant"&&((i=v.message)!=null&&i.content)&&(this._emit("content",g.delta.content,v.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:v.message.content,parsed:v.message.parsed})),g.delta.refusal!=null&&((r=v.message)==null?void 0:r.role)==="assistant"&&((l=v.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:v.message.refusal}),((o=g.logprobs)==null?void 0:o.content)!=null&&((u=v.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=g.logprobs)==null?void 0:d.content,snapshot:((f=v.logprobs)==null?void 0:f.content)??[]}),((h=g.logprobs)==null?void 0:h.refusal)!=null&&((m=v.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(_=g.logprobs)==null?void 0:_.refusal,snapshot:((w=v.logprobs)==null?void 0:w.refusal)??[]});const A=j(this,Ee,"m",Nr).call(this,v);v.finish_reason&&(j(this,Ee,"m",yc).call(this,v),A.current_tool_call_index!=null&&j(this,Ee,"m",pc).call(this,v,A.current_tool_call_index));for(const O of g.delta.tool_calls??[])A.current_tool_call_index!==O.index&&(j(this,Ee,"m",yc).call(this,v),A.current_tool_call_index!=null&&j(this,Ee,"m",pc).call(this,v,A.current_tool_call_index)),A.current_tool_call_index=O.index;for(const O of g.delta.tool_calls??[]){const y=(E=v.message.tool_calls)==null?void 0:E[O.index];y!=null&&y.type&&((y==null?void 0:y.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(b=y.function)==null?void 0:b.name,index:O.index,arguments:y.function.arguments,parsed_arguments:y.function.parsed_arguments,arguments_delta:((p=O.function)==null?void 0:p.arguments)??""}):(y==null||y.type,void 0))}}},pc=function(n,s){var r,l,o;if(j(this,Ee,"m",Nr).call(this,n).done_tool_calls.has(s))return;const i=(r=n.message.tool_calls)==null?void 0:r[s];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(o=(l=j(this,Pt,"f"))==null?void 0:l.tools)==null?void 0:o.find(d=>Ml(d)&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:s,arguments:i.function.arguments,parsed_arguments:ir(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},yc=function(n){var a,i;const s=j(this,Ee,"m",Nr).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=j(this,Ee,"m",bc).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(a=n.logprobs)!=null&&a.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Or=function(){if(this.ended)throw new G("stream has ended, this shouldn't happen");const n=j(this,bn,"f");if(!n)throw new G("request ended without sending any chunks");return X(this,bn,void 0),X(this,Rs,[]),q1(n,j(this,Pt,"f"))},bc=function(){var s;const n=(s=j(this,Pt,"f"))==null?void 0:s.response_format;return Yd(n)?n:null},bm=function(n){var s,a,i,r;let l=j(this,bn,"f");const{choices:o,...u}=n;l?Object.assign(l,u):l=X(this,bn,{...u,choices:[]});for(const{delta:d,finish_reason:f,index:h,logprobs:m=null,..._}of n.choices){let w=l.choices[h];if(w||(w=l.choices[h]={finish_reason:f,index:h,message:{},logprobs:m,..._}),m)if(!w.logprobs)w.logprobs=Object.assign({},m);else{const{content:O,refusal:y,...N}=m;Object.assign(w.logprobs,N),O&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...O)),y&&((a=w.logprobs).refusal??(a.refusal=[]),w.logprobs.refusal.push(...y))}if(f&&(w.finish_reason=f,j(this,Pt,"f")&&Ty(j(this,Pt,"f")))){if(f==="length")throw new cy;if(f==="content_filter")throw new uy}if(Object.assign(w,_),!d)continue;const{content:E,refusal:b,function_call:p,role:g,tool_calls:v,...A}=d;if(Object.assign(w.message,A),b&&(w.message.refusal=(w.message.refusal||"")+b),g&&(w.message.role=g),p&&(w.message.function_call?(p.name&&(w.message.function_call.name=p.name),p.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=p.arguments)):w.message.function_call=p),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&j(this,Ee,"m",bc).call(this)&&(w.message.parsed=ym(w.message.content))),v){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:O,id:y,type:N,function:M,...R}of v){const C=(r=w.message.tool_calls)[O]??(r[O]={});Object.assign(C,R),y&&(C.id=y),N&&(C.type=N),M&&(C.function??(C.function={name:M.name??"",arguments:""})),M!=null&&M.name&&(C.function.name=M.name),M!=null&&M.arguments&&(C.function.arguments+=M.arguments,N1(j(this,Pt,"f"),C)&&(C.function.parsed_arguments=ym(C.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",a=>{const i=n.shift();i?i.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,r)=>n.push({resolve:i,reject:r})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Bt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function q1(t,e){const{id:n,choices:s,created:a,model:i,system_fingerprint:r,...l}=t,o={...l,id:n,choices:s.map(({message:u,finish_reason:d,index:f,logprobs:h,...m})=>{if(!d)throw new G(`missing finish_reason for choice ${f}`);const{content:_=null,function_call:w,tool_calls:E,...b}=u,p=u.role;if(!p)throw new G(`missing role for choice ${f}`);if(w){const{arguments:g,name:v}=w;if(g==null)throw new G(`missing function_call.arguments for choice ${f}`);if(!v)throw new G(`missing function_call.name for choice ${f}`);return{...m,message:{content:_,function_call:{arguments:g,name:v},role:p,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:h}}return E?{...m,index:f,finish_reason:d,logprobs:h,message:{...b,role:p,content:_,refusal:u.refusal??null,tool_calls:E.map((g,v)=>{const{function:A,type:O,id:y,...N}=g,{arguments:M,name:R,...C}=A||{};if(y==null)throw new G(`missing choices[${f}].tool_calls[${v}].id
${Rr(t)}`);if(O==null)throw new G(`missing choices[${f}].tool_calls[${v}].type
${Rr(t)}`);if(R==null)throw new G(`missing choices[${f}].tool_calls[${v}].function.name
${Rr(t)}`);if(M==null)throw new G(`missing choices[${f}].tool_calls[${v}].function.arguments
${Rr(t)}`);return{...N,id:y,type:O,function:{...C,name:R,arguments:M}}})}}:{...m,message:{...b,content:_,role:p,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:h}}),created:a,model:i,object:"chat.completion",...r?{system_fingerprint:r}:{}};return E1(o,e)}function Rr(t){return JSON.stringify(t)}class Bl extends zi{static fromReadableStream(e){const n=new Bl(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const a=new Bl(n),i={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,i)),a}}let Kd=class extends Q{constructor(){super(...arguments),this.messages=new Ay(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(U`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(U`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Se,{query:e,...n})}delete(e,n){return this._client.delete(U`/chat/completions/${e}`,n)}parse(e,n){return O1(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>Qd(s,e))}runTools(e,n){return e.stream?Bl.runTools(this._client,e,n):Id.runTools(this._client,e,n)}stream(e,n){return zi.createChatCompletion(this._client,e,n)}};Kd.Messages=Ay;class Pd extends Q{constructor(){super(...arguments),this.completions=new Kd(this._client)}}Pd.Completions=Kd;const Iy=Symbol("brand.privateNullableHeaders");function*z1(t){if(!t)return;if(Iy in t){const{values:s,nulls:a}=t;yield*s.entries();for(const i of a)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():sm(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const i=sm(s[1])?s[1]:[s[1]];let r=!1;for(const l of i)l!==void 0&&(e&&!r&&(r=!0,yield[a,null]),yield[a,l])}}const H=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[i,r]of z1(s)){const l=i.toLowerCase();a.has(l)||(e.delete(i),a.add(l)),r===null?(e.delete(i),n.add(l)):(e.append(i,r),n.delete(l))}}return{[Iy]:!0,values:e,nulls:n}};class Ky extends Q{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:H([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class Py extends Q{create(e,n){return this._client.post("/audio/transcriptions",ps({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Jy extends Q{create(e,n){return this._client.post("/audio/translations",ps({body:e,...n,__metadata:{model:e.model}},this._client))}}class rr extends Q{constructor(){super(...arguments),this.transcriptions=new Py(this._client),this.translations=new Jy(this._client),this.speech=new Ky(this._client)}}rr.Transcriptions=Py;rr.Translations=Jy;rr.Speech=Ky;class Zy extends Q{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(U`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Se,{query:e,...n})}cancel(e,n){return this._client.post(U`/batches/${e}/cancel`,n)}}class Fy extends Q{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/assistants/${e}`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Se,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class Wy extends Q{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class eb extends Q{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class yo extends Q{constructor(){super(...arguments),this.sessions=new Wy(this._client),this.transcriptionSessions=new eb(this._client)}}yo.Sessions=Wy;yo.TranscriptionSessions=eb;class tb extends Q{create(e,n,s){return this._client.post(U`/threads/${e}/messages`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(U`/threads/${a}/messages/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:a,...i}=n;return this._client.post(U`/threads/${a}/messages/${e}`,{body:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/threads/${e}/messages`,Se,{query:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{thread_id:a}=n;return this._client.delete(U`/threads/${a}/messages/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class nb extends Q{retrieve(e,n,s){const{thread_id:a,run_id:i,...r}=n;return this._client.get(U`/threads/${a}/runs/${i}/steps/${e}`,{query:r,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n,s){const{thread_id:a,...i}=n;return this._client.getAPIList(U`/threads/${a}/runs/${e}/steps`,Se,{query:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const B1=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let a=0;a<n;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var vc={};const Cs=t=>{var e,n,s,a;if(typeof globalThis.process<"u")return((e=vc==null?void 0:vc[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(s=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:s.call(n,t))==null?void 0:a.trim()};var ze,ss,$u,Ut,Jr,Ot,as,ea,ns,Ll,ct,Zr,Fr,xi,ti,ni,vm,_m,xm,wm,Sm,jm,Em;class wi extends Vd{constructor(){super(...arguments),ze.add(this),$u.set(this,[]),Ut.set(this,{}),Jr.set(this,{}),Ot.set(this,void 0),as.set(this,void 0),ea.set(this,void 0),ns.set(this,void 0),Ll.set(this,void 0),ct.set(this,void 0),Zr.set(this,void 0),Fr.set(this,void 0),xi.set(this,void 0)}[($u=new WeakMap,Ut=new WeakMap,Jr=new WeakMap,Ot=new WeakMap,as=new WeakMap,ea=new WeakMap,ns=new WeakMap,Ll=new WeakMap,ct=new WeakMap,Zr=new WeakMap,Fr=new WeakMap,xi=new WeakMap,ze=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const i=n.shift();i?i.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,r)=>n.push({resolve:i,reject:r})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ss;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Bt.fromReadableStream(e,this.controller);for await(const r of a)j(this,ze,"m",ti).call(this,r);if((i=a.controller.signal)!=null&&i.aborted)throw new jt;return this._addRun(j(this,ze,"m",ni).call(this))}toReadableStream(){return new Bt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,a){const i=new ss;return i._run(()=>i._runToolAssistantStream(e,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,s,a){var o;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const r={...s,stream:!0},l=await e.submitToolOutputs(n,r,{...a,signal:this.controller.signal});this._connected();for await(const u of l)j(this,ze,"m",ti).call(this,u);if((o=l.controller.signal)!=null&&o.aborted)throw new jt;return this._addRun(j(this,ze,"m",ni).call(this))}static createThreadAssistantStream(e,n,s){const a=new ss;return a._run(()=>a._threadAssistantStream(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,s,a){const i=new ss;return i._run(()=>i._runAssistantStream(e,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return j(this,Zr,"f")}currentRun(){return j(this,Fr,"f")}currentMessageSnapshot(){return j(this,Ot,"f")}currentRunStepSnapshot(){return j(this,xi,"f")}async finalRunSteps(){return await this.done(),Object.values(j(this,Ut,"f"))}async finalMessages(){return await this.done(),Object.values(j(this,Jr,"f"))}async finalRun(){if(await this.done(),!j(this,as,"f"))throw Error("Final run was not received.");return j(this,as,"f")}async _createThreadAssistantStream(e,n,s){var l;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},r=await e.createAndRun(i,{...s,signal:this.controller.signal});this._connected();for await(const o of r)j(this,ze,"m",ti).call(this,o);if((l=r.controller.signal)!=null&&l.aborted)throw new jt;return this._addRun(j(this,ze,"m",ni).call(this))}async _createAssistantStream(e,n,s,a){var o;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const r={...s,stream:!0},l=await e.create(n,r,{...a,signal:this.controller.signal});this._connected();for await(const u of l)j(this,ze,"m",ti).call(this,u);if((o=l.controller.signal)!=null&&o.aborted)throw new jt;return this._addRun(j(this,ze,"m",ni).call(this))}static accumulateDelta(e,n){for(const[s,a]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let i=e[s];if(i==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof i=="string"&&typeof a=="string")i+=a;else if(typeof i=="number"&&typeof a=="number")i+=a;else if(dc(i)&&dc(a))i=this.accumulateDelta(i,a);else if(Array.isArray(i)&&Array.isArray(a)){if(i.every(r=>typeof r=="string"||typeof r=="number")){i.push(...a);continue}for(const r of a){if(!dc(r))throw new Error(`Expected array delta entry to be an object but got: ${r}`);const l=r.index;if(l==null)throw console.error(r),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const o=i[l];o==null?i.push(r):i[l]=this.accumulateDelta(o,r)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${i}`);e[s]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,a){return await this._createAssistantStream(n,e,s,a)}async _runToolAssistantStream(e,n,s,a){return await this._createToolAssistantStream(n,e,s,a)}}ss=wi,ti=function(e){if(!this.ended)switch(X(this,Zr,e),j(this,ze,"m",xm).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":j(this,ze,"m",Em).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":j(this,ze,"m",_m).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":j(this,ze,"m",vm).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ni=function(){if(this.ended)throw new G("stream has ended, this shouldn't happen");if(!j(this,as,"f"))throw Error("Final run has not been received");return j(this,as,"f")},vm=function(e){const[n,s]=j(this,ze,"m",Sm).call(this,e,j(this,Ot,"f"));X(this,Ot,n),j(this,Jr,"f")[n.id]=n;for(const a of s){const i=n.content[a.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let i=a.text,r=n.content[a.index];if(r&&r.type=="text")this._emit("textDelta",i,r.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=j(this,ea,"f")){if(j(this,ns,"f"))switch(j(this,ns,"f").type){case"text":this._emit("textDone",j(this,ns,"f").text,j(this,Ot,"f"));break;case"image_file":this._emit("imageFileDone",j(this,ns,"f").image_file,j(this,Ot,"f"));break}X(this,ea,a.index)}X(this,ns,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(j(this,ea,"f")!==void 0){const a=e.data.content[j(this,ea,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,j(this,Ot,"f"));break;case"text":this._emit("textDone",a.text,j(this,Ot,"f"));break}}j(this,Ot,"f")&&this._emit("messageDone",e.data),X(this,Ot,void 0)}},_m=function(e){const n=j(this,ze,"m",wm).call(this,e);switch(X(this,xi,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of s.step_details.tool_calls)i.index==j(this,Ll,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(j(this,ct,"f")&&this._emit("toolCallDone",j(this,ct,"f")),X(this,Ll,i.index),X(this,ct,n.step_details.tool_calls[i.index]),j(this,ct,"f")&&this._emit("toolCallCreated",j(this,ct,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":X(this,xi,void 0),e.data.step_details.type=="tool_calls"&&j(this,ct,"f")&&(this._emit("toolCallDone",j(this,ct,"f")),X(this,ct,void 0)),this._emit("runStepDone",e.data,n);break}},xm=function(e){j(this,$u,"f").push(e),this._emit("event",e)},wm=function(e){switch(e.event){case"thread.run.step.created":return j(this,Ut,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=j(this,Ut,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=ss.accumulateDelta(n,s.delta);j(this,Ut,"f")[e.data.id]=a}return j(this,Ut,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":j(this,Ut,"f")[e.data.id]=e.data;break}if(j(this,Ut,"f")[e.data.id])return j(this,Ut,"f")[e.data.id];throw new Error("No snapshot available")},Sm=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const i of a.delta.content)if(i.index in n.content){let r=n.content[i.index];n.content[i.index]=j(this,ze,"m",jm).call(this,i,r)}else n.content[i.index]=i,s.push(i);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},jm=function(e,n){return ss.accumulateDelta(n,e)},Em=function(e){switch(X(this,Fr,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":X(this,as,e.data),j(this,ct,"f")&&(this._emit("toolCallDone",j(this,ct,"f")),X(this,ct,void 0));break}};let Jd=class extends Q{constructor(){super(...arguments),this.steps=new nb(this._client)}create(e,n,s){const{include:a,...i}=n;return this._client.post(U`/threads/${e}/runs`,{query:{include:a},body:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:a}=n;return this._client.get(U`/threads/${a}/runs/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:a,...i}=n;return this._client.post(U`/threads/${a}/runs/${e}`,{body:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/threads/${e}/runs`,Se,{query:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{thread_id:a}=n;return this._client.post(U`/threads/${a}/runs/${e}/cancel`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,n,s){return wi.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){var i;const a=H([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=s==null?void 0:s.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:r,response:l}=await this.retrieve(e,n,{...s,headers:{...s==null?void 0:s.headers,...a}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const u=l.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await ar(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(e,n,s){return wi.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:a,...i}=n;return this._client.post(U`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const a=await this.submitToolOutputs(e,n,s);return await this.poll(a.id,n,s)}submitToolOutputsStream(e,n,s){return wi.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};Jd.Steps=nb;class bo extends Q{constructor(){super(...arguments),this.runs=new Jd(this._client),this.messages=new tb(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/threads/${e}`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n){return this._client.delete(U`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return wi.createThreadAssistantStream(e,this._client.beta.threads,n)}}bo.Runs=Jd;bo.Messages=tb;class lr extends Q{constructor(){super(...arguments),this.realtime=new yo(this._client),this.assistants=new Fy(this._client),this.threads=new bo(this._client)}}lr.Realtime=yo;lr.Assistants=Fy;lr.Threads=bo;class sb extends Q{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ab extends Q{retrieve(e,n,s){const{container_id:a}=n;return this._client.get(U`/containers/${a}/files/${e}/content`,{...s,headers:H([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let Zd=class extends Q{constructor(){super(...arguments),this.content=new ab(this._client)}create(e,n,s){return this._client.post(U`/containers/${e}/files`,ps({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:a}=n;return this._client.get(U`/containers/${a}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(U`/containers/${e}/files`,Se,{query:n,...s})}delete(e,n,s){const{container_id:a}=n;return this._client.delete(U`/containers/${a}/files/${e}`,{...s,headers:H([{Accept:"*/*"},s==null?void 0:s.headers])})}};Zd.Content=ab;class Fd extends Q{constructor(){super(...arguments),this.files=new Zd(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(U`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Se,{query:e,...n})}delete(e,n){return this._client.delete(U`/containers/${e}`,{...n,headers:H([{Accept:"*/*"},n==null?void 0:n.headers])})}}Fd.Files=Zd;class ib extends Q{create(e,n){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&Ue(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return s?i:(Ue(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(r=>(r&&r.data&&r.data.forEach(l=>{const o=l.embedding;l.embedding=B1(o)}),r)))}}class rb extends Q{retrieve(e,n,s){const{eval_id:a,run_id:i}=n;return this._client.get(U`/evals/${a}/runs/${i}/output_items/${e}`,s)}list(e,n,s){const{eval_id:a,...i}=n;return this._client.getAPIList(U`/evals/${a}/runs/${e}/output_items`,Se,{query:i,...s})}}class Wd extends Q{constructor(){super(...arguments),this.outputItems=new rb(this._client)}create(e,n,s){return this._client.post(U`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:a}=n;return this._client.get(U`/evals/${a}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(U`/evals/${e}/runs`,Se,{query:n,...s})}delete(e,n,s){const{eval_id:a}=n;return this._client.delete(U`/evals/${a}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:a}=n;return this._client.post(U`/evals/${a}/runs/${e}`,s)}}Wd.OutputItems=rb;class ef extends Q{constructor(){super(...arguments),this.runs=new Wd(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(U`/evals/${e}`,n)}update(e,n,s){return this._client.post(U`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Se,{query:e,...n})}delete(e,n){return this._client.delete(U`/evals/${e}`,n)}}ef.Runs=Wd;let lb=class extends Q{create(e,n){return this._client.post("/files",ps({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Se,{query:e,...n})}delete(e,n){return this._client.delete(U`/files/${e}`,n)}content(e,n){return this._client.get(U`/files/${e}/content`,{...n,headers:H([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),i=Date.now();let r=await this.retrieve(e);for(;!r.status||!a.has(r.status);)if(await ar(n),r=await this.retrieve(e),Date.now()-i>s)throw new Gd({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return r}};class ob extends Q{}let cb=class extends Q{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class tf extends Q{constructor(){super(...arguments),this.graders=new cb(this._client)}}tf.Graders=cb;class ub extends Q{create(e,n,s){return this._client.getAPIList(U`/fine_tuning/checkpoints/${e}/permissions`,po,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(U`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(U`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let nf=class extends Q{constructor(){super(...arguments),this.permissions=new ub(this._client)}};nf.Permissions=ub;class db extends Q{list(e,n={},s){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/checkpoints`,Se,{query:n,...s})}}class sf extends Q{constructor(){super(...arguments),this.checkpoints=new db(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(U`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Se,{query:e,...n})}cancel(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/events`,Se,{query:n,...s})}pause(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/resume`,n)}}sf.Checkpoints=db;class Ra extends Q{constructor(){super(...arguments),this.methods=new ob(this._client),this.jobs=new sf(this._client),this.checkpoints=new nf(this._client),this.alpha=new tf(this._client)}}Ra.Methods=ob;Ra.Jobs=sf;Ra.Checkpoints=nf;Ra.Alpha=tf;class fb extends Q{}class af extends Q{constructor(){super(...arguments),this.graderModels=new fb(this._client)}}af.GraderModels=fb;class hb extends Q{createVariation(e,n){return this._client.post("/images/variations",ps({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ps({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class mb extends Q{retrieve(e,n){return this._client.get(U`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",po,e)}delete(e,n){return this._client.delete(U`/models/${e}`,n)}}class gb extends Q{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function L1(t,e){return!e||!G1(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:pb(t,e)}function pb(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:Q1(e,a)};if(a.type==="message"){const i=a.content.map(r=>r.type==="output_text"?{...r,parsed:H1(e,r.text)}:r);return{...a,content:i}}return a}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Uu(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const i of a.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),s}function H1(t,e){var n,s,a,i;return((s=(n=t.text)==null?void 0:n.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((a=t.text)==null?void 0:a.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function G1(t){var e;return!!Yd((e=t.text)==null?void 0:e.format)}function X1(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Y1(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Q1(t,e){const n=Y1(t.tools??[],e.name);return{...e,...e,parsed_arguments:X1(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Uu(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var ks,Cr,vn,kr,Am,Tm,Nm,Om;class rf extends Vd{constructor(e){super(),ks.add(this),Cr.set(this,void 0),vn.set(this,void 0),kr.set(this,void 0),X(this,Cr,e)}static createResponse(e,n,s){const a=new rf(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,s){var l;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),j(this,ks,"m",Am).call(this);let i,r=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),r=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const o of i)j(this,ks,"m",Tm).call(this,o,r);if((l=i.controller.signal)!=null&&l.aborted)throw new jt;return j(this,ks,"m",Nm).call(this)}[(Cr=new WeakMap,vn=new WeakMap,kr=new WeakMap,ks=new WeakSet,Am=function(){this.ended||X(this,vn,void 0)},Tm=function(n,s){if(this.ended)return;const a=(r,l)=>{(s==null||l.sequence_number>s)&&this._emit(r,l)},i=j(this,ks,"m",Om).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const r=i.output[n.output_index];if(!r)throw new G(`missing output at index ${n.output_index}`);if(r.type==="message"){const l=r.content[n.content_index];if(!l)throw new G(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new G(`expected content to be 'output_text', got ${l.type}`);a("response.output_text.delta",{...n,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const r=i.output[n.output_index];if(!r)throw new G(`missing output at index ${n.output_index}`);r.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:r.arguments});break}default:a(n.type,n);break}},Nm=function(){if(this.ended)throw new G("stream has ended, this shouldn't happen");const n=j(this,vn,"f");if(!n)throw new G("request ended without sending any events");X(this,vn,void 0);const s=V1(n,j(this,Cr,"f"));return X(this,kr,s),s},Om=function(n){let s=j(this,vn,"f");if(!s){if(n.type!=="response.created")throw new G(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=X(this,vn,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const a=s.output[n.output_index];if(!a)throw new G(`missing output at index ${n.output_index}`);a.type==="message"&&a.content.push(n.part);break}case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new G(`missing output at index ${n.output_index}`);if(a.type==="message"){const i=a.content[n.content_index];if(!i)throw new G(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new G(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new G(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.completed":{X(this,vn,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",a=>{const i=n.shift();i?i.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),this.on("error",a=>{s=!0;for(const i of n)i.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,r)=>n.push({resolve:i,reject:r})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=j(this,kr,"f");if(!e)throw new G("stream ended without producing a ChatCompletion");return e}}function V1(t,e){return L1(t,e)}class yb extends Q{list(e,n={},s){return this._client.getAPIList(U`/responses/${e}/input_items`,Se,{query:n,...s})}}class lf extends Q{constructor(){super(...arguments),this.inputItems=new yb(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Uu(s),s))}retrieve(e,n={},s){return this._client.get(U`/responses/${e}`,{query:n,...s,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&Uu(a),a))}delete(e,n){return this._client.delete(U`/responses/${e}`,{...n,headers:H([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>pb(s,e))}stream(e,n){return rf.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(U`/responses/${e}/cancel`,n)}}lf.InputItems=yb;class bb extends Q{create(e,n,s){return this._client.post(U`/uploads/${e}/parts`,ps({body:n,...s},this._client))}}class of extends Q{constructor(){super(...arguments),this.parts=new bb(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(U`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(U`/uploads/${e}/complete`,{body:n,...s})}}of.Parts=bb;const I1=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class vb extends Q{create(e,n,s){return this._client.post(U`/vector_stores/${e}/file_batches`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(U`/vector_stores/${a}/file_batches/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{vector_store_id:a}=n;return this._client.post(U`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n);return await this.poll(e,a.id,s)}listFiles(e,n,s){const{vector_store_id:a,...i}=n;return this._client.getAPIList(U`/vector_stores/${a}/file_batches/${e}/files`,Se,{query:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,n,s){var i;const a=H([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=s==null?void 0:s.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:r,response:l}=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse();switch(r.status){case"in_progress":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const u=l.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await ar(o);break;case"failed":case"cancelled":case"completed":return r}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(a==null?void 0:a.maxConcurrency)??5,r=Math.min(i,n.length),l=this._client,o=n.values(),u=[...s];async function d(h){for(let m of h){const _=await l.files.create({file:m,purpose:"assistants"},a);u.push(_.id)}}const f=Array(r).fill(o).map(d);return await I1(f),await this.createAndPoll(e,{file_ids:u})}}class _b extends Q{create(e,n,s){return this._client.post(U`/vector_stores/${e}/files`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:a}=n;return this._client.get(U`/vector_stores/${a}/files/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{vector_store_id:a,...i}=n;return this._client.post(U`/vector_stores/${a}/files/${e}`,{body:i,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/vector_stores/${e}/files`,Se,{query:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{vector_store_id:a}=n;return this._client.delete(U`/vector_stores/${a}/files/${e}`,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const a=await this.create(e,n,s);return await this.poll(e,a.id,s)}async poll(e,n,s){var i;const a=H([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=s==null?void 0:s.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const r=await this.retrieve(n,{vector_store_id:e},{...s,headers:a}).withResponse(),l=r.data;switch(l.status){case"in_progress":let o=5e3;if(s!=null&&s.pollIntervalMs)o=s.pollIntervalMs;else{const u=r.response.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await ar(o);break;case"failed":case"completed":return l}}}async upload(e,n,s){const a=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,n,s){const a=await this.upload(e,n,s);return await this.poll(e,a.id,s)}content(e,n,s){const{vector_store_id:a}=n;return this._client.getAPIList(U`/vector_stores/${a}/files/${e}/content`,po,{...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class vo extends Q{constructor(){super(...arguments),this.files=new _b(this._client),this.fileBatches=new vb(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/vector_stores/${e}`,{body:n,...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Se,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,s){return this._client.getAPIList(U`/vector_stores/${e}/search`,po,{body:n,method:"post",...s,headers:H([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}vo.Files=_b;vo.FileBatches=vb;var Hs,xb,Wr;class wb extends Q{constructor(){super(...arguments),Hs.add(this)}async unwrap(e,n,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,n,s,a),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");j(this,Hs,"m",xb).call(this,s);const i=H([n]).values,r=j(this,Hs,"m",Wr).call(this,i,"webhook-signature"),l=j(this,Hs,"m",Wr).call(this,i,"webhook-timestamp"),o=j(this,Hs,"m",Wr).call(this,i,"webhook-id"),u=parseInt(l,10);if(isNaN(u))throw new Ka("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-u>a)throw new Ka("Webhook timestamp is too old");if(u>d+a)throw new Ka("Webhook timestamp is too new");const f=r.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),h=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),m=o?`${o}.${l}.${e}`:`${l}.${e}`,_=await crypto.subtle.importKey("raw",h,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of f)try{const E=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",_,E,new TextEncoder().encode(m)))return}catch{continue}throw new Ka("The given webhook signature does not match the expected signature")}}Hs=new WeakSet,xb=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Wr=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var qu,cf,el,Sb;class W{constructor({baseURL:e=Cs("OPENAI_BASE_URL"),apiKey:n=Cs("OPENAI_API_KEY"),organization:s=Cs("OPENAI_ORG_ID")??null,project:a=Cs("OPENAI_PROJECT_ID")??null,webhookSecret:i=Cs("OPENAI_WEBHOOK_SECRET")??null,...r}={}){if(qu.add(this),el.set(this,void 0),this.completions=new sb(this),this.chat=new Pd(this),this.embeddings=new ib(this),this.files=new lb(this),this.images=new hb(this),this.audio=new rr(this),this.moderations=new gb(this),this.models=new mb(this),this.fineTuning=new Ra(this),this.graders=new af(this),this.vectorStores=new vo(this),this.webhooks=new wb(this),this.beta=new lr(this),this.batches=new Zy(this),this.uploads=new of(this),this.responses=new lf(this),this.evals=new ef(this),this.containers=new Fd(this),n===void 0)throw new G("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const l={apiKey:n,organization:s,project:a,webhookSecret:i,...r,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&KS())throw new G(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??cf.DEFAULT_TIMEOUT,this.logger=l.logger??console;const o="warn";this.logLevel=o,this.logLevel=hm(l.logLevel,"ClientOptions.logLevel",this)??hm(Cs("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??o,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??WS(),X(this,el,t1),this._options=l,this.apiKey=n,this.organization=s,this.project=a,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return H([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return l1(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Bs}`}defaultIdempotencyKey(){return`stainless-node-retry-${ey()}`}makeStatusError(e,n,s,a){return Ge.generate(e,n,s,a)}buildURL(e,n,s){const a=!j(this,qu,"m",Sb).call(this)&&s||this.baseURL,i=GS(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return YS(r)||(n={...r,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new go(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var b,p;const a=await e,i=a.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(a);const{req:r,url:l,timeout:o}=await this.buildRequest(a,{retryCount:i-n});await this.prepareRequest(r,{url:l,options:a});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=s===void 0?"":`, retryOf: ${s}`,f=Date.now();if(Ue(this).debug(`[${u}] sending request`,es({retryOfRequestLogID:s,method:a.method,url:l,options:a,headers:r.headers})),(b=a.signal)!=null&&b.aborted)throw new jt;const h=new AbortController,m=await this.fetchWithTimeout(l,r,o,h).catch(Au),_=Date.now();if(m instanceof Error){const g=`retrying, ${n} attempts remaining`;if((p=a.signal)!=null&&p.aborted)throw new jt;const v=Eu(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(n)return Ue(this).info(`[${u}] connection ${v?"timed out":"failed"} - ${g}`),Ue(this).debug(`[${u}] connection ${v?"timed out":"failed"} (${g})`,es({retryOfRequestLogID:s,url:l,durationMs:_-f,message:m.message})),this.retryRequest(a,n,s??u);throw Ue(this).info(`[${u}] connection ${v?"timed out":"failed"} - error; no more retries left`),Ue(this).debug(`[${u}] connection ${v?"timed out":"failed"} (error; no more retries left)`,es({retryOfRequestLogID:s,url:l,durationMs:_-f,message:m.message})),v?new Gd:new ho({cause:m})}const w=[...m.headers.entries()].filter(([g])=>g==="x-request-id").map(([g,v])=>", "+g+": "+JSON.stringify(v)).join(""),E=`[${u}${d}${w}] ${r.method} ${l} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${_-f}ms`;if(!m.ok){const g=await this.shouldRetry(m);if(n&&g){const M=`retrying, ${n} attempts remaining`;return await e1(m.body),Ue(this).info(`${E} - ${M}`),Ue(this).debug(`[${u}] response error (${M})`,es({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),this.retryRequest(a,n,s??u,m.headers)}const v=g?"error; no more retries left":"error; not retryable";Ue(this).info(`${E} - ${v}`);const A=await m.text().catch(M=>Au(M).message),O=IS(A),y=O?void 0:A;throw Ue(this).debug(`[${u}] response error (${v})`,es({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,message:y,durationMs:Date.now()-f})),this.makeStatusError(m.status,O,y,m.headers)}return Ue(this).info(E),Ue(this).debug(`[${u}] response start`,es({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),{response:m,options:a,controller:h,requestLogID:u,retryOfRequestLogID:s,startTime:f}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new p1(this,s,e)}async fetchWithTimeout(e,n,s,a){const{signal:i,method:r,...l}=n||{};i&&i.addEventListener("abort",()=>a.abort());const o=setTimeout(()=>a.abort(),s),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,d={signal:a.signal,...u?{duplex:"half"}:{},method:"GET",...l};r&&(d.method=r.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(o)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){let i;const r=a==null?void 0:a.get("retry-after-ms");if(r){const o=parseFloat(r);Number.isNaN(o)||(i=o)}const l=a==null?void 0:a.get("retry-after");if(l&&!i){const o=parseFloat(l);Number.isNaN(o)?i=Date.parse(l)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await ar(i),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,r=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return r*l*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:a,path:i,query:r,defaultBaseURL:l}=s,o=this.buildURL(i,r,l);"timeout"in s&&VS("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:s}),f=await this.buildHeaders({options:e,method:a,bodyHeaders:u,retryCount:n});return{req:{method:a,headers:f,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...s.fetchOptions??{}},url:o,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const r=H([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...FS(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(r),r.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=H([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:fy(e)}:j(this,el,"f").call(this,{body:e,headers:s})}}cf=W,el=new WeakMap,qu=new WeakSet,Sb=function(){return this.baseURL!=="https://api.openai.com/v1"};W.OpenAI=cf;W.DEFAULT_TIMEOUT=6e5;W.OpenAIError=G;W.APIError=Ge;W.APIConnectionError=ho;W.APIConnectionTimeoutError=Gd;W.APIUserAbortError=jt;W.NotFoundError=ay;W.ConflictError=iy;W.RateLimitError=ly;W.BadRequestError=ty;W.AuthenticationError=ny;W.InternalServerError=oy;W.PermissionDeniedError=sy;W.UnprocessableEntityError=ry;W.InvalidWebhookSignatureError=Ka;W.toFile=w1;W.Completions=sb;W.Chat=Pd;W.Embeddings=ib;W.Files=lb;W.Images=hb;W.Audio=rr;W.Moderations=gb;W.Models=mb;W.FineTuning=Ra;W.Graders=af;W.VectorStores=vo;W.Webhooks=wb;W.Beta=lr;W.Batches=Zy;W.Uploads=of;W.Responses=lf;W.Evals=ef;W.Containers=Fd;async function K1(t,e,n){var a;const s=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{console.log(`🚀 [${s}] 個別最適化メッセージ生成開始:`,{subject:t.subject,senderType:n,studyData:{subject:t.subject,questionsTotal:t.questionsTotal,questionsCorrect:t.questionsCorrect,accuracy:Math.round(t.questionsCorrect/t.questionsTotal*100),emotion:t.emotion,date:t.date},studyHistory:{continuationDays:e.continuationDays,totalDays:e.totalDays,recentRecordsCount:e.recentRecords.length}});const i=new AbortController,r=setTimeout(()=>i.abort(),15e3),l=await fetch("/api/generate-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studyData:t,studyHistory:e,senderType:n}),signal:i.signal});if(clearTimeout(r),!l.ok)throw console.error(`❌ [${s}] API応答エラー:`,l.status,l.statusText),new Error(`API request failed: ${l.status} ${l.statusText}`);const o=await l.json();return console.log(`✅ [${s}] 個別最適化メッセージ取得成功:`,(a=o.messages)==null?void 0:a.length,"messages",o.messages),o.messages.map(d=>({...d,source:"ai"}))}catch(i){return console.error(`❌ [${s}] 個別最適化メッセージ生成失敗:`,i),console.log(`🔄 [${s}] 個別データ反映フォールバックメッセージを使用`),P1(t,e,n).map(o=>({...o,source:"fallback"}))}}function P1(t,e,n){const a={aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"}[t.subject]||t.subject,i=Math.round(t.questionsCorrect/t.questionsTotal*100),r=t.questionsCorrect,l=t.questionsTotal,o=e.continuationDays,u=`${t.subject}_${t.date}_${t.questionsCorrect}_${t.questionsTotal}_${t.emotion}_${Date.now()}`,d=Math.abs(u.split("").reduce((f,h)=>f+h.charCodeAt(0),0))%100;if(n==="parent"){const f=[`${a}${i}%、今日もよく頑張ったね😊`,`${a}${i}%達成、素晴らしい努力だね😊`,`${a}で${i}%、本当によく頑張ってる😊`,`${a}${i}%、継続する力が立派だね😊`],h=[`${a}${l}問中${r}問正解、成長してるね🎯`,`${a}で${r}/${l}問正解、力がついてる🎯`,`${a}${r}問正解、確実に上達してるね🎯`,`${a}の${r}問正解、頑張りが実ってる🎯`],m=[`${o}日継続中、パパママも応援してるよ💝`,`${o}日も続けて、本当に頑張り屋さんだね💝`,`${o}日継続、その努力を誇らしく思うよ💝`,`${o}日間コツコツと、素晴らしい姿勢だね💝`];return[{message:f[d%f.length],emoji:"😊",type:"encouraging"},{message:h[(d+1)%h.length],emoji:"🎯",type:"specific_praise"},{message:m[(d+2)%m.length],emoji:"💝",type:"loving"}]}else{const f=[`${a}${i}%、着実に力がついています📈`,`${a}で${i}%達成、順調な成長です📈`,`${a}${i}%、確実にレベルアップしています📈`,`${a}の${i}%、基礎力が定着してきました📈`],h=[`${a}${l}問中${r}問正解、素晴らしいです🎯`,`${a}で${r}/${l}問正解、理解が深まっています🎯`,`${a}${r}問正解、学習効果が表れています🎯`,`${a}の${r}問正解、着実な進歩です🎯`],m=[`${o}日継続、この調子で次のステップへ💪`,`${o}日間の継続、継続力が素晴らしいです💪`,`${o}日続けて、学習習慣が定着していますね💪`,`${o}日継続中、この momentum を大切に💪`];return[{message:f[d%f.length],emoji:"📈",type:"encouraging"},{message:h[(d+1)%h.length],emoji:"🎯",type:"instructional"},{message:m[(d+2)%m.length],emoji:"💪",type:"motivational"}]}}function J1({recordId:t,studyData:e,senderType:n,onSendFeedback:s,sending:a,reactionSent:i,getStudyHistory:r}){const[l,o]=B.useState([]),[u,d]=B.useState(!1),[f,h]=B.useState(null),[m,_]=B.useState(!1);B.useEffect(()=>{w()},[t,n]);const w=async()=>{let g=null;try{d(!0),h(null),console.log("🚀 メッセージ読み込み開始 - recordId:",t,"senderType:",n);try{console.log("🔍 キャッシュチェック開始:",{recordId:t,senderType:n});const{data:A,error:O}=await Le.from("generated_messages").select("*").eq("record_id",t).eq("sender_type",n).single();if(console.log("🔍 キャッシュクエリ結果:",{cachedMessage:A,cacheError:O}),A&&!O){console.log("✅ キャッシュされたメッセージを使用:",A.messages),o(A.messages),_(!0),d(!1);return}else console.log("❌ キャッシュなし、新規生成します:",{cacheError:O==null?void 0:O.message})}catch(A){console.log("⚠️ キャッシュチェックでエラー（テーブル未作成？）:",A),console.log("🔄 キャッシュを使わずに新規生成します")}console.log("🔄 新しいメッセージを生成 - recordId:",t,"studyData:",{subject:e.subject,questionsTotal:e.questionsTotal,questionsCorrect:e.questionsCorrect,accuracy:Math.round(e.questionsCorrect/e.questionsTotal*100)}),g=await r(t),console.log("📊 取得した学習履歴:",g);const v=await K1(e,g,n);console.log("✅ 生成されたメッセージ:",v),await E(t,n,v),o(v),_(!1)}catch(v){console.error("個別最適化メッセージの生成に失敗:",v),h("メッセージの生成に失敗しました");const A={recentRecords:[e],totalDays:1,continuationDays:1,subjectAccuracy:{[e.subject]:{correct:e.questionsCorrect,total:e.questionsTotal}}};console.log("🔄 直接フォールバック使用 - studyData:",e,"fallbackHistory:",A);const O=b(e,A,n);await E(t,n,O),o(O),_(!1)}finally{d(!1)}},E=async(g,v,A)=>{try{console.log("💾 メッセージをキャッシュに保存:",{recordId:g,senderType:v,messagesCount:A.length,messages:A});const O={record_id:g,sender_type:v,messages:A,generated_at:new Date().toISOString()};console.log("💾 Upsertデータ:",O);const{data:y,error:N}=await Le.from("generated_messages").upsert(O,{onConflict:"record_id,sender_type"}).select();console.log("💾 Upsert結果:",{data:y,error:N}),N?(console.error("❌ メッセージキャッシュの保存に失敗:",N),N.message.includes("does not exist")&&console.error("🚨 generated_messagesテーブルが存在しません！create-generated-messages-table.sqlを実行してください")):console.log("✅ メッセージキャッシュ保存完了:",y)}catch(O){console.error("❌ メッセージキャッシュ保存エラー:",O)}},b=(g,v,A)=>{const y={aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"}[g.subject]||g.subject,N=Math.round(g.questionsCorrect/g.questionsTotal*100),M=g.questionsCorrect,R=g.questionsTotal,C=v.continuationDays,x=`${g.subject}_${g.date}_${g.questionsCorrect}_${g.questionsTotal}_${g.emotion}_${Date.now()}`,S=Math.abs(x.split("").reduce((D,z)=>D+z.charCodeAt(0),0))%100;if(console.log(`🎯 フォールバック生成 [${t}]:`,{recordId:t,subject:g.subject,subjectName:y,accuracy:N,correctCount:M,totalCount:R,continuationDays:C,senderType:A,uniqueSeed:x,randomIndex:S}),A==="parent"){const D=[`${y}${N}%、今日もよく頑張ったね😊`,`${y}${N}%達成、素晴らしい努力だね😊`,`${y}で${N}%、本当によく頑張ってる😊`,`${y}${N}%、継続する力が立派だね😊`],z=[`${y}${R}問中${M}問正解、成長してるね🎯`,`${y}で${M}/${R}問正解、力がついてる🎯`,`${y}${M}問正解、確実に上達してるね🎯`,`${y}の${M}問正解、頑張りが実ってる🎯`],T=[`${C}日継続中、パパママも応援してるよ💝`,`${C}日も続けて、本当に頑張り屋さんだね💝`,`${C}日継続、その努力を誇らしく思うよ💝`,`${C}日間コツコツと、素晴らしい姿勢だね💝`];return[{message:D[S%D.length],emoji:"😊",type:"encouraging"},{message:z[(S+1)%z.length],emoji:"🎯",type:"specific_praise"},{message:T[(S+2)%T.length],emoji:"💝",type:"loving"}]}else{const D=[`${y}${N}%、着実に力がついています📈`,`${y}で${N}%達成、順調な成長です📈`,`${y}${N}%、確実にレベルアップしています📈`,`${y}の${N}%、基礎力が定着してきました📈`],z=[`${y}${R}問中${M}問正解、素晴らしいです🎯`,`${y}で${M}/${R}問正解、理解が深まっています🎯`,`${y}${M}問正解、学習効果が表れています🎯`,`${y}の${M}問正解、着実な進歩です🎯`],T=[`${C}日継続、この調子で次のステップへ💪`,`${C}日間の継続、継続力が素晴らしいです💪`,`${C}日続けて、学習習慣が定着していますね💪`,`${C}日継続中、この momentum を大切に💪`];return[{message:D[S%D.length],emoji:"📈",type:"encouraging"},{message:z[(S+1)%z.length],emoji:"🎯",type:"instructional"},{message:T[(S+2)%T.length],emoji:"💪",type:"motivational"}]}},p=async g=>{await s(t,g.message,g.emoji)};return(i==null?void 0:i.recordId)===t?c.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 px-6 py-4 rounded-xl flex items-center justify-center gap-3 animate-pulse",children:[c.jsx("span",{className:"text-3xl",children:"✨"}),c.jsx("span",{className:"font-bold text-lg",children:"応援メッセージを送信しました！"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-lg font-bold mb-3",children:n==="parent"?"👨‍👩‍👧‍👦 保護者として応援する:":"👨‍🏫 指導者として応援する:"}),u&&c.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl flex items-center gap-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),c.jsx("span",{className:"text-blue-700",children:l.length>0?"応援メッセージを読み込み中...":"あなた専用の応援メッセージを生成中..."})]}),f&&c.jsxs("div",{className:"bg-red-50 p-4 rounded-xl text-red-700",children:[c.jsx("p",{children:f}),c.jsx("button",{onClick:w,className:"mt-2 text-sm underline hover:no-underline",children:"再試行"})]}),!u&&l.length>0&&c.jsxs("div",{className:"space-y-3",children:[l.map((g,v)=>c.jsx("button",{onClick:()=>p(g),disabled:a,className:"w-full p-4 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 border border-blue-200 rounded-xl text-left transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:g.emoji}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-slate-800 font-medium text-lg",children:g.message}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z1(g.type)}`,children:F1(g.type)}),c.jsxs("span",{className:"text-xs text-slate-500",children:[n==="parent"?"保護者":"指導者","向け"]}),g.source&&c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.source==="ai"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:g.source==="ai"?"🤖 AI生成":"📝 フォールバック"})]})]})]})},v)),c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:"💡 より詳しいメッセージを送りたい場合は、下の「メッセージを送る」セクションをご利用ください"}),m&&c.jsxs("div",{className:"p-2 bg-green-50 rounded-lg text-sm text-green-700 flex items-center gap-2",children:[c.jsx("span",{children:"⚡"}),c.jsx("span",{children:"高速表示: 以前に生成されたメッセージを表示中"})]})]})]})]})}function Z1(t){return{encouraging:"bg-green-100 text-green-700",specific_praise:"bg-blue-100 text-blue-700",motivational:"bg-red-100 text-red-700",loving:"bg-pink-100 text-pink-700",instructional:"bg-purple-100 text-purple-700"}[t]||"bg-gray-100 text-gray-700"}function F1(t){return{encouraging:"励まし",specific_praise:"具体的称賛",motivational:"動機付け",loving:"愛情表現",instructional:"指導的"}[t]||t}function W1({userRole:t}){const[e,n]=B.useState([]),[s,a]=B.useState([]),[i,r]=B.useState(!0),[l,o]=B.useState(null),[u,d]=B.useState(""),[f,h]=B.useState(!1),[m,_]=B.useState(null);B.useEffect(()=>{w()},[]);const w=async()=>{try{r(!0);const S=new Date;S.setDate(S.getDate()-14);const D=S.toISOString().split("T")[0],{data:z,error:T}=await Le.from("study_records").select("*").gte("date",D).order("date",{ascending:!1});if(T)throw T;const{data:$,error:L}=await Le.from("feedbacks").select("*").order("created_at",{ascending:!1});if(L)throw L;const q=await E(z||[]);n(q),a($||[])}catch(S){console.error("❌ データ取得エラー:",S)}finally{r(!1)}},E=async S=>{const D=[];for(const z of S){const T=S.filter($=>$.study_date===z.study_date&&$.subject===z.subject&&$.content_type===z.content_type&&$.date<=z.date).sort(($,L)=>$.attempt_number-L.attempt_number).map($=>({attempt:$.attempt_number,correct:$.questions_correct,total:$.questions_total,accuracy:Math.round($.questions_correct/$.questions_total*100),record_date:$.date,emotion:$.emotion}));D.push({...z,history:T})}return D},b=async S=>{try{const D=new Date;D.setDate(D.getDate()-30);const z=D.toISOString().split("T")[0],{data:T,error:$}=await Le.from("study_records").select("*").gte("date",z).order("date",{ascending:!1});if($)throw $;const L=[...new Set((T==null?void 0:T.map(me=>me.date))||[])],q=p(L),V={};return T==null||T.forEach(me=>{V[me.subject]||(V[me.subject]={correct:0,total:0}),V[me.subject].correct+=me.questions_correct,V[me.subject].total+=me.questions_total}),{recentRecords:((T==null?void 0:T.slice(0,5))||[]).map(me=>({subject:me.subject,questionsTotal:me.questions_total,questionsCorrect:me.questions_correct,emotion:me.emotion,comment:me.comment||void 0,date:me.date})),totalDays:L.length,continuationDays:q,subjectAccuracy:V}}catch(D){return console.error("学習履歴データの取得に失敗:",D),{recentRecords:[],totalDays:0,continuationDays:0,subjectAccuracy:{}}}},p=S=>{if(S.length===0)return 0;const D=S.sort((T,$)=>new Date($).getTime()-new Date(T).getTime());let z=1;for(let T=1;T<D.length;T++){const $=new Date(D[T]),L=new Date(D[T-1]);if(Math.floor((L.getTime()-$.getTime())/(1e3*60*60*24))===1)z++;else break}return z},g=async(S,D,z)=>{try{h(!0);const{error:T}=await Le.from("feedbacks").insert([{record_id:S,sender_type:t,reaction_type:null,message:D}]);if(T)throw T;console.log("✅ 個別最適化メッセージ送信成功"),h(!1),_({recordId:S,type:"personalized"}),setTimeout(()=>{_(null);const $={id:Date.now(),record_id:S,sender_type:t,reaction_type:void 0,message:D,created_at:new Date().toISOString()};a(L=>[$,...L])},2e3)}catch(T){console.error("❌ 個別最適化メッセージ送信エラー:",T),alert("メッセージの送信に失敗しました"),h(!1),_(null)}},v=async S=>{if(!u.trim()){alert("コメントを入力してください");return}try{h(!0);const{error:D}=await Le.from("feedbacks").insert([{record_id:S,sender_type:t,reaction_type:null,message:u.trim()}]);if(D)throw D;console.log("✅ コメント送信成功");const z={id:Date.now(),record_id:S,sender_type:t,reaction_type:void 0,message:u.trim(),created_at:new Date().toISOString()};a(T=>[z,...T]),d(""),o(null)}catch(D){console.error("❌ コメント送信エラー:",D),alert("コメントの送信に失敗しました")}finally{h(!1)}},A=S=>({aptitude:"適性",japanese:"国語",math:"算数",science:"理科",social:"社会"})[S]||S,O=S=>S==="class"?"授業":"宿題",y=S=>({good:"😊 よくできた",normal:"😐 普通",hard:"😞 難しかった"})[S]||S,N=S=>S==="parent"?"👨‍👩‍👧‍👦 保護者":"👨‍🏫 指導者",M=S=>s.filter(D=>D.record_id===S),R=S=>S.length<=1?"":S.map(D=>`(${D.correct}/${D.total})`).join(" → "),C=S=>!S||S==="1970-01-01"?"未設定":new Date(S).toLocaleDateString("ja-JP",{year:"numeric",month:"numeric",day:"numeric"}),x=S=>new Date(S).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric"});return i?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-lg",children:"学習記録を読み込み中..."})]}):c.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent mb-2",children:"💌 応援・フィードバック"}),c.jsxs("p",{className:"text-slate-600 text-lg",children:[N(t),"として、がんばりを応援しよう！"]})]}),c.jsx("div",{className:"space-y-6",children:e.length>0?e.map(S=>{const D=M(S.id),z=Math.round(S.questions_correct/S.questions_total*100);return c.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:[A(S.subject),"（",O(S.content_type),"）"]}),c.jsxs("div",{className:"flex items-center gap-4 text-slate-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"学習実施日:"})," ",C(S.study_date)]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"記録日:"})," ",x(S.date)]}),S.attempt_number>1&&c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium",children:[S.attempt_number,"回目"]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-3xl font-black text-blue-600",children:[z,"%"]}),c.jsxs("div",{className:"text-sm text-slate-500",children:[S.questions_correct,"/",S.questions_total,"問正解"]})]})]}),S.history.length>1&&c.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl mb-4",children:[c.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"📈 成績の変化"}),c.jsxs("div",{className:"text-blue-700",children:[c.jsx("div",{className:"font-mono text-lg mb-2",children:R(S.history)}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:"成長:"}),c.jsxs("span",{className:"ml-2 text-green-700 font-bold",children:["+",S.history[S.history.length-1].accuracy-S.history[0].accuracy,"%改善"]}),c.jsxs("span",{className:"ml-4 text-slate-600",children:["（",S.history.length,"回挑戦）"]})]}),c.jsx("div",{className:"text-xs text-blue-600 mt-1",children:S.history.map((T,$)=>c.jsxs("span",{className:"mr-3",children:[$+1,"回目: ",x(T.record_date)]},$))})]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl mb-4",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("span",{className:"text-lg font-medium",children:"今回の気持ち:"}),c.jsx("span",{className:"text-xl",children:y(S.emotion)})]}),S.comment&&c.jsxs("div",{children:[c.jsx("span",{className:"text-lg font-medium",children:"コメント:"}),c.jsxs("p",{className:"text-slate-700 mt-1",children:["「",S.comment,"」"]})]})]})]}),c.jsx("div",{className:"mb-6",children:c.jsx(J1,{recordId:S.id,studyData:{subject:S.subject,questionsTotal:S.questions_total,questionsCorrect:S.questions_correct,emotion:S.emotion,comment:S.comment||void 0,date:S.date},senderType:t,onSendFeedback:g,sending:f,reactionSent:m,getStudyHistory:b})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-lg font-bold mb-3",children:"メッセージを送る:"}),(l==null?void 0:l.id)===S.id?c.jsxs("div",{className:"space-y-3",children:[c.jsx("textarea",{value:u,onChange:T=>d(T.target.value),maxLength:500,className:"w-full min-h-24 p-4 border-2 border-slate-200 rounded-xl focus:border-purple-400 focus:ring-4 focus:ring-purple-100 text-lg resize-none",placeholder:"応援のメッセージを書いてください..."}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"text-sm text-slate-500",children:[u.length,"/500文字"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(null),d("")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"キャンセル"}),c.jsx("button",{onClick:()=>v(S.id),disabled:f||!u.trim(),className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"送信中...":"送信"})]})]})]}):c.jsx("button",{onClick:()=>o(S),className:"w-full p-4 border-2 border-dashed border-slate-300 rounded-xl text-slate-500 hover:border-purple-400 hover:text-purple-600 transition-colors",children:"💬 メッセージを書く"})]}),D.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold mb-3",children:"これまでの応援:"}),c.jsx("div",{className:"space-y-2",children:D.sort((T,$)=>new Date($.created_at).getTime()-new Date(T.created_at).getTime()).map(T=>c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${T.sender_type==="parent"?"bg-pink-100 text-pink-700":"bg-blue-100 text-blue-700"}`,children:N(T.sender_type)}),T.reaction_type&&c.jsxs("span",{className:"text-lg",children:[T.reaction_type==="clap"&&"👏 すごい！",T.reaction_type==="thumbs"&&"👍 いいね！",T.reaction_type==="muscle"&&"💪 頑張って！"]}),c.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:new Date(T.created_at).toLocaleDateString("ja-JP")})]}),T.message&&typeof T.message=="string"&&T.message.trim()!==""&&c.jsx("p",{className:"text-slate-700 text-sm mt-1",children:T.message})]},T.id))})]})]},S.id)}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("span",{className:"text-6xl mb-4 block",children:"📝"}),c.jsx("h3",{className:"text-2xl font-bold text-slate-600 mb-2",children:"学習記録がまだありません"}),c.jsx("p",{className:"text-slate-500",children:"学習記録が投稿されると、ここに表示されます"})]})})]})}function ej(){const[t,e]=B.useState("study"),[n,s]=B.useState([]),[a,i]=B.useState(!0),[r,l]=B.useState(null),[o,u]=B.useState("all"),[d,f]=B.useState("date"),[h,m]=B.useState("desc");B.useEffect(()=>{_()},[]);const _=async()=>{try{i(!0),l(null);const{data:C,error:x}=await Le.from("study_records").select("*").order("study_date",{ascending:!1}).order("date",{ascending:!1});if(x)throw x;const{data:S,error:D}=await Le.from("feedbacks").select("*").order("created_at",{ascending:!1});if(D)throw D;const z=(C||[]).map(T=>({record:T,feedbacks:(S||[]).filter($=>$.record_id===T.id)}));s(z)}catch(C){console.error("履歴データの読み込みでエラーが発生しました:",C),l("履歴データの読み込みに失敗しました。")}finally{i(!1)}},w=C=>({aptitude:"適性検査",japanese:"国語",math:"算数",science:"理科",social:"社会"})[C]||C,E=C=>({aptitude:"🎯",japanese:"✍️",math:"🔢",science:"🧪",social:"🌍"})[C]||"📚",b=C=>C==="class"?"授業":"宿題",p=C=>({good:"😊 よくできた",normal:"😐 ふつう",hard:"😵 むずかしかった"})[C]||C,g=C=>{const x=new Date(C);return`${x.getMonth()+1}/${x.getDate()}`},v=C=>new Date(C).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=()=>{let C=n;return o!=="all"&&(C=n.filter(S=>S.record.subject===o)),[...C].sort((S,D)=>{let z=0;switch(d){case"date":z=new Date(S.record.study_date).getTime()-new Date(D.record.study_date).getTime();break;case"accuracy":const T=S.record.questions_correct/S.record.questions_total*100,$=D.record.questions_correct/D.record.questions_total*100;z=T-$;break;case"emotion":const L={hard:0,normal:1,good:2};z=L[S.record.emotion]-L[D.record.emotion];break}return h==="asc"?z:-z})},O=C=>{d===C?m(h==="asc"?"desc":"asc"):(f(C),m("desc"))},y=C=>d!==C?"↕️":h==="asc"?"↑":"↓",N=()=>{const C=A();return c.jsx("div",{className:"space-y-4",children:C.map(x=>c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:E(x.record.subject)}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-lg",children:[w(x.record.subject),"（",b(x.record.content_type),"）"]}),c.jsxs("div",{className:"text-sm text-slate-500",children:["📅 ",g(x.record.study_date),"実施分",x.record.attempt_number>1&&c.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:[x.record.attempt_number,"回目"]})]})]})]}),c.jsxs("div",{className:"text-right text-sm text-slate-500",children:["記録日: ",v(x.record.date)]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"正答率"}),c.jsxs("div",{className:"text-xl font-bold text-blue-700",children:[Math.round(x.record.questions_correct/x.record.questions_total*100),"%"]})]}),c.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-green-600 font-medium",children:"正解数"}),c.jsxs("div",{className:"text-xl font-bold text-green-700",children:[x.record.questions_correct,"/",x.record.questions_total]})]}),c.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"感想"}),c.jsx("div",{className:"text-lg text-purple-700",children:p(x.record.emotion)})]}),c.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"応援数"}),c.jsxs("div",{className:"text-xl font-bold text-orange-700",children:[x.feedbacks.length,"件"]})]})]}),x.record.comment&&c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg mb-4",children:[c.jsx("div",{className:"text-sm text-slate-600 font-medium mb-1",children:"コメント"}),c.jsx("p",{className:"text-slate-700",children:x.record.comment})]}),x.feedbacks.length>0&&c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("div",{className:"text-sm text-slate-600 font-medium mb-2",children:["応援メッセージ・スタンプ (",x.feedbacks.length,"件)"]}),c.jsx("div",{className:"space-y-2",children:x.feedbacks.map(S=>c.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S.sender_type==="parent"?"bg-pink-100 text-pink-800":"bg-blue-100 text-blue-800"}`,children:S.sender_type==="parent"?"👨‍👩‍👧‍👦":"👨‍🏫"}),S.reaction_type&&c.jsxs("span",{className:"text-lg",children:[S.reaction_type==="clap"&&"👏",S.reaction_type==="thumbs"&&"👍",S.reaction_type==="muscle"&&"💪"]}),c.jsx("span",{className:"flex-1 text-slate-700",children:S.message||(S.reaction_type==="clap"?"すごい！":S.reaction_type==="thumbs"?"いいね！":S.reaction_type==="muscle"?"頑張って！":"")}),c.jsx("span",{className:"text-xs text-slate-500",children:v(S.created_at)})]},S.id))})]})]},x.record.id))})},M=()=>{const C=n.flatMap(x=>x.feedbacks.map(S=>({feedback:S,record:x.record}))).sort((x,S)=>new Date(S.feedback.created_at).getTime()-new Date(x.feedback.created_at).getTime());return c.jsx("div",{className:"space-y-4",children:C.map(({feedback:x,record:S})=>c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow border",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${x.sender_type==="parent"?"bg-pink-100 text-pink-800":"bg-blue-100 text-blue-800"}`,children:x.sender_type==="parent"?"👨‍👩‍👧‍👦 保護者":"👨‍🏫 指導者"}),x.reaction_type&&c.jsxs("span",{className:"text-2xl",children:[x.reaction_type==="clap"&&"👏",x.reaction_type==="thumbs"&&"👍",x.reaction_type==="muscle"&&"💪"]}),c.jsx("span",{className:"text-sm text-slate-500 ml-auto",children:v(x.created_at)})]}),c.jsxs("div",{className:"mb-3 p-3 bg-slate-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-lg",children:E(S.subject)}),c.jsx("span",{className:"font-semibold",children:w(S.subject)}),c.jsx("span",{className:"text-sm px-2 py-1 bg-slate-200 text-slate-600 rounded",children:b(S.content_type)})]}),c.jsxs("div",{className:"text-sm text-slate-600",children:["📅 ",g(S.study_date),"実施分 | 🎯 ",S.questions_correct,"/",S.questions_total,"問正解 (",Math.round(S.questions_correct/S.questions_total*100),"%)"]})]}),x.message&&typeof x.message=="string"&&x.message.trim()!==""?c.jsx("p",{className:"text-slate-700 text-lg",children:x.message}):x.reaction_type&&c.jsxs("p",{className:"text-slate-600 italic",children:[x.reaction_type==="clap"&&"すごい！",x.reaction_type==="thumbs"&&"いいね！",x.reaction_type==="muscle"&&"頑張って！"]})]},x.id))})},R=()=>{const C=[...n.map(x=>({type:"study",data:x,date:x.record.date})),...n.flatMap(x=>x.feedbacks.map(S=>({type:"feedback",data:{feedback:S,record:x.record},date:S.created_at})))].sort((x,S)=>new Date(S.date).getTime()-new Date(x.date).getTime());return c.jsx("div",{className:"space-y-4",children:C.map((x,S)=>c.jsx("div",{className:"bg-white p-6 rounded-xl shadow border",children:x.type==="study"?c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm font-medium",children:"📝 学習記録"}),c.jsx("span",{className:"text-sm text-slate-500",children:v(x.data.record.date)})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xl",children:E(x.data.record.subject)}),c.jsx("span",{className:"font-semibold",children:w(x.data.record.subject)}),c.jsx("span",{className:"text-sm px-2 py-1 bg-slate-100 text-slate-600 rounded",children:b(x.data.record.content_type)}),c.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[x.data.record.questions_correct,"/",x.data.record.questions_total,"問正解 (",Math.round(x.data.record.questions_correct/x.data.record.questions_total*100),"%)"]})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm font-medium",children:"💌 応援"}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.data.feedback.sender_type==="parent"?"bg-pink-100 text-pink-800":"bg-blue-100 text-blue-800"}`,children:x.data.feedback.sender_type==="parent"?"👨‍👩‍👧‍👦":"👨‍🏫"}),x.data.feedback.reaction_type&&c.jsxs("span",{className:"text-lg",children:[x.data.feedback.reaction_type==="clap"&&"👏",x.data.feedback.reaction_type==="thumbs"&&"👍",x.data.feedback.reaction_type==="muscle"&&"💪"]}),c.jsx("span",{className:"text-sm text-slate-500",children:v(x.data.feedback.created_at)})]}),c.jsxs("div",{className:"text-slate-700",children:[w(x.data.record.subject),"への応援: ",x.data.feedback.message||(x.data.feedback.reaction_type==="clap"?"すごい！":x.data.feedback.reaction_type==="thumbs"?"いいね！":x.data.feedback.reaction_type==="muscle"?"頑張って！":"")]})]})},`${x.type}-${S}`))})};return a?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin text-4xl",children:"⏳"}),c.jsx("p",{className:"mt-4 text-slate-600",children:"履歴を読み込み中..."})]}):r?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"❌"}),c.jsx("p",{className:"text-red-600",children:r}),c.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"再試行"})]}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"📚 学習履歴"}),c.jsx("p",{className:"text-center text-slate-600",children:"これまでの学習記録と応援メッセージを確認できます"})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-lg mb-6",children:c.jsxs("div",{className:"flex border-b",children:[c.jsx("button",{onClick:()=>e("study"),className:`flex-1 py-4 px-6 text-center font-medium transition-colors ${t==="study"?"bg-blue-500 text-white rounded-t-xl":"text-slate-600 hover:text-blue-500"}`,children:"📝 学習履歴"}),c.jsx("button",{onClick:()=>e("feedback"),className:`flex-1 py-4 px-6 text-center font-medium transition-colors ${t==="feedback"?"bg-blue-500 text-white rounded-t-xl":"text-slate-600 hover:text-blue-500"}`,children:"💌 応援履歴"}),c.jsx("button",{onClick:()=>e("combined"),className:`flex-1 py-4 px-6 text-center font-medium transition-colors ${t==="combined"?"bg-blue-500 text-white rounded-t-xl":"text-slate-600 hover:text-blue-500"}`,children:"📊 まとめて表示"})]})}),t==="study"&&c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx("span",{children:"🔍"}),"絞り込み・並び替え"]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"科目で絞り込み"}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2",children:[c.jsx("button",{onClick:()=>u("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] ${o==="all"?"bg-blue-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"すべて"}),c.jsxs("button",{onClick:()=>u("aptitude"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${o==="aptitude"?"bg-purple-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"🎯"})," 適性"]}),c.jsxs("button",{onClick:()=>u("japanese"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${o==="japanese"?"bg-rose-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"✍️"})," 国語"]}),c.jsxs("button",{onClick:()=>u("math"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${o==="math"?"bg-blue-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"🔢"})," 算数"]}),c.jsxs("button",{onClick:()=>u("science"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${o==="science"?"bg-green-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"🧪"})," 理科"]}),c.jsxs("button",{onClick:()=>u("social"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${o==="social"?"bg-amber-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"🌍"})," 社会"]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"並び替え"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[c.jsxs("button",{onClick:()=>O("date"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${d==="date"?"bg-blue-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"📅"})," 実施日 ",c.jsx("span",{className:"ml-1",children:y("date")})]}),c.jsxs("button",{onClick:()=>O("accuracy"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${d==="accuracy"?"bg-green-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"🎯"})," 正答率 ",c.jsx("span",{className:"ml-1",children:y("accuracy")})]}),c.jsxs("button",{onClick:()=>O("emotion"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 min-h-[44px] ${d==="emotion"?"bg-purple-500 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[c.jsx("span",{className:"hidden sm:inline",children:"😊"})," 感想 ",c.jsx("span",{className:"ml-1",children:y("emotion")})]})]})]}),c.jsx("div",{className:"pt-4 border-t border-slate-200",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-slate-600",children:[c.jsxs("span",{className:"font-medium",children:["表示中: ",c.jsx("span",{className:"text-blue-600",children:o==="all"?"すべての科目":w(o)})]}),c.jsx("span",{className:"hidden sm:inline",children:"•"}),c.jsxs("span",{children:["並び順: ",c.jsx("span",{className:"font-medium",children:d==="date"?"実施日":d==="accuracy"?"正答率":"感想"}),c.jsx("span",{className:"text-slate-500",children:h==="desc"?" (高い順)":" (低い順)"})]}),c.jsx("span",{className:"hidden sm:inline",children:"•"}),c.jsxs("span",{className:"font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[A().length,"件"]})]})})]}),c.jsxs("div",{className:"mb-8",children:[t==="study"&&N(),t==="feedback"&&M(),t==="combined"&&R()]}),n.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-600 mb-2",children:"履歴がありません"}),c.jsx("p",{className:"text-slate-500",children:"学習記録をつけると、ここに履歴が表示されます"})]})]})})}function tj({userRole:t}){const[e,n]=B.useState([]),[s,a]=B.useState(!0),[i,r]=B.useState(null),[l,o]=B.useState(!1),[u,d]=B.useState(""),[f,h]=B.useState(""),[m,_]=B.useState(""),[w,E]=B.useState(null),[b,p]=B.useState(""),[g,v]=B.useState(!1),[A,O]=B.useState(null),[y,N]=B.useState(null),[M,R]=B.useState(!1),[C,x]=B.useState(!1);B.useEffect(()=>{S();const q=new Date().toISOString().split("T")[0];d(q)},[]),B.useEffect(()=>{if(u&&e.length>0){const q=e.find(V=>V.date===u);q?(O(q),h(q.reflection_content),_(q.improvement_points||""),v(!0)):(O(null),h(""),_(""),v(!1))}},[u,e]);const S=async()=>{try{a(!0),r(null);const{data:q,error:V}=await Le.from("reflections").select("*").order("date",{ascending:!1});if(V)throw V;n(q||[])}catch(q){console.error("振り返りデータの読み込みでエラーが発生しました:",q),r("振り返りデータの読み込みに失敗しました。")}finally{a(!1)}},D=async q=>{if(q.preventDefault(),!u||!f.trim()){r("日付と振り返り内容は必須です。");return}try{if(o(!0),r(null),g&&A){const{error:Je}=await Le.from("reflections").update({reflection_content:f.trim(),improvement_points:m.trim()||null}).eq("id",A.id);if(Je)throw Je}else{const{error:Je}=await Le.from("reflections").insert({date:u,reflection_content:f.trim(),improvement_points:m.trim()||null});if(Je)throw Je}h(""),_(""),v(!1),O(null),await S(),N(g?"✅ 振り返りを更新しました！":"✅ 振り返りを保存しました！"),R(!0),x(!0),setTimeout(()=>x(!1),1e3),setTimeout(()=>{R(!1),setTimeout(()=>N(null),300)},3e3)}catch(V){console.error("振り返りの保存でエラーが発生しました:",V),r("振り返りの保存に失敗しました。")}finally{o(!1)}},z=()=>{h(""),_(""),v(!1),O(null);const q=new Date().toISOString().split("T")[0];d(q)},T=async q=>{if(!b.trim()){r("コメントを入力してください。");return}try{o(!0),r(null);const{error:V}=await Le.from("reflections").update({teacher_comment:b.trim()}).eq("id",q);if(V)throw V;p(""),E(null),await S(),N("✅ 先生のコメントを追加しました！"),R(!0),setTimeout(()=>{R(!1),setTimeout(()=>N(null),300)},3e3)}catch(V){console.error("先生コメントの保存でエラーが発生しました:",V),r("先生コメントの保存に失敗しました。")}finally{o(!1)}},$=q=>new Date(q).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short"}),L=q=>new Date(q).toLocaleDateString("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin text-4xl",children:"⏳"}),c.jsx("p",{className:"mt-4 text-slate-600",children:"振り返りデータを読み込み中..."})]}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"🤔 振り返り"}),c.jsx("p",{className:"text-center text-slate-600",children:t==="student"?"学習を振り返って、成長につなげよう":t==="teacher"?"生徒の振り返りにコメントして、成長をサポートしよう":"生徒の振り返りを確認して、成長を見守ろう"})]}),i&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-700",children:i})}),y&&c.jsx("div",{className:`mb-6 p-4 bg-green-50 border border-green-200 rounded-lg transition-all duration-300 ${M?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl animate-bounce",children:"🎉"}),c.jsx("p",{className:"text-green-700 font-medium",children:y})]})}),t==="student"&&c.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 mb-8 transition-all duration-1000 ${C?"ring-4 ring-green-200 shadow-green-100 shadow-2xl":""}`,children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:g?"📝":"✍️"}),g?"振り返りを編集する":"振り返りを記入する"]}),c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["振り返り日付 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"date",value:u,onChange:q=>d(q.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),g&&c.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"📝 既存の振り返りを編集中です。"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["今日の振り返り ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{value:f,onChange:q=>h(q.target.value),placeholder:"今日の学習はどうでしたか？うまくいったこと、うまくいかなかったことを書いてみましょう。",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-32 resize-none",required:!0}),c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[f.length,"/500文字"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"明日からの改善点"}),c.jsx("textarea",{value:m,onChange:q=>_(q.target.value),placeholder:"明日からどんなことを改善したいですか？具体的な目標を書いてみましょう。",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24 resize-none"}),c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[m.length,"/300文字"]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"submit",disabled:l,className:`flex-1 py-3 text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 ${l?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 hover:shadow-lg transform hover:scale-105"}`,children:l?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"保存中..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-lg",children:g?"💾":"📝"}),g?"変更を保存":"振り返りを保存"]})}),g&&c.jsx("button",{type:"button",onClick:z,className:"px-6 py-3 bg-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-400 transition-colors",children:"キャンセル"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"📖"}),"これまでの振り返り"]}),e.length>0?c.jsx("div",{className:"space-y-6",children:e.map(q=>c.jsxs("div",{className:"border border-slate-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:$(q.date)}),c.jsxs("div",{className:"flex items-center gap-2",children:[t==="student"&&c.jsx("button",{onClick:()=>{d(q.date),h(q.reflection_content),_(q.improvement_points||""),O(q),v(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"✏️ 編集"}),c.jsxs("span",{className:"text-sm text-slate-500",children:["記録: ",L(q.created_at)]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"📝 振り返り内容"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:q.reflection_content})]}),q.improvement_points&&c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"🎯 改善点"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:q.improvement_points})]}),q.teacher_comment?c.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"👨‍🏫 先生からのコメント"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:q.teacher_comment})]}):t==="teacher"?c.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:(w==null?void 0:w.id)===q.id?c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"font-medium text-slate-800",children:"👨‍🏫 先生からのコメントを追加"}),c.jsx("textarea",{value:b,onChange:V=>p(V.target.value),placeholder:"生徒の振り返りに対してコメントを書いてください。",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24 resize-none"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>T(q.id),disabled:l,className:`px-4 py-2 text-white rounded-lg font-medium transition-all duration-200 flex items-center gap-2 ${l?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 hover:shadow-lg transform hover:scale-105"}`,children:l?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"保存中..."]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"💬"}),"コメント保存"]})}),c.jsx("button",{onClick:()=>{E(null),p("")},className:"px-4 py-2 bg-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-400 transition-colors",children:"キャンセル"})]})]}):c.jsx("button",{onClick:()=>E(q),className:"text-blue-600 hover:text-blue-800 font-medium",children:"💬 コメントを追加"})}):null]})]},q.id))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📝"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-600 mb-2",children:"振り返りがありません"}),c.jsx("p",{className:"text-slate-500",children:t==="student"?"上のフォームから振り返りを記入してみましょう":"生徒が振り返りを記入すると、ここに表示されます"})]})]})]})})}function nj({currentRole:t,onRoleChange:e}){const n=[{key:"student",label:"生徒",icon:"👧",description:"学習記録をつける",color:"from-blue-400 to-blue-600",bgColor:"bg-blue-50 border-blue-200"},{key:"parent",label:"保護者",icon:"👨‍👩‍👧‍👦",description:"子どもの学習を応援",color:"from-pink-400 to-pink-600",bgColor:"bg-pink-50 border-pink-200"},{key:"teacher",label:"指導者",icon:"👨‍🏫",description:"生徒の学習を指導",color:"from-green-400 to-green-600",bgColor:"bg-green-50 border-green-200"}],s=()=>n.find(a=>a.key===t)||n[0];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:`inline-flex items-center gap-3 px-6 py-3 rounded-xl border-2 ${s().bgColor}`,children:[c.jsx("span",{className:"text-2xl",children:s().icon}),c.jsxs("div",{className:"text-left",children:[c.jsxs("div",{className:"font-bold text-lg",children:["現在: ",s().label,"モード"]}),c.jsx("div",{className:"text-sm text-slate-600",children:s().description})]})]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:n.map(a=>c.jsxs("button",{onClick:()=>e(a.key),className:`p-6 rounded-2xl border-2 transition-all duration-200 text-center ${t===a.key?`${a.bgColor} border-current shadow-lg scale-105`:"bg-white border-slate-200 hover:border-slate-300 hover:shadow-md hover:scale-102"}`,children:[c.jsx("div",{className:"text-4xl mb-3",children:a.icon}),c.jsxs("div",{className:"font-bold text-lg mb-1",children:[a.label,"として見る"]}),c.jsx("div",{className:"text-sm text-slate-600",children:a.description})]},a.key))}),c.jsx("div",{className:"text-center text-sm text-slate-500",children:c.jsx("p",{children:"役割を選択すると、それぞれに適した画面が表示されます"})})]})}function sj(){const[t,e]=B.useState("dashboard"),[n,s]=B.useState("student");return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[c.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200/50 sticky top-0 z-10",children:c.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:c.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-4 mr-4",children:[c.jsx("span",{className:"text-sm font-medium text-slate-600",children:"現在:"}),c.jsxs("div",{className:`px-3 py-1 rounded-lg text-sm font-medium ${n==="student"?"bg-blue-100 text-blue-800":n==="parent"?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}`,children:[n==="student"?"👧 生徒":n==="parent"?"👨‍👩‍👧‍👦 保護者":"👨‍🏫 指導者","モード"]})]}),n==="student"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e("dashboard"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="dashboard"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📊 ダッシュボード"}),c.jsx("button",{onClick:()=>e("form"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="form"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📝 学習記録"}),c.jsx("button",{onClick:()=>e("history"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="history"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📚 学習履歴"}),c.jsx("button",{onClick:()=>e("reflection"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="reflection"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"🤔 振り返り"})]}),(n==="parent"||n==="teacher")&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>e("dashboard"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="dashboard"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📊 進捗確認"}),c.jsx("button",{onClick:()=>e("feedback"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="feedback"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"💌 フィードバック"}),c.jsx("button",{onClick:()=>e("history"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="history"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"📚 学習履歴"}),c.jsx("button",{onClick:()=>e("reflection"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="reflection"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"🤔 振り返り"})]}),c.jsx("button",{onClick:()=>e("userSwitch"),className:`px-3 py-2 rounded-lg font-medium transition-colors text-sm ${t==="userSwitch"?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"👥 役割切り替え"})]})})}),t==="dashboard"&&c.jsx(LS,{}),t==="form"&&c.jsx(BS,{}),t==="feedback"&&c.jsx(W1,{userRole:n==="parent"?"parent":"teacher"}),t==="history"&&c.jsx(ej,{}),t==="reflection"&&c.jsx(tj,{userRole:n==="student"?"student":n==="teacher"?"teacher":"parent"}),t==="userSwitch"&&c.jsx("div",{className:"p-8 max-w-4xl mx-auto",children:c.jsx(nj,{currentRole:n,onRoleChange:a=>{s(a),e("dashboard")}})})]})}Ex.createRoot(document.getElementById("root")).render(c.jsx(Qb.StrictMode,{children:c.jsx(sj,{})}));
